{"version":3,"file":"js/274.307c2da8.js","mappings":"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","sources":["webpack://frontend/./src/views/Kardex.vue","webpack://frontend/./src/views/Kardex.vue?e2fe"],"sourcesContent":["\r\n<template>\r\n  <div class=\"kardex-view\">\r\n    <h1>Kardex de Inventario de Productos</h1>\r\n\r\n    <!-- Botones de acción -->\r\n    <div class=\"actions\" style=\"justify-content: flex-end\">\r\n\r\n      <button @click=\"limpiarPagina\" class=\"btn btn-warning\">Limpiar Página</button>\r\n    </div>\r\n\r\n    <!-- Filtros de búsqueda -->\r\n    <section class=\"filters form-section\">\r\n      <h2>Filtrar Movimientos</h2>\r\n      <div class=\"filters-header\">\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaInicio\">Fecha inicio:</label>\r\n          <input type=\"date\" id=\"fechaInicio\" v-model=\"fechaInicio\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaFin\">Fecha fin:</label>\r\n          <input type=\"date\" id=\"fechaFin\" v-model=\"fechaFin\" />\r\n        </div>\r\n        <div class=\"form-actions\">\r\n          <button @click=\"consultarKardex\" class=\"btn\">Consultar Kardex</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"filters-products form-group\">\r\n        <label for=\"nombreProducto\">Buscar por nombre:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"nombreProducto\"\r\n          v-model=\"nombreProducto\"\r\n          placeholder=\"Ingrese nombre del producto\"\r\n          @input=\"sincronizarPorNombre\"\r\n        />\r\n      </div>\r\n      <div class=\"filters-products form-group\">\r\n        <label for=\"productoSelector\">Seleccione un producto:</label>\r\n        <select v-model=\"codigoProducto\" id=\"productoSelector\" @change=\"sincronizarSelectorConCodigo\">\r\n          <option value=\"\" disabled>Seleccione un producto</option>\r\n          <option v-for=\"producto in productos\" :key=\"producto.codigo\" :value=\"producto.codigo\">\r\n            {{ producto.codigo }} - {{ producto.nombre }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div class=\"filters-products form-group\">\r\n        <label for=\"codigoProducto\">O ingrese el código del producto:</label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"codigoProducto\"\r\n          v-model=\"codigoProducto\"\r\n          placeholder=\"Ingrese el código del producto\"\r\n          @input=\"sincronizarCodigoConSelector\"\r\n        />\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Mensaje informativo -->\r\n    <p class=\"info-message\">\r\n      Nota: Para incluir movimientos del día actual, seleccione un día adicional como fecha final.\r\n    </p>\r\n\r\n    <!-- Tabla de resumen -->\r\n    <section v-if=\"kardex.length\" class=\"summary form-section\">\r\n      <h2>Resumen por Almacén</h2>\r\n      <div class=\"cpp-global\">\r\n        <span>CPP GLOBAL</span>\r\n        <span>{{ cppGlobal ? `$${formatCosto(cppGlobal)}` : 'N/A' }}</span>\r\n      </div>\r\n      <div class=\"table-container\">\r\n        <table class=\"resumen-costos\">\r\n          <thead>\r\n            <tr>\r\n              <th>ALMACÉN</th>\r\n              <th>STOCK FINAL</th>\r\n              <th>VALOR ACUMULADO</th>\r\n              <th>CPP</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(resumen, index) in resumenPorAlmacen\" :key=\"index\">\r\n              <td>{{ resumen.almacen }}</td>\r\n              <td>{{ formatCosto(resumen.stockFinal) }}</td>\r\n              <td>{{ resumen.valorAcumulado !== null && resumen.valorAcumulado !== undefined ? `$${formatCosto(resumen.valorAcumulado)}` : '$0.00' }}</td>\r\n              <td>{{ resumen.cpp !== null && resumen.cpp !== undefined && resumen.stockFinal > 0 ? `$${formatCosto(resumen.cpp)}` : 'N/A' }}</td>\r\n            </tr>\r\n            <tr class=\"total-row\">\r\n              <td><strong>TOTAL</strong></td>\r\n              <td><strong>{{ formatCosto(totalStock) }}</strong></td>\r\n              <td><strong>{{ totalValor ? `$${formatCosto(totalValor)}` : 'N/A' }}</strong></td>\r\n              <td></td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Filtro por almacén -->\r\n    <section v-if=\"kardex.length\" class=\"filters-bodega form-section\">\r\n      <h3>Filtrar por Almacén</h3>\r\n      <div class=\"bodega-checkboxes\">\r\n        <label class=\"checkbox-container\">\r\n          <input\r\n            type=\"checkbox\"\r\n            value=\"\"\r\n            v-model=\"bodegasSeleccionadas\"\r\n            @change=\"filtrarPorBodega\"\r\n          />\r\n          <span>Todos</span>\r\n        </label>\r\n        <label v-for=\"bodega in bodegas\" :key=\"bodega.id\" class=\"checkbox-container\">\r\n          <input\r\n            type=\"checkbox\"\r\n            :value=\"bodega.nombre\"\r\n            v-model=\"bodegasSeleccionadas\"\r\n            @change=\"filtrarPorBodega\"\r\n          />\r\n          <span>{{ bodega.nombre }}</span>\r\n        </label>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Tabla de resultados -->\r\n    <section v-if=\"kardexFiltrado.length\" class=\"results form-section\">\r\n      <h2>Movimientos del Producto</h2>\r\n      <div class=\"form-actions\">\r\n        <button @click=\"imprimirKardexPDF\" class=\"btn btn-success\" title=\"Imprimir PDF\">\r\n          <font-awesome-icon icon=\"file-pdf\" class=\"pdf-icon\" />\r\n        </button>\r\n        <button @click=\"exportarKardexCSV\" class=\"btn btn-info\" title=\"Exportar CSV\">\r\n          <font-awesome-icon icon=\"file-csv\" class=\"csv-icon\" />\r\n        </button>\r\n        <button @click=\"exportarKardexExcel\" class=\"btn btn-primary\" title=\"Exportar Excel\">\r\n          <font-awesome-icon icon=\"file-excel\" class=\"excel-icon\" />\r\n        </button>\r\n      </div>\r\n      <div class=\"table-container\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Fecha</th>\r\n              <th>Documento</th>\r\n              <th>Almacén</th>\r\n              <th>Cant.</th>\r\n              <th>Costo</th>\r\n              <th>Costo Total</th>\r\n              <th>Cantidad Acumulada</th>\r\n              <th>Valor Acumulado</th>\r\n              <th>CPP</th>\r\n              <th>CPP Global</th>\r\n              <th>Descripción</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"(registro, index) in kardexFiltrado\" :key=\"index\">\r\n              <td>{{ registro.fecha }}</td>\r\n              <td>{{ registro.tipo }}</td>\r\n              <td>{{ registro.bodega || 'N/A' }}</td>\r\n              <td>{{ registro.tipo === 'SALIDA' ? `-${registro.cantidad}` : registro.cantidad }}</td>\r\n              <td>{{ registro.costo_unitario ? `$${formatCosto(registro.costo_unitario)}` : 'N/A' }}</td>\r\n              <td>{{ registro.tipo === 'SALIDA' ? `-$${formatCosto(registro.costo_total)}` : `$${formatCosto(registro.costo_total)}` }}</td>\r\n              <td>{{ registro.saldo }}</td>\r\n              <td>{{ registro.saldo_costo_total !== null && registro.saldo_costo_total !== undefined ? `$${formatCosto(registro.saldo_costo_total)}` : '$0.00' }}</td>\r\n              <td>{{ registro.saldo_costo_unitario !== null && registro.saldo_costo_unitario !== undefined && registro.saldo > 0 ? `$${formatCosto(registro.saldo_costo_unitario)}` : 'N/A' }}</td>\r\n              <td>{{ registro.saldo_costo_unitario_global ? `$${formatCosto(registro.saldo_costo_unitario_global)}` : 'N/A' }}</td>\r\n              <td>{{ registro.descripcion }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Sin resultados -->\r\n    <section v-else-if=\"mostrarMensajeSinDatos\" class=\"form-section\">\r\n      <p>No hay datos para mostrar. Realice una consulta o ajuste el filtro por almacén.</p>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiClient from '@/api/axios';\r\nimport * as XLSX from 'xlsx';\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome';\r\n\r\nexport default {\r\n  name: 'KardexView',\r\n  components: { FontAwesomeIcon },\r\n  data() {\r\n    return {\r\n      productos: [],\r\n      bodegas: [],\r\n      codigoProducto: '',\r\n      nombreProducto: '',\r\n      fechaInicio: '',\r\n      fechaFin: '',\r\n      kardex: [],\r\n      kardexFiltrado: [],\r\n      bodegasSeleccionadas: [],\r\n      resumenPorAlmacen: [],\r\n      cppGlobal: null,\r\n      totalStock: 0,\r\n      totalValor: 0,\r\n      mostrarMensajeSinDatos: false,\r\n    };\r\n  },\r\n  methods: {\r\n    limpiarPagina() {\r\n      this.codigoProducto = '';\r\n      this.nombreProducto = '';\r\n      this.fechaInicio = '';\r\n      this.fechaFin = '';\r\n      this.kardex = [];\r\n      this.kardexFiltrado = [];\r\n      this.bodegasSeleccionadas = [];\r\n      this.resumenPorAlmacen = [];\r\n      this.cppGlobal = null;\r\n      this.totalStock = 0;\r\n      this.totalValor = 0;\r\n      this.mostrarMensajeSinDatos = false;\r\n    },\r\n    async cargarProductos() {\r\n      try {\r\n        const response = await apiClient.get('/api/productos/completos');\r\n        this.productos = response.data.sort((a, b) => a.codigo.localeCompare(b.codigo));\r\n      } catch (error) {\r\n        const errorMsg = error.response?.data?.error || error.message;\r\n        alert(`Error al cargar productos: ${errorMsg}`);\r\n      }\r\n    },\r\n    async cargarBodegas() {\r\n      try {\r\n        const response = await apiClient.get('/inventory/bodegas');\r\n        this.bodegas = response.data;\r\n      } catch (error) {\r\n        const errorMsg = error.response?.data?.error || error.message;\r\n        alert(`Error al cargar almacenes: ${errorMsg}`);\r\n      }\r\n    },\r\n    async consultarKardex() {\r\n      if (!this.codigoProducto || !this.fechaInicio || !this.fechaFin) {\r\n        alert('Debe seleccionar un producto y definir un rango de fechas.');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const params = {\r\n          codigo: this.codigoProducto,\r\n          fecha_inicio: this.fechaInicio,\r\n          fecha_fin: this.fechaFin,\r\n        };\r\n        if (this.bodegasSeleccionadas.length > 0 && !this.bodegasSeleccionadas.includes('')) {\r\n          params.bodegas = this.bodegasSeleccionadas.join(',');\r\n        }\r\n\r\n        const response = await apiClient.get('/inventory/kardex', { params });\r\n        console.log('Datos del kardex:', JSON.stringify(response.data, null, 2)); // Log detallado\r\n        const data = response.data;\r\n\r\n        if (data.message) {\r\n          alert(data.message);\r\n          this.kardex = [];\r\n          this.kardexFiltrado = [];\r\n          this.mostrarMensajeSinDatos = true;\r\n          return;\r\n        }\r\n\r\n        this.kardex = data.kardex || [];\r\n        this.kardexFiltrado = [...this.kardex];\r\n        this.calcularResumen();\r\n        this.mostrarMensajeSinDatos = this.kardex.length === 0;\r\n      } catch (error) {\r\n        const errorMsg = error.response?.data?.error || error.response?.data?.message || error.message;\r\n        alert(`Error al consultar el kardex: ${errorMsg}`);\r\n        this.kardex = [];\r\n        this.kardexFiltrado = [];\r\n        this.mostrarMensajeSinDatos = true;\r\n      }\r\n    },\r\n    calcularResumen() {\r\n      const almacenes = [...new Set(this.kardex.map((mov) => mov.bodega))].filter((b) => b);\r\n      this.resumenPorAlmacen = almacenes\r\n        .map((almacen) => {\r\n          const movimientosAlmacen = this.kardex.filter((mov) => mov.bodega === almacen);\r\n          // Calcular stock final y valor acumulado\r\n          const stockFinal = movimientosAlmacen.reduce((sum, mov) => {\r\n            if (mov.tipo === 'ENTRADA') {\r\n              return sum + mov.cantidad;\r\n            } else if (mov.tipo === 'SALIDA') {\r\n              return sum - mov.cantidad;\r\n            }\r\n            return sum; // Ignorar otros tipos (por ejemplo, SALDO INICIAL)\r\n          }, 0);\r\n          const valorAcumulado = movimientosAlmacen.reduce((sum, mov) => {\r\n            if (mov.tipo === 'ENTRADA') {\r\n              return sum + (mov.costo_total || 0);\r\n            } else if (mov.tipo === 'SALIDA') {\r\n              return sum - (mov.costo_total || 0);\r\n            }\r\n            return sum;\r\n          }, 0);\r\n          // Calcular CPP (promedio de costo unitario de entradas)\r\n          const entradas = movimientosAlmacen.filter((mov) => mov.tipo === 'ENTRADA');\r\n          const cpp =\r\n            entradas.length > 0\r\n              ? entradas.reduce((sum, mov) => sum + (mov.costo_unitario || 0), 0) / entradas.length\r\n              : 0;\r\n          return {\r\n            almacen,\r\n            stockFinal: parseFloat(stockFinal.toFixed(2)), // Redondear a 2 decimales\r\n            valorAcumulado: valorAcumulado || 0,\r\n            cpp: stockFinal > 0 ? cpp : 0, // CPP es 0 si no hay stock\r\n          };\r\n        })\r\n        .sort((a, b) => a.almacen.localeCompare(b.almacen));\r\n\r\n      this.totalStock = parseFloat(\r\n        this.resumenPorAlmacen.reduce((sum, r) => sum + r.stockFinal, 0).toFixed(2)\r\n      );\r\n      this.totalValor = this.resumenPorAlmacen.reduce((sum, r) => sum + (r.valorAcumulado || 0), 0);\r\n      this.cppGlobal = this.totalStock > 0 ? this.totalValor / this.totalStock : 0;\r\n    },\r\n    filtrarPorBodega() {\r\n      if (this.bodegasSeleccionadas.includes('')) {\r\n        this.kardexFiltrado = [...this.kardex];\r\n      } else if (this.bodegasSeleccionadas.length === 0) {\r\n        this.kardexFiltrado = [...this.kardex];\r\n      } else {\r\n        this.kardexFiltrado = this.kardex.filter((mov) =>\r\n          this.bodegasSeleccionadas.includes(mov.bodega)\r\n        );\r\n      }\r\n      this.mostrarMensajeSinDatos = this.kardexFiltrado.length === 0 && this.kardex.length > 0;\r\n    },\r\n    async imprimirKardexPDF() {\r\n      if (!this.codigoProducto || !this.fechaInicio || !this.fechaFin) {\r\n        alert('Debe realizar una consulta antes de generar el PDF.');\r\n        return;\r\n      }\r\n      try {\r\n        const params = {\r\n          codigo: this.codigoProducto,\r\n          fecha_inicio: this.fechaInicio,\r\n          fecha_fin: this.fechaFin,\r\n        };\r\n        if (this.bodegasSeleccionadas.length > 0 && !this.bodegasSeleccionadas.includes('')) {\r\n          params.bodegas = this.bodegasSeleccionadas.join(',');\r\n        }\r\n        const response = await apiClient.get('/api/kardex/pdf', {\r\n          params,\r\n          responseType: 'blob',\r\n        });\r\n        const url = window.URL.createObjectURL(new Blob([response.data]));\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.setAttribute(\r\n          'download',\r\n          `kardex_${this.codigoProducto}${this.bodegasSeleccionadas.length ? '_' + this.bodegasSeleccionadas.join('_') : ''}.pdf`\r\n        );\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      } catch (error) {\r\n        const errorMsg = error.response?.data?.error || error.message;\r\n        alert(`Error al generar el PDF del Kardex: ${errorMsg}`);\r\n      }\r\n    },\r\n    exportarKardexCSV() {\r\n      if (!this.kardexFiltrado.length) {\r\n        alert('No hay datos filtrados para exportar a CSV.');\r\n        return;\r\n      }\r\n      const productoNombre =\r\n        this.productos.find((p) => p.codigo === this.codigoProducto)?.nombre || 'Desconocido';\r\n      let csvContent =\r\n        'data:text/csv;charset=utf-8,' +\r\n        `Kardex de Inventario\\n` +\r\n        `Producto: ${this.codigoProducto} - ${productoNombre}\\n` +\r\n        `Rango de Fechas: ${this.fechaInicio} a ${this.fechaFin}\\n` +\r\n        `Almacén: ${this.bodegasSeleccionadas.length > 0 && !this.bodegasSeleccionadas.includes('') ? this.bodegasSeleccionadas.join(', ') : 'Todos'}\\n\\n` +\r\n        `Resumen por Almacén\\n` +\r\n        `CPP GLOBAL;${this.cppGlobal ? this.formatCosto(this.cppGlobal) : 'N/A'}\\n\\n` +\r\n        `ALMACÉN;STOCK FINAL;VALOR ACUMULADO;CPP\\n` +\r\n        this.resumenPorAlmacen\r\n          .map(\r\n            (resumen) =>\r\n              `${resumen.almacen};${this.formatCosto(resumen.stockFinal)};${resumen.valorAcumulado ? this.formatCosto(resumen.valorAcumulado) : 'N/A'};${resumen.cpp ? this.formatCosto(resumen.cpp) : 'N/A'}`\r\n          )\r\n          .join('\\n') +\r\n        '\\n' +\r\n        `TOTAL;${this.formatCosto(this.totalStock)};${this.totalValor ? this.formatCosto(this.totalValor) : 'N/A'};\\n\\n` +\r\n        `Movimientos del Producto\\n` +\r\n        `Fecha;Documento;Almacén;Cant.;Costo;Costo Total;Cantidad Acumulada;Valor Acumulado;CPP;CPP Global;Descripción\\n` +\r\n        this.kardexFiltrado\r\n          .map((mov) => [\r\n            mov.fecha,\r\n            mov.tipo,\r\n            mov.bodega || 'N/A',\r\n            mov.tipo === 'SALIDA' ? -mov.cantidad : mov.cantidad,\r\n            mov.costo_unitario ? this.formatCosto(mov.costo_unitario) : 'N/A',\r\n            mov.tipo === 'SALIDA' ? `-${this.formatCosto(mov.costo_total)}` : mov.costo_total ? this.formatCosto(mov.costo_total) : 'N/A',\r\n            this.formatCosto(mov.saldo),\r\n            mov.saldo_costo_total !== undefined && mov.saldo_costo_total !== null\r\n              ? this.formatCosto(mov.saldo_costo_total)\r\n              : 'N/A',\r\n            mov.saldo_costo_unitario ? this.formatCosto(mov.saldo_costo_unitario) : 'N/A',\r\n            mov.saldo_costo_unitario_global ? this.formatCosto(mov.saldo_costo_unitario_global) : 'N/A',\r\n            mov.descripcion.replace(/;/g, ' '),\r\n          ].join(';'))\r\n          .join('\\n');\r\n      const encodedUri = encodeURI(csvContent);\r\n      const link = document.createElement('a');\r\n      link.setAttribute('href', encodedUri);\r\n      link.setAttribute(\r\n        'download',\r\n        `kardex_${this.codigoProducto}${this.bodegasSeleccionadas.length ? '_' + this.bodegasSeleccionadas.join('_') : ''}.csv`\r\n      );\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    },\r\n    exportarKardexExcel() {\r\n      if (!this.kardexFiltrado.length) {\r\n        alert('No hay datos filtrados para exportar a Excel.');\r\n        return;\r\n      }\r\n      const productoNombre =\r\n        this.productos.find((p) => p.codigo === this.codigoProducto)?.nombre || 'Desconocido';\r\n      const worksheetData = [\r\n        ['Kardex de Inventario'],\r\n        [`Producto: ${this.codigoProducto} - ${productoNombre}`],\r\n        [`Rango de Fechas: ${this.fechaInicio} a ${this.fechaFin}`],\r\n        [\r\n          `Almacén: ${\r\n            this.bodegasSeleccionadas.length > 0 && !this.bodegasSeleccionadas.includes('')\r\n              ? this.bodegasSeleccionadas.join(', ')\r\n              : 'Todos'\r\n          }`,\r\n        ],\r\n        [],\r\n        ['Resumen por Almacén'],\r\n        ['CPP GLOBAL', this.cppGlobal ? this.formatCosto(this.cppGlobal) : 'N/A'],\r\n        [],\r\n        ['ALMACÉN', 'STOCK FINAL', 'VALOR ACUMULADO', 'CPP'],\r\n        ...this.resumenPorAlmacen.map((resumen) => [\r\n          resumen.almacen,\r\n          this.formatCosto(resumen.stockFinal),\r\n          resumen.valorAcumulado ? this.formatCosto(resumen.valorAcumulado) : 'N/A',\r\n          resumen.cpp ? this.formatCosto(resumen.cpp) : 'N/A',\r\n        ]),\r\n        ['TOTAL', this.formatCosto(this.totalStock), this.totalValor ? this.formatCosto(this.totalValor) : 'N/A', ''],\r\n        [],\r\n        ['Movimientos del Producto'],\r\n        [\r\n          'Fecha',\r\n          'Documento',\r\n          'Almacén',\r\n          'Cant.',\r\n          'Costo',\r\n          'Costo Total',\r\n          'Cant. Acumulada',\r\n          'Valor Acumulado',\r\n          'CPP',\r\n          'CPP Global',\r\n          'Descripción',\r\n        ],\r\n        ...this.kardexFiltrado.map((mov) => [\r\n          mov.fecha,\r\n          mov.tipo,\r\n          mov.bodega || 'N/A',\r\n          mov.tipo === 'SALIDA' ? -mov.cantidad : mov.cantidad,\r\n          mov.costo_unitario ? this.formatCosto(mov.costo_unitario) : 'N/A',\r\n          mov.tipo === 'SALIDA' ? `-${this.formatCosto(mov.costo_total)}` : mov.costo_total ? this.formatCosto(mov.costo_total) : 'N/A',\r\n          this.formatCosto(mov.saldo),\r\n          mov.saldo_costo_total !== undefined && mov.saldo_costo_total !== null\r\n            ? this.formatCosto(mov.saldo_costo_total)\r\n            : 'N/A',\r\n          mov.saldo_costo_unitario ? this.formatCosto(mov.saldo_costo_unitario) : 'N/A',\r\n          mov.saldo_costo_unitario_global ? this.formatCosto(mov.saldo_costo_unitario_global) : 'N/A',\r\n          mov.descripcion,\r\n        ]),\r\n      ];\r\n      const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\r\n      const workbook = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Kardex');\r\n      XLSX.writeFile(\r\n        workbook,\r\n        `kardex_${this.codigoProducto}${this.bodegasSeleccionadas.length ? '_' + this.bodegasSeleccionadas.join('_') : ''}.xlsx`\r\n      );\r\n    },\r\n    sincronizarPorNombre() {\r\n      if (!this.nombreProducto) {\r\n        this.codigoProducto = '';\r\n        return;\r\n      }\r\n      const productoEncontrado = this.productos.find((p) =>\r\n        p.nombre.toLowerCase().includes(this.nombreProducto.toLowerCase())\r\n      );\r\n      if (productoEncontrado) {\r\n        this.codigoProducto = productoEncontrado.codigo;\r\n      }\r\n    },\r\n    sincronizarCodigoConSelector() {\r\n      if (!this.codigoProducto) {\r\n        this.nombreProducto = '';\r\n        return;\r\n      }\r\n      const productoEncontrado = this.productos.find((p) => p.codigo === this.codigoProducto);\r\n      if (productoEncontrado) {\r\n        this.nombreProducto = productoEncontrado.nombre;\r\n      }\r\n    },\r\n    sincronizarSelectorConCodigo() {\r\n      const productoEncontrado = this.productos.find((p) => p.codigo === this.codigoProducto);\r\n      if (productoEncontrado) {\r\n        this.nombreProducto = productoEncontrado.nombre;\r\n      } else {\r\n        this.nombreProducto = '';\r\n      }\r\n    },\r\n    volverAlMenu() {\r\n      this.$router.push('/inventory');\r\n    },\r\n    formatCosto(costo) {\r\n      return Number(costo).toLocaleString('es-CO', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.cargarProductos();\r\n    this.cargarBodegas();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.kardex-view {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh1 {\r\n  font-size: 2rem;\r\n  color: #2c3e50;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nh2 {\r\n  font-size: 1.5rem;\r\n  color: #34495e;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nh3 {\r\n  font-size: 1.2rem;\r\n  color: #34495e;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn:hover {\r\n  background-color: #2c3e50;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.btn-warning {\r\n  background-color: #ffc107;\r\n  color: #333;\r\n}\r\n\r\n.btn-warning:hover {\r\n  background-color: #e0a800;\r\n}\r\n\r\n.btn-success {\r\n  background-color: #28a745;\r\n}\r\n\r\n.btn-success:hover {\r\n  background-color: #218838;\r\n}\r\n\r\n.btn-info {\r\n  background-color: #17a2b8;\r\n}\r\n\r\n.btn-info:hover {\r\n  background-color: #138496;\r\n}\r\n\r\n.form-section {\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  color: #555;\r\n}\r\n\r\n.form-group input,\r\n.form-group select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filters-header {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  align-items: flex-end;\r\n}\r\n\r\n.info-message {\r\n  margin: 10px 0;\r\n  font-style: italic;\r\n  color: #555;\r\n  text-align: center;\r\n}\r\n\r\n.table-container {\r\n  max-width: 100%;\r\n  overflow-x: auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\n\r\nth,\r\ntd {\r\n  border: 1px solid #ddd;\r\n  padding: 10px;\r\n  text-align: left;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n  font-weight: bold;\r\n  color: #34495e;\r\n}\r\n\r\ntbody tr:nth-child(odd) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ntbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.resumen-costos {\r\n  width: 60%;\r\n  margin: 0 auto;\r\n}\r\n\r\n.resumen-costos th,\r\n.resumen-costos td {\r\n  padding: 12px;\r\n  text-align: center;\r\n}\r\n\r\n.total-row {\r\n  font-weight: bold;\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.cpp-global {\r\n  margin-bottom: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 200px;\r\n}\r\n\r\n.filters-bodega {\r\n  padding: 15px;\r\n}\r\n\r\n.bodega-checkboxes {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  padding: 10px 0;\r\n}\r\n\r\n.checkbox-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n}\r\n\r\n.checkbox-container input[type='checkbox'] {\r\n  margin: 0;\r\n  accent-color: #42b983;\r\n}\r\n\r\n.checkbox-container span {\r\n  font-size: 14px;\r\n  color: #333;\r\n}\r\n\r\n.checkbox-container:hover span {\r\n  color: #42b983;\r\n}\r\n\r\n.excel-icon,\r\n.pdf-icon,\r\n.csv-icon {\r\n  margin-left: 5px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .filters-header {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .form-group input,\r\n  .form-group select {\r\n    font-size: 16px;\r\n  }\r\n\r\n  table {\r\n    display: block;\r\n    overflow-x: auto;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .resumen-costos {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>","import { render } from \"./Kardex.vue?vue&type=template&id=070e2c8a&scoped=true\"\nimport script from \"./Kardex.vue?vue&type=script&lang=js\"\nexport * from \"./Kardex.vue?vue&type=script&lang=js\"\n\nimport \"./Kardex.vue?vue&type=style&index=0&id=070e2c8a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-070e2c8a\"]])\n\nexport default __exports__"],"names":["class","style","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$options","limpiarPagina","_hoisted_3","_hoisted_4","_hoisted_5","for","type","id","$event","$data","fechaInicio","_hoisted_6","fechaFin","_hoisted_7","consultarKardex","_hoisted_8","nombreProducto","placeholder","onInput","sincronizarPorNombre","_hoisted_9","codigoProducto","onChange","sincronizarSelectorConCodigo","value","disabled","_Fragment","_renderList","productos","producto","codigo","_toDisplayString","nombre","_hoisted_10","_hoisted_11","sincronizarCodigoConSelector","kardex","length","_hoisted_12","_hoisted_13","cppGlobal","formatCosto","_hoisted_14","_hoisted_15","resumenPorAlmacen","resumen","index","almacen","stockFinal","valorAcumulado","undefined","cpp","_hoisted_16","totalStock","totalValor","_createCommentVNode","_hoisted_17","_hoisted_18","_hoisted_19","bodegasSeleccionadas","filtrarPorBodega","bodegas","bodega","_hoisted_20","kardexFiltrado","_hoisted_21","_hoisted_22","imprimirKardexPDF","title","_createVNode","_component_font_awesome_icon","icon","exportarKardexCSV","exportarKardexExcel","_hoisted_23","registro","fecha","tipo","cantidad","costo_unitario","costo_total","saldo","saldo_costo_total","saldo_costo_unitario","saldo_costo_unitario_global","descripcion","mostrarMensajeSinDatos","_hoisted_24","name","components","FontAwesomeIcon","data","methods","this","cargarProductos","response","apiClient","get","sort","a","b","localeCompare","error","errorMsg","message","alert","cargarBodegas","params","fecha_inicio","fecha_fin","includes","join","console","log","JSON","stringify","calcularResumen","almacenes","Set","map","mov","filter","movimientosAlmacen","reduce","sum","entradas","parseFloat","toFixed","r","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","productoNombre","find","p","csvContent","replace","encodedUri","encodeURI","worksheetData","worksheet","XLSX","aoa_to_sheet","workbook","book_new","book_append_sheet","productoEncontrado","toLowerCase","volverAlMenu","$router","push","costo","Number","toLocaleString","minimumFractionDigits","maximumFractionDigits","mounted","__exports__","render"],"sourceRoot":""}