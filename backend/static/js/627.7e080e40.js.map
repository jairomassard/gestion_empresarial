{"version":3,"file":"js/627.7e080e40.js","mappings":"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","sources":["webpack://frontend/./src/views/CargarComprasProducto.vue","webpack://frontend/./src/views/CargarComprasProducto.vue?ad27"],"sourcesContent":["<template>\r\n    <div class=\"cargar-compras\">\r\n      <h1>Compra de Productos</h1>\r\n  \r\n      <section class=\"menu-buttons\">\r\n        <!--<button @click=\"volverAlMenu\" class=\"btn btn-secondary\">Volver al Menú</button>-->\r\n        <button @click=\"limpiarPagina\" class=\"btn btn-warning\">Limpiar Página</button>\r\n      </section>\r\n  \r\n      <!-- Subida de Archivo CSV -->\r\n      <section class=\"form-section\">\r\n        <h2>Subir Archivo</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"inputCsv\">Archivo CSV:</label>\r\n          <input id=\"inputCsv\" type=\"file\" @change=\"cargarCsv\" ref=\"inputCsv\" />\r\n        </div>\r\n        <button @click=\"procesarCsv\">Cargar Compras de Productos</button>\r\n      </section>\r\n  \r\n      <!-- Descarga de Plantilla -->\r\n      <section class=\"form-section\">\r\n        <h2>Descargar Plantilla</h2>\r\n        <button @click=\"descargarPlantilla\">Descargar</button>\r\n      </section>\r\n  \r\n      <!-- Consulta de Facturas -->\r\n      <section class=\"consulta-facturas form-section\">\r\n        <h2>Consulta de Facturas de Compra</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"filtroFactura\">Número de Factura:</label>\r\n          <input v-model=\"filtroFactura\" id=\"filtroFactura\" placeholder=\"Ingrese número de factura\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaInicio\">Fecha Inicio:</label>\r\n          <input type=\"date\" v-model=\"fechaInicio\" id=\"fechaInicio\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaFin\">Fecha Fin:</label>\r\n          <input type=\"date\" v-model=\"fechaFin\" id=\"fechaFin\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"selectorFactura\">Seleccionar Factura:</label>\r\n          <select v-model=\"filtroFactura\" id=\"selectorFactura\">\r\n            <option value=\"\" disabled>Seleccione una factura</option>\r\n            <option v-for=\"factura in facturas\" :key=\"factura\" :value=\"factura\">{{ factura }}</option>\r\n          </select>\r\n        </div>\r\n        <button @click=\"consultarFacturas\">Consultar Facturas</button>\r\n      </section>\r\n  \r\n      <!-- Resultados de la Consulta -->\r\n      <section v-if=\"resultadosFacturas.length\" class=\"resultados-facturas form-section\">\r\n        <h3>Resultados de la Consulta</h3>\r\n        <div class=\"form-actions\">\r\n          <button @click=\"exportarListadoExcel\">Exportar Listado <font-awesome-icon icon=\"file-excel\" class=\"excel-icon\" /></button>\r\n        </div>\r\n        <div class=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Número de Factura</th>\r\n                <th>Fecha y Hora</th>\r\n                <th>Acción</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"factura in resultadosFacturas\" :key=\"factura.factura\">\r\n                <td>{{ factura.factura }}</td>\r\n                <td>{{ factura.fecha }}</td>\r\n                <td>\r\n                  <button @click=\"verDetalleFactura(factura.factura)\" class=\"btn btn-info\">Detalle</button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n  \r\n      <!-- Detalle de la Factura -->\r\n      <section v-if=\"detalleFactura.length\" class=\"detalle-factura form-section\">\r\n        <h3>Detalle de la Factura de Compra {{ facturaSeleccionada }}</h3>\r\n        <div class=\"form-actions\">\r\n          <button @click=\"exportarDetalleExcel\">Exportar <font-awesome-icon icon=\"file-excel\" class=\"excel-icon\" /></button>\r\n        </div>\r\n        <div class=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Código</th>\r\n                <th>Nombre</th>\r\n                <th>Cantidad</th>\r\n                <th>Bodega</th>\r\n                <th>Costo Unitario</th>\r\n                <th>Costo Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in detalleFactura\" :key=\"item.id\">\r\n                <td>{{ item.codigo }}</td>\r\n                <td>{{ item.nombre }}</td>\r\n                <td>{{ item.cantidad }}</td>\r\n                <td>{{ item.bodega }}</td>\r\n                <td>{{ item.costo_unitario ? `$${item.costo_unitario.toFixed(2)}` : 'N/A' }}</td>\r\n                <td>{{ item.costo_total ? `$${item.costo_total.toFixed(2)}` : 'N/A' }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n  \r\n      <!-- Mostrar errores -->\r\n      <section v-if=\"errores.length\" class=\"form-section\">\r\n        <h2>Errores Detectados:</h2>\r\n        <ul>\r\n          <li v-for=\"(error, index) in errores\" :key=\"index\">{{ error }}</li>\r\n        </ul>\r\n      </section>\r\n    </div>\r\n  </template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport axios from '@/api/axios';\r\nimport * as XLSX from 'xlsx';\r\n\r\nexport default {\r\n  name: 'CargarComprasProducto',\r\n  setup() {\r\n    const router = useRouter();\r\n\r\n    const archivoCsv = ref(null);\r\n    const inputCsv = ref(null);\r\n    const errores = ref([]);\r\n    const filtroFactura = ref('');\r\n    const fechaInicio = ref('');\r\n    const fechaFin = ref('');\r\n    const facturas = ref([]);\r\n    const resultadosFacturas = ref([]);\r\n    const detalleFactura = ref([]);\r\n    const facturaSeleccionada = ref('');\r\n\r\n    const cargarCsv = (event) => {\r\n      archivoCsv.value = event.target.files[0];\r\n    };\r\n\r\n    const procesarCsv = async () => {\r\n      if (!archivoCsv.value) {\r\n        alert('Seleccione un archivo para cargar');\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', archivoCsv.value);\r\n\r\n      try {\r\n        const response = await axios.post('/inventory/cargar-compras', formData);\r\n        alert(response.data.message);\r\n        errores.value = [];\r\n        cargarFacturas();\r\n        limpiarSesionCsv();\r\n      } catch (error) {\r\n        console.error('Error al cargar compras:', error);\r\n        if (error.response?.data?.errors) {\r\n          errores.value = error.response.data.errors;\r\n        } else {\r\n          alert('Ocurrió un error al cargar las compras.');\r\n        }\r\n      }\r\n    };\r\n\r\n    const descargarPlantilla = () => {\r\n      const csvData = [\r\n        ['factura', 'codigo', 'nombre', 'cantidad', 'bodega', 'contenedor', 'fecha_ingreso', 'costo_unitario'],\r\n        ['FAC001', 'GRA05299901000000', 'R5 BULK PASTEL YELLOW', '100', 'Bodega1', 'CONT001', '2024-12-01 10:00:00', '50.00'],\r\n        ['ABC123', 'GRA05299909000000', 'R5 BULK PASTEL LIGTH PINK', '150', 'Bodega2', 'CONT002', '2024-12-01 10:30:00', '45.00'],\r\n      ];\r\n      const csvContent = csvData.map(e => e.join(',')).join('\\n');\r\n      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n      const link = document.createElement('a');\r\n      link.href = URL.createObjectURL(blob);\r\n      link.setAttribute('download', 'plantilla_cargue_compras.csv');\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    };\r\n\r\n    const volverAlMenu = () => {\r\n      router.push('/inventory');\r\n    };\r\n\r\n    const limpiarSesionCsv = () => {\r\n      archivoCsv.value = null;\r\n      if (inputCsv.value) inputCsv.value.value = '';\r\n    };\r\n\r\n    const limpiarPagina = () => {\r\n      limpiarSesionCsv();\r\n      errores.value = [];\r\n      filtroFactura.value = '';\r\n      fechaInicio.value = '';\r\n      fechaFin.value = '';\r\n      resultadosFacturas.value = [];\r\n      detalleFactura.value = [];\r\n      facturaSeleccionada.value = '';\r\n    };\r\n\r\n    const cargarFacturas = async () => {\r\n      try {\r\n        const response = await axios.get('/inventory/facturas');\r\n        facturas.value = response.data.facturas;\r\n      } catch (error) {\r\n        console.error('Error al cargar facturas:', error);\r\n        alert('Ocurrió un error al cargar las facturas.');\r\n      }\r\n    };\r\n\r\n    const consultarFacturas = async () => {\r\n      try {\r\n        const params = {\r\n          factura: filtroFactura.value || undefined,\r\n          fecha_inicio: fechaInicio.value || undefined,\r\n          fecha_fin: fechaFin.value || undefined,\r\n        };\r\n        const response = await axios.get('/inventory/consultar-facturas', { params });\r\n        resultadosFacturas.value = response.data;\r\n        detalleFactura.value = [];\r\n      } catch (error) {\r\n        console.error('Error al consultar facturas:', error);\r\n        alert('Ocurrió un error al consultar las facturas.');\r\n      }\r\n    };\r\n\r\n    const verDetalleFactura = async (factura) => {\r\n      try {\r\n        facturaSeleccionada.value = factura;\r\n        const response = await axios.get('/inventory/detalle-factura', {\r\n          params: { factura }\r\n        });\r\n        detalleFactura.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error al obtener detalle de factura:', error);\r\n        alert('No se pudo recuperar el detalle de la factura.');\r\n      }\r\n    };\r\n\r\n    const exportarListadoExcel = () => {\r\n      if (!resultadosFacturas.value.length) {\r\n        alert('No hay datos para exportar a Excel.');\r\n        return;\r\n      }\r\n\r\n      const worksheetData = [\r\n        ['Resultado de consulta de Facturas de Compras Cargadas'],\r\n        [`Número de Factura: ${filtroFactura.value || 'Todos'}`],\r\n        [`Fecha Inicio: ${fechaInicio.value || 'No especificada'}`],\r\n        [`Fecha Fin: ${fechaFin.value || 'No especificada'}`],\r\n        [],\r\n        ['Número de Factura', 'Fecha y Hora'],\r\n        ...resultadosFacturas.value.map(factura => [factura.factura, factura.fecha])\r\n      ];\r\n\r\n      const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\r\n      const workbook = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Facturas');\r\n      XLSX.writeFile(workbook, `facturas_compras_${new Date().toISOString().slice(0, 10)}.xlsx`);\r\n    };\r\n\r\n    const exportarDetalleExcel = () => {\r\n      if (!detalleFactura.value.length) {\r\n        alert('No hay datos para exportar a Excel.');\r\n        return;\r\n      }\r\n\r\n      const fechaCargue = resultadosFacturas.value.find(f => f.factura === facturaSeleccionada.value)?.fecha || 'Desconocida';\r\n\r\n      const worksheetData = [\r\n        [`Detalle Factura ${facturaSeleccionada.value}`],\r\n        [`Fecha de Cargue: ${fechaCargue}`],\r\n        [],\r\n        ['Código', 'Nombre', 'Cantidad', 'Bodega', 'Costo Unitario', 'Costo Total'],\r\n        ...detalleFactura.value.map(item => [\r\n          item.codigo,\r\n          item.nombre,\r\n          item.cantidad,\r\n          item.bodega,\r\n          item.costo_unitario || 'N/A',\r\n          item.costo_total || 'N/A'\r\n        ])\r\n      ];\r\n\r\n      const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\r\n      const workbook = XLSX.utils.book_new();\r\n      XLSX.utils.book_append_sheet(workbook, worksheet, 'Detalle Factura');\r\n      XLSX.writeFile(workbook, `detalle_factura_${facturaSeleccionada.value}.xlsx`);\r\n    };\r\n\r\n    onMounted(() => {\r\n      cargarFacturas();\r\n    });\r\n\r\n    return {\r\n      archivoCsv,\r\n      inputCsv,\r\n      errores,\r\n      filtroFactura,\r\n      fechaInicio,\r\n      fechaFin,\r\n      facturas,\r\n      resultadosFacturas,\r\n      detalleFactura,\r\n      facturaSeleccionada,\r\n      cargarCsv,\r\n      procesarCsv,\r\n      descargarPlantilla,\r\n      volverAlMenu,\r\n      limpiarPagina,\r\n      cargarFacturas,\r\n      consultarFacturas,\r\n      verDetalleFactura,\r\n      exportarListadoExcel,\r\n      exportarDetalleExcel\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cargar-compras {\r\n  padding: 20px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\nh1 {\r\n  font-size: 2rem;\r\n  color: #2c3e50;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nh2 {\r\n  font-size: 1.5rem;\r\n  color: #34495e;\r\n  margin-bottom: 15px;\r\n}\r\n\r\nh3 {\r\n  font-size: 1.2rem;\r\n  color: #34495e;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.menu-buttons {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n  justify-content: flex-end;\r\n}\r\n\r\nbutton, .btn {\r\n  padding: 8px 16px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\nbutton:hover, .btn:hover {\r\n  background-color: #2c3e50;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.btn-warning {\r\n  background-color: #ffc107;\r\n  color: #333;\r\n}\r\n\r\n.btn-warning:hover {\r\n  background-color: #e0a800;\r\n}\r\n\r\n.btn-info {\r\n  background-color: #17a2b8;\r\n}\r\n\r\n.btn-info:hover {\r\n  background-color: #138496;\r\n}\r\n\r\n.form-section {\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n  padding: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  color: #555;\r\n}\r\n\r\n.form-group input, .form-group select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.table-container {\r\n  max-width: 100%;\r\n  overflow-x: auto;\r\n}\r\n\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  font-size: 14px;\r\n}\r\n\r\nth, td {\r\n  border: 1px solid #ddd;\r\n  padding: 10px;\r\n  text-align: left;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n  font-weight: bold;\r\n  color: #34495e;\r\n}\r\n\r\ntbody tr:nth-child(odd) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ntbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n.excel-icon {\r\n  margin-left: 5px;\r\n}\r\n\r\nul {\r\n  margin-top: 10px;\r\n  padding-left: 20px;\r\n}\r\n\r\nli {\r\n  color: #555;\r\n  font-size: 14px;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .menu-buttons {\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n  }\r\n\r\n  .form-group input, .form-group select {\r\n    font-size: 16px;\r\n  }\r\n\r\n  table {\r\n    display: block;\r\n    overflow-x: auto;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n</style>","import { render } from \"./CargarComprasProducto.vue?vue&type=template&id=0f2eebf9&scoped=true\"\nimport script from \"./CargarComprasProducto.vue?vue&type=script&lang=js\"\nexport * from \"./CargarComprasProducto.vue?vue&type=script&lang=js\"\n\nimport \"./CargarComprasProducto.vue?vue&type=style&index=0&id=0f2eebf9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f2eebf9\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$setup","limpiarPagina","_hoisted_3","_hoisted_4","for","id","type","onChange","cargarCsv","ref","procesarCsv","_hoisted_5","descargarPlantilla","_hoisted_6","_hoisted_7","$event","filtroFactura","placeholder","_hoisted_8","fechaInicio","_hoisted_9","fechaFin","_hoisted_10","value","disabled","_Fragment","_renderList","facturas","factura","_hoisted_11","consultarFacturas","resultadosFacturas","length","_hoisted_12","_hoisted_13","exportarListadoExcel","_createTextVNode","_createVNode","_component_font_awesome_icon","icon","_hoisted_14","_toDisplayString","fecha","verDetalleFactura","_hoisted_15","_createCommentVNode","detalleFactura","_hoisted_16","facturaSeleccionada","_hoisted_17","exportarDetalleExcel","_hoisted_18","item","codigo","nombre","cantidad","bodega","costo_unitario","toFixed","costo_total","errores","_hoisted_19","error","index","name","setup","router","useRouter","archivoCsv","inputCsv","event","target","files","async","alert","formData","FormData","append","response","axios","post","data","message","cargarFacturas","limpiarSesionCsv","console","errors","csvData","csvContent","map","e","join","blob","Blob","link","document","createElement","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","volverAlMenu","push","get","params","undefined","fecha_inicio","fecha_fin","worksheetData","worksheet","XLSX","aoa_to_sheet","workbook","book_new","book_append_sheet","Date","toISOString","slice","fechaCargue","find","f","onMounted","__exports__","render"],"sourceRoot":""}