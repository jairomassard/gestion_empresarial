{"version":3,"file":"js/607.2730535d.js","mappings":"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","sources":["webpack://frontend/./src/views/CargarNotasCredito.vue","webpack://frontend/./src/views/CargarNotasCredito.vue?b400"],"sourcesContent":["<template>\r\n    <div class=\"cargar-notas-credito\">\r\n      <h1>Cargar Notas Crédito</h1>\r\n  \r\n      <section class=\"menu-buttons\">\r\n        <!--<button @click=\"volverAlMenu\" class=\"btn btn-secondary\">Volver al Menú Principal</button> -->\r\n        <button @click=\"limpiarPagina\" class=\"btn btn-warning\">Limpiar Página</button>\r\n      </section>\r\n  \r\n      <!-- Subida de Archivo CSV -->\r\n      <section class=\"form-section\" v-if=\"hasPermission('inventario', 'notas_credito', 'editar')\">\r\n        <h2>Subir Archivo CSV</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"inputCsv\">Archivo CSV:</label>\r\n          <input id=\"inputCsv\" type=\"file\" @change=\"cargarCsv\" ref=\"inputCsv\" />\r\n          <p>El CSV debe incluir: nota_credito, factura, codigo, nombre, cantidad, fecha_devolucion</p>\r\n        </div>\r\n        <button @click=\"procesarCsv\">Cargar Notas Crédito</button>\r\n      </section>\r\n      <section class=\"form-section\" v-else>\r\n        <p>No tienes permiso para cargar notas de crédito.</p>\r\n      </section>\r\n  \r\n      <!-- Mostrar Errores -->\r\n      <section v-if=\"errores.length\" class=\"form-section\">\r\n        <h2>Errores Detectados:</h2>\r\n        <ul>\r\n          <li v-for=\"(error, index) in errores\" :key=\"index\">{{ error }}</li>\r\n        </ul>\r\n      </section>\r\n  \r\n      <!-- Descarga de Plantilla -->\r\n      <section class=\"form-section\">\r\n        <h2>Descargar Plantilla</h2>\r\n        <button @click=\"descargarPlantilla\">Descargar</button>\r\n      </section>\r\n  \r\n      <!-- Consulta de Notas Crédito -->\r\n      <section class=\"consulta-notas-credito form-section\">\r\n        <h2>Consulta de Notas Crédito</h2>\r\n        <div class=\"form-group\">\r\n          <label for=\"filtroNotaCredito\">Número de Nota Crédito:</label>\r\n          <input\r\n            v-model=\"filtroNotaCredito\"\r\n            id=\"filtroNotaCredito\"\r\n            placeholder=\"Ingrese número de nota crédito\"\r\n          />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaInicio\">Fecha Inicio:</label>\r\n          <input type=\"date\" v-model=\"fechaInicio\" id=\"fechaInicio\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"fechaFin\">Fecha Fin:</label>\r\n          <input type=\"date\" v-model=\"fechaFin\" id=\"fechaFin\" />\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"selectorNotaCredito\">Seleccionar Nota Crédito:</label>\r\n          <select v-model=\"filtroNotaCredito\" id=\"selectorNotaCredito\">\r\n            <option value=\"\" disabled>Seleccione una nota crédito</option>\r\n            <option v-for=\"nota in notasCredito\" :key=\"nota\" :value=\"nota\">{{ nota }}</option>\r\n          </select>\r\n        </div>\r\n        <button @click=\"consultarNotasCredito\">Consultar Notas Crédito</button>\r\n      </section>\r\n  \r\n      <!-- Resultados de la Consulta -->\r\n      <section v-if=\"resultadosNotasCredito.length\" class=\"resultados-notas-credito form-section\">\r\n        <h3>Resultados de la Consulta</h3>\r\n        <div class=\"form-actions\">\r\n          <button @click=\"exportarListadoExcel\">\r\n            Exportar Listado <font-awesome-icon icon=\"file-excel\" class=\"excel-icon\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Número de Nota Crédito</th>\r\n                <th>Fecha y Hora</th>\r\n                <th>Acción</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"nota in resultadosNotasCredito\" :key=\"nota.nota_credito\">\r\n                <td>{{ nota.nota_credito }}</td>\r\n                <td>{{ nota.fecha }}</td>\r\n                <td>\r\n                  <button @click=\"verDetalleNotaCredito(nota.nota_credito)\" class=\"btn btn-info\">Detalle</button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n  \r\n      <!-- Detalle de la Nota Crédito -->\r\n      <section v-if=\"detalleNotaCredito.length\" class=\"detalle-nota-credito form-section\">\r\n        <h3>Detalle de la Nota Crédito {{ notaCreditoSeleccionada }}</h3>\r\n        <div class=\"form-actions\">\r\n          <button @click=\"exportarDetalleExcel\">\r\n            Exportar <font-awesome-icon icon=\"file-excel\" class=\"excel-icon\" />\r\n          </button>\r\n        </div>\r\n        <div class=\"table-container\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Código</th>\r\n                <th>Nombre</th>\r\n                <th>Cantidad Devuelta</th>\r\n                <th>Bodega</th>\r\n                <th>Costo Unitario</th>\r\n                <th>Costo Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"item in detalleNotaCredito\" :key=\"item.codigo\">\r\n                <td>{{ item.codigo }}</td>\r\n                <td>{{ item.nombre }}</td>\r\n                <td>{{ item.cantidad }}</td>\r\n                <td>{{ item.bodega }}</td>\r\n                <td>{{ item.costo_unitario ? `$${item.costo_unitario.toFixed(2)}` : 'N/A' }}</td>\r\n                <td>{{ item.costo_total ? `$${item.costo_total.toFixed(2)}` : 'N/A' }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref } from 'vue';\r\n  import { useStore } from 'vuex';\r\n  import { useRouter } from 'vue-router';\r\n  import axios from '@/api/axios';\r\n  import * as XLSX from 'xlsx';\r\n  \r\n  export default {\r\n    name: 'CargarNotasCredito',\r\n    setup() {\r\n      const store = useStore();\r\n      const router = useRouter();\r\n  \r\n      const archivoCsv = ref(null);\r\n      const inputCsv = ref(null);\r\n      const errores = ref([]);\r\n      const filtroNotaCredito = ref('');\r\n      const fechaInicio = ref('');\r\n      const fechaFin = ref('');\r\n      const notasCredito = ref([]);\r\n      const resultadosNotasCredito = ref([]);\r\n      const detalleNotaCredito = ref([]);\r\n      const notaCreditoSeleccionada = ref('');\r\n  \r\n      const cargarCsv = (event) => {\r\n        archivoCsv.value = event.target.files[0];\r\n      };\r\n  \r\n      const procesarCsv = async () => {\r\n        if (!archivoCsv.value) {\r\n          alert('Seleccione un archivo para cargar');\r\n          return;\r\n        }\r\n  \r\n        const formData = new FormData();\r\n        formData.append('file', archivoCsv.value);\r\n  \r\n        try {\r\n          const response = await axios.post('/api/cargar_notas_credito', formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          });\r\n          alert(response.data.message);\r\n          errores.value = [];\r\n          cargarNotasCredito();\r\n          limpiarSesionCsv();\r\n        } catch (error) {\r\n          console.error('Error al cargar notas crédito:', error);\r\n          if (error.response && error.response.data.errors) {\r\n            errores.value = error.response.data.errors;\r\n          } else {\r\n            alert('Ocurrió un error al cargar las notas crédito');\r\n          }\r\n        }\r\n      };\r\n  \r\n      const limpiarSesionCsv = () => {\r\n        archivoCsv.value = null;\r\n        if (inputCsv.value) inputCsv.value.value = '';\r\n      };\r\n  \r\n      const descargarPlantilla = () => {\r\n        const csvData = [\r\n          ['nota_credito', 'factura', 'codigo', 'nombre', 'cantidad', 'fecha_devolucion'],\r\n          ['ABC123', 'FB1234567', 'PROD0051', 'GASEOSA 1.5 LT COCA COLA', '5', '2025-04-12 10:00:00'],\r\n          ['NC001', 'FB1234567', 'PROD0051', 'GASEOSA 1.5 LT COCA COLA', '2', '2025-04-12 17:00:00'],\r\n        ];\r\n        const csvContent = csvData.map((e) => e.join(',')).join('\\n');\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const link = document.createElement('a');\r\n        link.href = URL.createObjectURL(blob);\r\n        link.setAttribute('download', 'plantilla_cargue_notas_credito.csv');\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      };\r\n  \r\n      const volverAlMenu = () => {\r\n        const tipoUsuario = localStorage.getItem('tipo_usuario');\r\n        if (tipoUsuario === 'admin') {\r\n          router.push('/inventory');\r\n        } else if (tipoUsuario === 'gerente') {\r\n          router.push('/inventory');\r\n        } else {\r\n          alert('Rol no reconocido. Contacta al administrador.');\r\n          router.push('/inventory');\r\n        }\r\n      };\r\n  \r\n      const limpiarPagina = () => {\r\n        limpiarSesionCsv();\r\n        errores.value = [];\r\n        filtroNotaCredito.value = '';\r\n        fechaInicio.value = '';\r\n        fechaFin.value = '';\r\n        resultadosNotasCredito.value = [];\r\n        detalleNotaCredito.value = [];\r\n        notaCreditoSeleccionada.value = '';\r\n      };\r\n  \r\n      const cargarNotasCredito = async () => {\r\n        try {\r\n          const response = await axios.get('/api/notas_credito');\r\n          notasCredito.value = response.data.notas_credito;\r\n        } catch (error) {\r\n          console.error('Error al cargar notas crédito:', error);\r\n          alert('No se pudo cargar la lista de notas de crédito.');\r\n        }\r\n      };\r\n  \r\n      const consultarNotasCredito = async () => {\r\n        try {\r\n          const params = {\r\n            nota_credito: filtroNotaCredito.value || undefined,\r\n            fecha_inicio: fechaInicio.value || undefined,\r\n            fecha_fin: fechaFin.value || undefined,\r\n          };\r\n          const response = await axios.get('/api/consultar_notas_credito', { params });\r\n          resultadosNotasCredito.value = response.data;\r\n          detalleNotaCredito.value = [];\r\n        } catch (error) {\r\n          console.error('Error al consultar notas crédito:', error);\r\n          alert('Ocurrió un error al consultar las notas crédito.');\r\n        }\r\n      };\r\n  \r\n      const verDetalleNotaCredito = async (notaCredito) => {\r\n        try {\r\n          notaCreditoSeleccionada.value = notaCredito;\r\n          const response = await axios.get('/api/detalle_nota_credito', {\r\n            params: { nota_credito: notaCredito },\r\n          });\r\n          detalleNotaCredito.value = response.data;\r\n        } catch (error) {\r\n          console.error('Error al obtener detalle de la nota crédito:', error);\r\n          alert('No se pudo recuperar el detalle de la nota crédito.');\r\n        }\r\n      };\r\n  \r\n      const exportarListadoExcel = () => {\r\n        if (!resultadosNotasCredito.value.length) {\r\n          alert('No hay datos para exportar a Excel.');\r\n          return;\r\n        }\r\n  \r\n        const worksheetData = [\r\n          ['Resultado de consulta de Notas Crédito Cargadas'],\r\n          [`Número de Nota Crédito: ${filtroNotaCredito.value || 'Todas'}`],\r\n          [`Fecha Inicio: ${fechaInicio.value || 'No especificada'}`],\r\n          [`Fecha Fin: ${fechaFin.value || 'No especificada'}`],\r\n          [], // Línea en blanco\r\n          ['Número de Nota Crédito', 'Fecha y Hora'],\r\n          ...resultadosNotasCredito.value.map((nota) => [nota.nota_credito, nota.fecha]),\r\n        ];\r\n  \r\n        const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, 'Notas Crédito');\r\n        XLSX.writeFile(workbook, `notas_credito_${new Date().toISOString().slice(0, 10)}.xlsx`);\r\n      };\r\n  \r\n      const exportarDetalleExcel = () => {\r\n        if (!detalleNotaCredito.value.length) {\r\n          alert('No hay datos para exportar a Excel.');\r\n          return;\r\n        }\r\n  \r\n        const fechaCargue =\r\n          resultadosNotasCredito.value.find((n) => n.nota_credito === notaCreditoSeleccionada.value)?.fecha ||\r\n          'Desconocida';\r\n  \r\n        const worksheetData = [\r\n          [`Detalle Nota Crédito ${notaCreditoSeleccionada.value}`],\r\n          [`Fecha de Cargue: ${fechaCargue}`],\r\n          [], // Línea en blanco\r\n          ['Código', 'Nombre', 'Cantidad Devuelta', 'Bodega', 'Costo Unitario', 'Costo Total'],\r\n          ...detalleNotaCredito.value.map((item) => [\r\n            item.codigo,\r\n            item.nombre,\r\n            item.cantidad,\r\n            item.bodega,\r\n            item.costo_unitario ? item.costo_unitario.toFixed(2) : 'N/A',\r\n            item.costo_total ? item.costo_total.toFixed(2) : 'N/A',\r\n          ]),\r\n        ];\r\n  \r\n        const worksheet = XLSX.utils.aoa_to_sheet(worksheetData);\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, 'Detalle Nota Crédito');\r\n        XLSX.writeFile(workbook, `detalle_nota_credito_${notaCreditoSeleccionada.value}.xlsx`);\r\n      };\r\n  \r\n      return {\r\n        archivoCsv,\r\n        inputCsv,\r\n        errores,\r\n        filtroNotaCredito,\r\n        fechaInicio,\r\n        fechaFin,\r\n        notasCredito,\r\n        resultadosNotasCredito,\r\n        detalleNotaCredito,\r\n        notaCreditoSeleccionada,\r\n        hasPermission: store.getters.hasPermission,\r\n        cargarCsv,\r\n        procesarCsv,\r\n        descargarPlantilla,\r\n        volverAlMenu,\r\n        limpiarPagina,\r\n        cargarNotasCredito,\r\n        consultarNotasCredito,\r\n        verDetalleNotaCredito,\r\n        exportarListadoExcel,\r\n        exportarDetalleExcel,\r\n      };\r\n    },\r\n    mounted() {\r\n      if (this.hasPermission('inventario', 'notas_credito', 'ver')) {\r\n        this.cargarNotasCredito();\r\n      } else {\r\n        alert('No tienes permiso para ver notas de crédito.');\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .cargar-notas-credito {\r\n    padding: 20px;\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n  }\r\n  \r\n  h1 {\r\n    font-size: 2rem;\r\n    color: #2c3e50;\r\n    text-align: center;\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  h2 {\r\n    font-size: 1.5rem;\r\n    color: #34495e;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  h3 {\r\n    font-size: 1.2rem;\r\n    color: #34495e;\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .menu-buttons {\r\n    display: flex;\r\n    gap: 15px;\r\n    margin-bottom: 20px;\r\n    justify-content: flex-end;\r\n  }\r\n  \r\n  button,\r\n  .btn {\r\n    padding: 8px 16px;\r\n    background-color: #42b983;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: background-color 0.2s ease;\r\n  }\r\n  \r\n  button:hover,\r\n  .btn:hover {\r\n    background-color: #2c3e50;\r\n  }\r\n  \r\n  .btn-secondary {\r\n    background-color: #6c757d;\r\n  }\r\n  \r\n  .btn-secondary:hover {\r\n    background-color: #5a6268;\r\n  }\r\n  \r\n  .btn-warning {\r\n    background-color: #ffc107;\r\n    color: #333;\r\n  }\r\n  \r\n  .btn-warning:hover {\r\n    background-color: #e0a800;\r\n  }\r\n  \r\n  .btn-info {\r\n    background-color: #17a2b8;\r\n  }\r\n  \r\n  .btn-info:hover {\r\n    background-color: #138496;\r\n  }\r\n  \r\n  .form-section {\r\n    background: #ffffff;\r\n    border-radius: 12px;\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n    padding: 20px;\r\n    margin-bottom: 30px;\r\n  }\r\n  \r\n  .form-group {\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .form-group label {\r\n    display: block;\r\n    font-weight: bold;\r\n    margin-bottom: 5px;\r\n    color: #555;\r\n  }\r\n  \r\n  .form-group input,\r\n  .form-group select {\r\n    width: 100%;\r\n    padding: 8px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  .form-group p {\r\n    margin-top: 5px;\r\n    font-size: 14px;\r\n    color: #555;\r\n  }\r\n  \r\n  .form-actions {\r\n    display: flex;\r\n    gap: 15px;\r\n    margin-bottom: 20px;\r\n  }\r\n  \r\n  .table-container {\r\n    max-width: 100%;\r\n    overflow-x: auto;\r\n  }\r\n  \r\n  table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  th,\r\n  td {\r\n    border: 1px solid #ddd;\r\n    padding: 10px;\r\n    text-align: left;\r\n  }\r\n  \r\n  th {\r\n    background-color: #f2f2f2;\r\n    font-weight: bold;\r\n    color: #34495e;\r\n  }\r\n  \r\n  tbody tr:nth-child(odd) {\r\n    background-color: #f9f9f9;\r\n  }\r\n  \r\n  tbody tr:hover {\r\n    background-color: #f1f1f1;\r\n  }\r\n  \r\n  .excel-icon {\r\n    margin-left: 5px;\r\n  }\r\n  \r\n  ul {\r\n    margin-top: 10px;\r\n    padding-left: 20px;\r\n  }\r\n  \r\n  li {\r\n    color: #555;\r\n    font-size: 14px;\r\n  }\r\n  \r\n  @media (max-width: 768px) {\r\n    .menu-buttons {\r\n      flex-direction: column;\r\n      align-items: flex-end;\r\n    }\r\n  \r\n    .form-group input,\r\n    .form-group select {\r\n      font-size: 16px;\r\n    }\r\n  \r\n    table {\r\n      display: block;\r\n      overflow-x: auto;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n  </style>","import { render } from \"./CargarNotasCredito.vue?vue&type=template&id=6e4101f2&scoped=true\"\nimport script from \"./CargarNotasCredito.vue?vue&type=script&lang=js\"\nexport * from \"./CargarNotasCredito.vue?vue&type=script&lang=js\"\n\nimport \"./CargarNotasCredito.vue?vue&type=style&index=0&id=6e4101f2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6e4101f2\"]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","args","$setup","limpiarPagina","hasPermission","_hoisted_3","_hoisted_4","for","id","type","onChange","cargarCsv","ref","procesarCsv","_hoisted_5","errores","length","_hoisted_6","_Fragment","_renderList","error","index","_toDisplayString","_createCommentVNode","_hoisted_7","descargarPlantilla","_hoisted_8","_hoisted_9","$event","filtroNotaCredito","placeholder","_hoisted_10","fechaInicio","_hoisted_11","fechaFin","_hoisted_12","value","disabled","notasCredito","nota","_hoisted_13","consultarNotasCredito","resultadosNotasCredito","_hoisted_14","_hoisted_15","exportarListadoExcel","_createTextVNode","_createVNode","_component_font_awesome_icon","icon","_hoisted_16","nota_credito","fecha","verDetalleNotaCredito","_hoisted_17","detalleNotaCredito","_hoisted_18","notaCreditoSeleccionada","_hoisted_19","exportarDetalleExcel","_hoisted_20","item","codigo","nombre","cantidad","bodega","costo_unitario","toFixed","costo_total","name","setup","store","useStore","router","useRouter","archivoCsv","inputCsv","event","target","files","async","alert","formData","FormData","append","response","axios","post","headers","data","message","cargarNotasCredito","limpiarSesionCsv","console","errors","csvData","csvContent","map","e","join","blob","Blob","link","document","createElement","href","URL","createObjectURL","setAttribute","body","appendChild","click","removeChild","volverAlMenu","tipoUsuario","localStorage","getItem","push","get","notas_credito","params","undefined","fecha_inicio","fecha_fin","notaCredito","worksheetData","worksheet","XLSX","aoa_to_sheet","workbook","book_new","book_append_sheet","Date","toISOString","slice","fechaCargue","find","n","getters","mounted","this","__exports__","render"],"sourceRoot":""}