(function(){"use strict";var e={1538:function(e,a,t){var o=t(5130),r=t(6768);const n={class:"app"},l={key:0},s={key:0,class:"logo"},i=["src"];function u(e,a,t,o,u,d){const c=(0,r.g2)("router-link"),p=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",n,[o.store.getters.isAuthenticated?((0,r.uX)(),(0,r.CE)("header",l,[o.store.state.cliente.logo?((0,r.uX)(),(0,r.CE)("div",s,[(0,r.Lk)("img",{src:o.store.state.cliente.logo,alt:"Logo del Cliente"},null,8,i)])):(0,r.Q3)("",!0),(0,r.Lk)("nav",null,[o.store.getters.isSuperAdmin?((0,r.uX)(),(0,r.Wv)(c,{key:0,to:"/admin/clientes"},{default:(0,r.k6)((()=>a[1]||(a[1]=[(0,r.eW)("Clientes")]))),_:1})):(0,r.Q3)("",!0),o.store.getters.isSuperAdmin?((0,r.uX)(),(0,r.Wv)(c,{key:1,to:"/admin/perfiles"},{default:(0,r.k6)((()=>a[2]||(a[2]=[(0,r.eW)("Perfiles")]))),_:1})):(0,r.Q3)("",!0),o.store.getters.isSuperAdmin?((0,r.uX)(),(0,r.Wv)(c,{key:2,to:"/admin/usuarios"},{default:(0,r.k6)((()=>a[3]||(a[3]=[(0,r.eW)("Usuarios")]))),_:1})):(0,r.Q3)("",!0),o.showMenuLink?((0,r.uX)(),(0,r.Wv)(c,{key:3,to:o.menuLinkDestination,class:"menu-link"},{default:(0,r.k6)((()=>a[4]||(a[4]=[(0,r.eW)(" Menú ")]))),_:1},8,["to"])):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>o.logout&&o.logout(...e))},"Salir")])])):(0,r.Q3)("",!0),(0,r.bF)(p)])}t(4114);var d=t(782),c=t(1387),p={setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,c.lq)(),o=()=>{e.commit("logout"),a.push("/login")},n=(0,r.EW)((()=>"/login"!==t.path&&!(e.getters.isSuperAdmin&&"/admin"===t.path))),l=(0,r.EW)((()=>e.getters.isSuperAdmin?t.path.startsWith("/admin/")?"/admin":"/":"/"===t.path||"/analysis"===t.path||"/inventory"===t.path||"/production"===t.path||"/settings"===t.path?"/":t.path.startsWith("/analysis/")||"/dashboard"===t.path||t.path.startsWith("/dashboard/")||t.path.startsWith("/upload/")||"/upload"===t.path||t.path.startsWith("/points-of-sale")?"/analysis":t.path.startsWith("/inventory/")?"/inventory":t.path.startsWith("/production/")?"/production":(t.path.startsWith("/profiles-clientes")||t.path.startsWith("/users-clientes"),"/")));return{store:e,route:t,showMenuLink:n,menuLinkDestination:l,logout:o}}},m=t(1241);const v=(0,m.A)(p,[["render",u]]);var h=v,b=(t(8111),t(2489),t(3579),t(4232));const k={class:"login-container"},g={class:"login-card"},f={class:"form-group"},y={class:"input-wrapper"},_={class:"form-group"},C={class:"input-wrapper"},L=["type"],E=["disabled"],D={key:0,class:"error-message"};function A(e,a,t,n,l,s){const i=(0,r.g2)("font-awesome-icon");return(0,r.uX)(),(0,r.CE)("div",k,[(0,r.Lk)("div",g,[a[5]||(a[5]=(0,r.Lk)("div",{class:"header"},[(0,r.Lk)("h1",{class:"system-title"},"Análisis y Gestión Empresarial"),(0,r.Lk)("p",{class:"subtitle"},"Inicio de sesión")],-1)),(0,r.Lk)("form",{onSubmit:a[2]||(a[2]=(0,o.D$)(((...e)=>n.login&&n.login(...e)),["prevent"])),class:"login-form"},[(0,r.Lk)("div",f,[a[3]||(a[3]=(0,r.Lk)("label",{for:"usuario"},"Usuario",-1)),(0,r.Lk)("div",y,[(0,r.bF)(i,{icon:"user",class:"input-icon"}),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":a[0]||(a[0]=e=>n.usuario=e),placeholder:"Ingresa tu usuario",required:"",autocomplete:"username"},null,512),[[o.Jo,n.usuario]])])]),(0,r.Lk)("div",_,[a[4]||(a[4]=(0,r.Lk)("label",{for:"password"},"Contraseña",-1)),(0,r.Lk)("div",C,[(0,r.bF)(i,{icon:"lock",class:"input-icon"}),(0,r.bo)((0,r.Lk)("input",{type:n.isPasswordVisible?"text":"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>n.password=e),placeholder:"Ingresa tu contraseña",required:"",autocomplete:"current-password"},null,8,L),[[o.hp,n.password]]),(0,r.bF)(i,{icon:n.isPasswordVisible?"eye-slash":"eye",class:"toggle-password-icon",onClick:n.togglePasswordVisibility},null,8,["icon","onClick"])])]),(0,r.Lk)("button",{type:"submit",class:"login-button",disabled:n.loading},(0,b.v_)(n.loading?"Iniciando...":"Iniciar Sesión"),9,E),n.error?((0,r.uX)(),(0,r.CE)("p",D,(0,b.v_)(n.error),1)):(0,r.Q3)("",!0)],32)])])}var P=t(7682),F=t(144),V=t(292),w={name:"Login",components:{FontAwesomeIcon:V.gc},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(""),o=(0,F.KR)(""),r=(0,F.KR)(""),n=(0,F.KR)(!1),l=(0,F.KR)(!1),s=async()=>{n.value=!0,r.value="";try{const l=await P.A.post("/login",{usuario:t.value,password:o.value}),{token:s,id:i,idcliente:u,perfilid:d,permisos:c,clienteEstado:p}=l.data;if(localStorage.setItem("usuario_id",i),u){if(!1===p)return r.value="Por favor, póngase al día con su mensualidad para uso de la plataforma.",n.value=!1,void localStorage.removeItem("usuario_id");e.commit("setAuth",{token:s,idcliente:u,perfilid:d,permisos:c}),await e.dispatch("fetchCliente")}else e.commit("setAuth",{token:s,idcliente:u,perfilid:d,permisos:c});e.getters.isSuperAdmin?a.push("/admin"):a.push("/")}catch(l){r.value=l.response?.data?.error||"Error al iniciar sesión",console.error("Error en login:",l.response?.data),localStorage.removeItem("usuario_id")}finally{n.value=!1}},i=()=>{l.value=!l.value};return{usuario:t,password:o,error:r,loading:n,login:s,isPasswordVisible:l,togglePasswordVisibility:i}}};const N=(0,m.A)(w,[["render",A],["__scopeId","data-v-6dc13a95"]]);var I=N;const X={class:"main-menu-container"},O={key:0,class:"cliente-nombre"},K={class:"modules-grid"};function R(e,a,t,o,n,l){const s=(0,r.g2)("font-awesome-icon"),i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",X,[a[4]||(a[4]=(0,r.Lk)("h1",{class:"main-title"},"Sistema Empresarial",-1)),o.store.state.cliente.nombre?((0,r.uX)(),(0,r.CE)("h2",O,(0,b.v_)(o.store.state.cliente.nombre),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",K,[(0,r.bF)(i,{to:"/analysis",class:"module-card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"chart-line",class:"module-icon"}),a[0]||(a[0]=(0,r.Lk)("span",null,"Análisis",-1))])),_:1}),(0,r.bF)(i,{to:"/inventory",class:"module-card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"warehouse",class:"module-icon"}),a[1]||(a[1]=(0,r.Lk)("span",null,"Inventario",-1))])),_:1}),(0,r.bF)(i,{to:"/production",class:"module-card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"industry",class:"module-icon"}),a[2]||(a[2]=(0,r.Lk)("span",null,"Producción",-1))])),_:1}),o.store.getters.hasPermission("parametrizacion",null,"editar")?((0,r.uX)(),(0,r.Wv)(i,{key:0,to:"/settings",class:"module-card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"cogs",class:"module-icon"}),a[3]||(a[3]=(0,r.Lk)("span",null,"Parametrización",-1))])),_:1})):(0,r.Q3)("",!0)])])}var T={name:"MainMenu",setup(){const e=(0,d.Pj)();return{store:e}}};const x=(0,m.A)(T,[["render",R],["__scopeId","data-v-07a76090"]]);var S=x;const $={class:"analysis-menu-container"},U={key:0,class:"cliente-nombre"},B={class:"sections-grid"},M={key:0,class:"section dashboard-section"},W={class:"section-title"},z={class:"cards-container"},q={key:1,class:"section upload-section"},j={class:"section-title"},Q={class:"cards-container"};function J(e,a,t,o,n,l){const s=(0,r.g2)("font-awesome-icon"),i=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",$,[a[15]||(a[15]=(0,r.Lk)("h1",{class:"main-title"},"Sistema de Análisis Empresarial",-1)),o.store.state.cliente.nombre?((0,r.uX)(),(0,r.CE)("h2",U,(0,b.v_)(o.store.state.cliente.nombre),1)):(0,r.Q3)("",!0),(0,r.Lk)("div",B,[o.store.getters.hasPermission("dashboard",null,"ver")?((0,r.uX)(),(0,r.CE)("div",M,[(0,r.Lk)("h2",W,[(0,r.bF)(s,{icon:"chart-line",class:"section-icon"}),a[0]||(a[0]=(0,r.eW)(" DASHBOARD "))]),(0,r.Lk)("div",z,[o.store.getters.hasPermission("dashboard","ventas_historicas","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:0,to:"/dashboard/historical-sales",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"history",class:"card-icon"}),a[1]||(a[1]=(0,r.Lk)("span",null,"Ventas Históricas",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","rendimiento_mensual","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:1,to:"/dashboard/monthly-performance",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"calendar-alt",class:"card-icon"}),a[2]||(a[2]=(0,r.Lk)("span",null,"Rendimiento Mensual",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","venta_diaria_pdv","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:2,to:"/dashboard/daily-sales",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"store",class:"card-icon"}),a[3]||(a[3]=(0,r.Lk)("span",null,"Venta Diaria por PDV",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","ventas_franja_dia","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:3,to:"/dashboard/sales-by-time-slot",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"clock",class:"card-icon"}),a[4]||(a[4]=(0,r.Lk)("span",null,"Ventas por Franja del Día",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","ventas_medio_pago","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:4,to:"/dashboard/sales-by-payment-method",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"credit-card",class:"card-icon"}),a[5]||(a[5]=(0,r.Lk)("span",null,"Ventas por Medio de Pago",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","ventas_producto","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:5,to:"/dashboard/sales-by-product",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"box",class:"card-icon"}),a[6]||(a[6]=(0,r.Lk)("span",null,"Ventas por Producto",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","ventas_asesor","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:6,to:"/dashboard/sales-by-seller",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"user-tie",class:"card-icon"}),a[7]||(a[7]=(0,r.Lk)("span",null,"Ventas por Asesor",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("dashboard","venta_acumulada_pdv","ver")?((0,r.uX)(),(0,r.Wv)(i,{key:7,to:"/dashboard/accumulated-sales-by-pdv",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"chart-bar",class:"card-icon"}),a[8]||(a[8]=(0,r.Lk)("span",null,"Venta Acumulada por PDV",-1))])),_:1})):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),o.store.getters.hasPermission("cargue",null,"editar")?((0,r.uX)(),(0,r.CE)("div",q,[(0,r.Lk)("h2",j,[(0,r.bF)(s,{icon:"upload",class:"section-icon"}),a[9]||(a[9]=(0,r.eW)(" CARGUE DE INFORMACIÓN PARA ANÁLISIS "))]),(0,r.Lk)("div",Q,[o.store.getters.hasPermission("cargue","ventas_diarias","editar")?((0,r.uX)(),(0,r.Wv)(i,{key:0,to:"/upload/sales",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"file-upload",class:"card-icon"}),a[10]||(a[10]=(0,r.Lk)("span",null,"Cargar Ventas Diarias",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("cargue","arqueo","editar")?((0,r.uX)(),(0,r.Wv)(i,{key:1,to:"/upload/arqueo",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"cash-register",class:"card-icon"}),a[11]||(a[11]=(0,r.Lk)("span",null,"Cargar Arqueo",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("cargue","venta_mensual_historica","editar")?((0,r.uX)(),(0,r.Wv)(i,{key:2,to:"/upload/venta-mensual",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"file-invoice",class:"card-icon"}),a[12]||(a[12]=(0,r.Lk)("span",null,"Cargar Venta Mensual Histórica",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("cargue","presupuesto_venta","editar")?((0,r.uX)(),(0,r.Wv)(i,{key:3,to:"/upload/budget",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"file-excel",class:"card-icon"}),a[13]||(a[13]=(0,r.Lk)("span",null,"Cargar Presupuesto de Venta",-1))])),_:1})):(0,r.Q3)("",!0),o.store.getters.hasPermission("parametrizacion","puntos_de_venta","editar")?((0,r.uX)(),(0,r.Wv)(i,{key:4,to:"/points-of-sale",class:"card"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{icon:"map-marker-alt",class:"card-icon"}),a[14]||(a[14]=(0,r.Lk)("span",null,"Crear Puntos de Venta",-1))])),_:1})):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)])])}var H={name:"AnalysisMenu",components:{FontAwesomeIcon:V.gc},setup(){const e=(0,d.Pj)();return{store:e}}};const Y=(0,m.A)(H,[["render",J],["__scopeId","data-v-56227a8b"]]);var G=Y;const Z={class:"admin"};function ee(e,a,t,o,n,l){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",Z,[a[0]||(a[0]=(0,r.Lk)("h2",null,"Panel de Superadministrador",-1)),(0,r.bF)(s)])}var ae={name:"Admin"};const te=(0,m.A)(ae,[["render",ee],["__scopeId","data-v-131e8524"]]);var oe=te;const re={class:"clientes"},ne={key:0,class:"error-message"},le={class:"form-group"},se={class:"form-group"},ie={class:"form-group"},ue={class:"form-group"},de={class:"form-group"},ce={class:"form-group"},pe={class:"form-group"},me={class:"form-group"},ve={class:"form-group"},he={class:"button-group"},be={key:0,type:"submit"},ke={key:1},ge=["onClick"],fe=["onClick"];function ye(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",re,[a[23]||(a[23]=(0,r.Lk)("h3",null,"Gestión de Clientes",-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",ne,(0,b.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[10]||(a[10]=(0,o.D$)((e=>n.isEditing?n.updateCliente():n.createCliente()),["prevent"])),class:"form-grid"},[(0,r.Lk)("div",le,[a[11]||(a[11]=(0,r.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[0]||(a[0]=e=>n.nombre=e),required:""},null,512),[[o.Jo,n.nombre]])]),(0,r.Lk)("div",se,[a[12]||(a[12]=(0,r.Lk)("label",{for:"nit_cc"},"NIT/CC:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"nit_cc","onUpdate:modelValue":a[1]||(a[1]=e=>n.nit_cc=e),required:""},null,512),[[o.Jo,n.nit_cc]])]),(0,r.Lk)("div",ie,[a[13]||(a[13]=(0,r.Lk)("label",{for:"pais"},"País:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"pais","onUpdate:modelValue":a[2]||(a[2]=e=>n.pais=e),required:""},null,512),[[o.Jo,n.pais]])]),(0,r.Lk)("div",ue,[a[14]||(a[14]=(0,r.Lk)("label",{for:"ciudad"},"Ciudad:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"ciudad","onUpdate:modelValue":a[3]||(a[3]=e=>n.ciudad=e),required:""},null,512),[[o.Jo,n.ciudad]])]),(0,r.Lk)("div",de,[a[15]||(a[15]=(0,r.Lk)("label",{for:"direccion_ppal"},"Dirección Principal:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"direccion_ppal","onUpdate:modelValue":a[4]||(a[4]=e=>n.direccion_ppal=e),required:""},null,512),[[o.Jo,n.direccion_ppal]])]),(0,r.Lk)("div",ce,[a[16]||(a[16]=(0,r.Lk)("label",{for:"tel1"},"Teléfono 1:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"tel1","onUpdate:modelValue":a[5]||(a[5]=e=>n.tel1=e),required:""},null,512),[[o.Jo,n.tel1]])]),(0,r.Lk)("div",pe,[a[17]||(a[17]=(0,r.Lk)("label",{for:"correo"},"Correo:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",id:"correo","onUpdate:modelValue":a[6]||(a[6]=e=>n.correo=e),required:""},null,512),[[o.Jo,n.correo]])]),(0,r.Lk)("div",me,[a[18]||(a[18]=(0,r.Lk)("label",{for:"logo"},"Logo (URL):",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"logo","onUpdate:modelValue":a[7]||(a[7]=e=>n.logo=e),placeholder:"Ej: /logos/cliente.png"},null,512),[[o.Jo,n.logo]])]),(0,r.Lk)("div",ve,[a[20]||(a[20]=(0,r.Lk)("label",{for:"estado"},"Estado:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"estado","onUpdate:modelValue":a[8]||(a[8]=e=>n.estado=e)},a[19]||(a[19]=[(0,r.Lk)("option",{value:!0},"Activo",-1),(0,r.Lk)("option",{value:!1},"Inactivo",-1)]),512),[[o.u1,n.estado]])]),(0,r.Lk)("div",he,[n.isEditing?((0,r.uX)(),(0,r.CE)("div",ke,[a[21]||(a[21]=(0,r.Lk)("button",{type:"submit"},"Guardar",-1)),(0,r.Lk)("button",{type:"button",onClick:a[9]||(a[9]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])):((0,r.uX)(),(0,r.CE)("button",be,"Crear Cliente"))])],32),a[24]||(a[24]=(0,r.Lk)("h3",null,"Clientes Existentes",-1)),(0,r.Lk)("table",null,[a[22]||(a[22]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"NIT/CC"),(0,r.Lk)("th",null,"País"),(0,r.Lk)("th",null,"Ciudad"),(0,r.Lk)("th",null,"Dirección"),(0,r.Lk)("th",null,"Teléfono 1"),(0,r.Lk)("th",null,"Correo"),(0,r.Lk)("th",null,"Estado"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.clientes,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.idcliente},[(0,r.Lk)("td",null,(0,b.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,b.v_)(e.nit_cc),1),(0,r.Lk)("td",null,(0,b.v_)(e.pais),1),(0,r.Lk)("td",null,(0,b.v_)(e.ciudad),1),(0,r.Lk)("td",null,(0,b.v_)(e.direccion_ppal),1),(0,r.Lk)("td",null,(0,b.v_)(e.tel1),1),(0,r.Lk)("td",null,(0,b.v_)(e.correo),1),(0,r.Lk)("td",null,(0,b.v_)(e.estado?"Activo":"Inactivo"),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>n.editCliente(e)},"Editar",8,ge),(0,r.Lk)("button",{onClick:a=>n.deleteCliente(e.idcliente)},"Eliminar",8,fe)])])))),128))])])])}var _e={name:"Clientes",setup(){const e=(0,d.Pj)(),a=(0,F.KR)([]),t=(0,F.KR)(""),o=(0,F.KR)(""),n=(0,F.KR)(""),l=(0,F.KR)(""),s=(0,F.KR)(""),i=(0,F.KR)(""),u=(0,F.KR)(""),c=(0,F.KR)(""),p=(0,F.KR)(!0),m=(0,F.KR)(""),v=(0,F.KR)(!1),h=(0,F.KR)(null),b=async()=>{try{const t=e.state.auth.token;if(!t)return void(m.value="No se encontró un token de autenticación. Por favor, inicia sesión nuevamente.");console.log("Token enviado:",t);const o=await P.A.get("/clientes",{headers:{Authorization:`Bearer ${t}`}});console.log("Clientes obtenidos:",o.data),a.value=o.data,m.value=""}catch(t){console.error("Error al obtener clientes:",t),t.response?m.value=t.response.data.msg||"Error al obtener los clientes. Por favor, intenta de nuevo.":m.value="Error de conexión con el servidor. Por favor, verifica tu conexión e intenta de nuevo."}},k=async()=>{try{const a=e.state.auth.token;if(!a)return void(m.value="No se encontró un token de autenticación. Por favor, inicia sesión nuevamente.");await P.A.post("/clientes",{nombre:t.value,nit_cc:o.value,pais:n.value,ciudad:l.value,direccion_ppal:s.value,tel1:i.value,correo:u.value,logo:c.value||null,estado:p.value},{headers:{Authorization:`Bearer ${a}`}}),C(),b()}catch(a){console.error("Error al crear cliente:",a),a.response?m.value=a.response.data.msg||"Error al crear el cliente. Por favor, verifica los datos e intenta de nuevo.":m.value="Error de conexión con el servidor. Por favor, verifica tu conexión e intenta de nuevo."}},g=e=>{v.value=!0,h.value=e.idcliente,t.value=e.nombre,o.value=e.nit_cc,n.value=e.pais,l.value=e.ciudad,s.value=e.direccion_ppal,i.value=e.tel1,u.value=e.correo,c.value=e.logo||"",p.value=e.estado},f=async()=>{try{const a=e.state.auth.token;if(!a)return void(m.value="No se encontró un token de autenticación. Por favor, inicia sesión nuevamente.");await P.A.put(`/clientes/${h.value}`,{nombre:t.value,nit_cc:o.value,pais:n.value,ciudad:l.value,direccion_ppal:s.value,tel1:i.value,correo:u.value,logo:c.value||null,estado:p.value},{headers:{Authorization:`Bearer ${a}`}}),C(),v.value=!1,h.value=null,b()}catch(a){console.error("Error al actualizar cliente:",a),a.response?m.value=a.response.data.msg||"Error al actualizar el cliente. Por favor, verifica los datos e intenta de nuevo.":m.value="Error de conexión con el servidor. Por favor, verifica tu conexión e intenta de nuevo."}},y=async a=>{if(confirm("¿Está seguro de eliminar este cliente?"))try{const t=e.state.auth.token;if(!t)return void(m.value="No se encontró un token de autenticación. Por favor, inicia sesión nuevamente.");await P.A.delete(`/clientes/${a}`,{headers:{Authorization:`Bearer ${t}`}}),b(),m.value=""}catch(t){console.error("Error al eliminar cliente:",t),t.response?m.value=t.response.data.msg||"Error al eliminar el cliente. Por favor, intenta de nuevo.":m.value="Error de conexión con el servidor. Por favor, verifica tu conexión e intenta de nuevo."}},_=()=>{C(),v.value=!1,h.value=null},C=()=>{t.value="",o.value="",n.value="",l.value="",s.value="",i.value="",u.value="",c.value="",p.value=!0,m.value=""};return(0,r.sV)((()=>{b()})),{clientes:a,nombre:t,nit_cc:o,pais:n,ciudad:l,direccion_ppal:s,tel1:i,correo:u,logo:c,estado:p,errorMessage:m,isEditing:v,createCliente:k,updateCliente:f,editCliente:g,deleteCliente:y,cancelEdit:_}}};const Ce=(0,m.A)(_e,[["render",ye],["__scopeId","data-v-84c9f8f4"]]);var Le=Ce;const Ee={class:"profiles"},De={key:0,class:"error-message"},Ae={class:"form-group"},Pe=["value"],Fe={class:"form-group"},Ve={class:"form-group"},we={class:"permisos-container"},Ne={class:"secciones-grid"},Ie=["value","onUpdate:modelValue"],Xe={key:0,class:"subsecciones"},Oe=["value","onUpdate:modelValue"],Ke={key:0,type:"submit"},Re={key:1,class:"edit-buttons"},Te=["onClick"],xe=["onClick"];function Se(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",Ee,[a[10]||(a[10]=(0,r.Lk)("h3",null,"Gestión de Perfiles",-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",De,(0,b.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[3]||(a[3]=(0,o.D$)((e=>n.isEditing?n.updateProfile():n.createProfile()),["prevent"]))},[(0,r.Lk)("div",Ae,[a[5]||(a[5]=(0,r.Lk)("label",{for:"idcliente"},"Cliente:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"idcliente","onUpdate:modelValue":a[0]||(a[0]=e=>n.idcliente=e),required:""},[a[4]||(a[4]=(0,r.Lk)("option",{value:""},"Seleccione un cliente",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.clientes,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.idcliente,value:e.idcliente},(0,b.v_)(e.nombre),9,Pe)))),128))],512),[[o.u1,n.idcliente]])]),(0,r.Lk)("div",Fe,[a[6]||(a[6]=(0,r.Lk)("label",{for:"perfil_nombre"},"Nombre del Perfil:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"perfil_nombre","onUpdate:modelValue":a[1]||(a[1]=e=>n.perfil_nombre=e),required:""},null,512),[[o.Jo,n.perfil_nombre]])]),(0,r.Lk)("div",Ve,[a[7]||(a[7]=(0,r.Lk)("label",null,"Permisos:",-1)),(0,r.Lk)("div",we,[(0,r.Lk)("div",Ne,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.secciones,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.name,class:"permiso-group"},[(0,r.Lk)("h4",null,(0,b.v_)(e.displayName),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.permisos,(a=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"checkbox-item"},[(0,r.Lk)("label",null,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":a=>n.permisos[e.name]=a},null,8,Ie),[[o.lH,n.permisos[e.name]]]),(0,r.eW)(" "+(0,b.v_)(a),1)])])))),128)),e.subsecciones?((0,r.uX)(),(0,r.CE)("div",Xe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.subsecciones,(a=>((0,r.uX)(),(0,r.CE)("div",{key:a.name,class:"subseccion"},[(0,r.Lk)("h5",null,(0,b.v_)(a.displayName),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.permisos,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"checkbox-item"},[(0,r.Lk)("label",null,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:t,"onUpdate:modelValue":t=>n.permisos[`${e.name}_${a.name}`]=t},null,8,Oe),[[o.lH,n.permisos[`${e.name}_${a.name}`]]]),(0,r.eW)(" "+(0,b.v_)(t),1)])])))),128))])))),128))])):(0,r.Q3)("",!0)])))),128))])])]),n.isEditing?((0,r.uX)(),(0,r.CE)("div",Re,[a[8]||(a[8]=(0,r.Lk)("button",{type:"submit"},"Guardar",-1)),(0,r.Lk)("button",{type:"button",onClick:a[2]||(a[2]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])):((0,r.uX)(),(0,r.CE)("button",Ke,"Crear Perfil"))],32),a[11]||(a[11]=(0,r.Lk)("h3",null,"Perfiles Existentes",-1)),(0,r.Lk)("table",null,[a[9]||(a[9]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Cliente"),(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.perfiles,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.perfil_id},[(0,r.Lk)("td",null,(0,b.v_)(n.getClienteNombre(e.idcliente)),1),(0,r.Lk)("td",null,(0,b.v_)(e.perfil_nombre),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>n.editProfile(e)},"Editar",8,Te),(0,r.Lk)("button",{onClick:a=>n.deleteProfile(e.perfil_id)},"Eliminar",8,xe)])])))),128))])])])}t(116),t(7588);var $e={name:"Profiles",setup(){const e=(0,d.Pj)(),a=(0,F.KR)([]),t=(0,F.KR)([]),o=(0,F.KR)(""),n=(0,F.KR)(""),l=(0,F.KR)({dashboard:[],cargue:[],parametrizacion:[],inventario:[],production:[],administracion:[],dashboard_venta_acumulada_pdv:[],dashboard_ventas_historicas:[],dashboard_rendimiento_mensual:[],dashboard_venta_diaria_pdv:[],dashboard_ventas_franja_dia:[],dashboard_ventas_medio_pago:[],dashboard_ventas_producto:[],dashboard_ventas_asesor:[],cargue_ventas_diarias:[],cargue_arqueo:[],cargue_venta_mensual_historica:[],cargue_presupuesto_venta:[],cargue_puntos_de_venta:[],parametrizacion_perfiles:[],parametrizacion_usuarios:[],inventario_consulta_inventario:[],inventario_consulta:[],inventario_kardex:[],inventario_gestion_productos:[],inventario_bodegas:[],inventario_compras:[],inventario_ventas:[],inventario_notas_credito:[],inventario_ajustes:[],inventario_traslados:[],production_admin:[],production_reportes:[],administracion_crear_clientes:[],administracion_crear_perfiles:[],administracion_crear_usuarios:[]}),s=(0,F.KR)(""),i=(0,F.KR)(!1),u=(0,F.KR)(null),c=[{name:"dashboard",displayName:"Dashboard",permisos:["ver"],subsecciones:[{name:"venta_acumulada_pdv",displayName:"Venta Acumulada por PDV",permisos:["ver"]},{name:"ventas_historicas",displayName:"Ventas Históricas",permisos:["ver"]},{name:"rendimiento_mensual",displayName:"Rendimiento Mensual",permisos:["ver"]},{name:"venta_diaria_pdv",displayName:"Venta Diaria por PDV",permisos:["ver"]},{name:"ventas_franja_dia",displayName:"Ventas por Franja del Día",permisos:["ver"]},{name:"ventas_medio_pago",displayName:"Ventas por Medio de Pago",permisos:["ver"]},{name:"ventas_producto",displayName:"Ventas por Producto",permisos:["ver"]},{name:"ventas_asesor",displayName:"Ventas por Asesor",permisos:["ver"]}]},{name:"cargue",displayName:"Cargue de Información",permisos:["editar"],subsecciones:[{name:"ventas_diarias",displayName:"Ventas Diarias",permisos:["editar"]},{name:"arqueo",displayName:"Arqueo",permisos:["editar"]},{name:"venta_mensual_historica",displayName:"Venta Mensual Histórica",permisos:["editar"]},{name:"presupuesto_venta",displayName:"Presupuesto de Venta",permisos:["editar"]},{name:"puntos_de_venta",displayName:"Puntos de Venta",permisos:["editar"]}]},{name:"parametrizacion",displayName:"Parametrización",permisos:["editar"],subsecciones:[{name:"perfiles",displayName:"Creación de Perfiles",permisos:["editar"]},{name:"usuarios",displayName:"Creación de Usuarios",permisos:["editar"]}]},{name:"inventario",displayName:"Inventario",permisos:["ver"],subsecciones:[{name:"consulta_inventario",displayName:"Consulta Inventario",permisos:["ver"]},{name:"consulta",displayName:"Consulta Lite",permisos:["ver"]},{name:"kardex",displayName:"Kardex",permisos:["ver","editar"]},{name:"gestion_productos",displayName:"Gestión de Productos",permisos:["editar"]},{name:"bodegas",displayName:"Bodegas",permisos:["ver","editar"]},{name:"compras",displayName:"Cargar Compras",permisos:["ver","editar"]},{name:"ventas",displayName:"Cargar Ventas",permisos:["ver","editar"]},{name:"notas_credito",displayName:"Notas de Crédito",permisos:["ver","editar"]},{name:"ajustes",displayName:"Ajuste Manual de Inventario",permisos:["ver","editar"]},{name:"traslados",displayName:"Trasladar Cantidades",permisos:["ver","editar"]}]},{name:"production",displayName:"Producción",permisos:["ver"],subsecciones:[{name:"admin",displayName:"Administración",permisos:["ver","editar"]},{name:"reportes",displayName:"Reportes",permisos:["ver"]}]},{name:"administracion",displayName:"Administración (Superadmin)",permisos:[],subsecciones:[{name:"crear_clientes",displayName:"Crear Clientes",permisos:["crear"]},{name:"crear_perfiles",displayName:"Crear Perfiles",permisos:["crear"]},{name:"crear_usuarios",displayName:"Crear Usuarios",permisos:["crear"]}]}],p=async()=>{try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");const o=await P.A.get("/clientes",{headers:{Authorization:`Bearer ${t}`}});a.value=o.data}catch(t){s.value=t.response?.data?.error||"Error al obtener clientes",console.error("Error al obtener clientes:",t)}},m=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");const o=await P.A.get("/perfiles",{headers:{Authorization:`Bearer ${a}`}});t.value=o.data}catch(a){s.value=a.response?.data?.error||"Error al obtener perfiles",console.error("Error al obtener perfiles:",a)}},v=async a=>{try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");const o=await P.A.get(`/perfiles/${a}/permisos`,{headers:{Authorization:`Bearer ${t}`}}),r=o.data;C(),r.forEach((e=>{const a=e.subseccion?`${e.seccion}_${e.subseccion}`:e.seccion;void 0!==l.value[a]?l.value[a].push(e.permiso):console.warn(`Permiso no soportado en frontend: ${a} - ${e.permiso}`)})),console.log("Permisos cargados:",l.value)}catch(t){s.value=t.response?.data?.error||"Error al obtener permisos",console.error("Error al obtener permisos:",t)}},h=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");const t=await P.A.post("/perfiles",{idcliente:o.value,perfil_nombre:n.value},{headers:{Authorization:`Bearer ${a}`}}),r=t.data.perfil_id;await f(r),_(),m()}catch(a){s.value=a.response?.data?.error||"Error al crear perfil",console.error("Error al crear perfil:",a)}},b=async e=>{i.value=!0,u.value=e.perfil_id,o.value=e.idcliente,n.value=e.perfil_nombre,await v(e.perfil_id)},k=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");await P.A.put(`/perfiles/${u.value}`,{idcliente:o.value,perfil_nombre:n.value},{headers:{Authorization:`Bearer ${a}`}}),await f(u.value),_(),i.value=!1,u.value=null,m()}catch(a){s.value=a.response?.data?.error||"Error al actualizar perfil",console.error("Error al actualizar perfil:",a)}},g=async a=>{if(confirm("¿Está seguro de eliminar este perfil?"))try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");await P.A.delete(`/perfiles/${a}`,{headers:{Authorization:`Bearer ${t}`}}),m()}catch(t){s.value=t.response?.data?.error||"Error al eliminar perfil",console.error("Error al eliminar perfil:",t)}},f=async a=>{const t=e.state.auth.token,o=[];c.forEach((e=>{l.value[e.name]?.length>0&&l.value[e.name].forEach((a=>{o.push({seccion:e.name,subseccion:null,permiso:a})})),e.subsecciones&&e.subsecciones.forEach((a=>{const t=`${e.name}_${a.name}`;l.value[t]?.length>0&&l.value[t].forEach((t=>{o.push({seccion:e.name,subseccion:a.name,permiso:t})}))}))})),o.length>0&&await P.A.put(`/perfiles/${a}/permisos`,o,{headers:{Authorization:`Bearer ${t}`}})},y=e=>{const t=a.value.find((a=>a.idcliente===e));return t?t.nombre:"N/A"},_=()=>{o.value="",n.value="",C(),s.value=""},C=()=>{l.value={dashboard:[],cargue:[],parametrizacion:[],inventario:[],production:[],administracion:[],dashboard_venta_acumulada_pdv:[],dashboard_ventas_historicas:[],dashboard_rendimiento_mensual:[],dashboard_venta_diaria_pdv:[],dashboard_ventas_franja_dia:[],dashboard_ventas_medio_pago:[],dashboard_ventas_producto:[],dashboard_ventas_asesor:[],cargue_ventas_diarias:[],cargue_arqueo:[],cargue_venta_mensual_historica:[],cargue_presupuesto_venta:[],cargue_puntos_de_venta:[],parametrizacion_perfiles:[],parametrizacion_usuarios:[],inventario_consulta_inventario:[],inventario_consulta:[],inventario_kardex:[],inventario_gestion_productos:[],inventario_bodegas:[],inventario_compras:[],inventario_ventas:[],inventario_notas_credito:[],inventario_ajustes:[],inventario_traslados:[],production_admin:[],production_reportes:[],administracion_crear_clientes:[],administracion_crear_perfiles:[],administracion_crear_usuarios:[]}},L=()=>{_(),i.value=!1,u.value=null};return(0,r.sV)((()=>{p(),m()})),{clientes:a,perfiles:t,idcliente:o,perfil_nombre:n,permisos:l,secciones:c,errorMessage:s,isEditing:i,createProfile:h,editProfile:b,updateProfile:k,deleteProfile:g,cancelEdit:L,getClienteNombre:y}}};const Ue=(0,m.A)($e,[["render",Se],["__scopeId","data-v-ed79cc12"]]);var Be=Ue;const Me={class:"users"},We={key:0,class:"error-message"},ze={class:"form-group"},qe=["value"],je={class:"form-group"},Qe=["value"],Je={class:"form-group"},He={class:"form-group"},Ye={class:"form-group"},Ge={class:"form-group"},Ze=["required"],ea={key:0,type:"submit"},aa={key:1,class:"edit-buttons"},ta=["onClick"],oa=["onClick"],ra=["onClick"],na=["onClick"];function la(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",Me,[a[18]||(a[18]=(0,r.Lk)("h3",null,"Gestión de Usuarios",-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",We,(0,b.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[7]||(a[7]=(0,o.D$)((e=>n.isEditing?n.updateUser():n.createUser()),["prevent"]))},[(0,r.Lk)("div",ze,[a[9]||(a[9]=(0,r.Lk)("label",{for:"idcliente"},"Cliente:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"idcliente","onUpdate:modelValue":a[0]||(a[0]=e=>n.idcliente=e),required:""},[a[8]||(a[8]=(0,r.Lk)("option",{value:""},"Seleccione un cliente",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.clientes,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.idcliente,value:e.idcliente},(0,b.v_)(e.nombre),9,qe)))),128))],512),[[o.u1,n.idcliente]])]),(0,r.Lk)("div",je,[a[11]||(a[11]=(0,r.Lk)("label",{for:"perfil_id"},"Perfil:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"perfil_id","onUpdate:modelValue":a[1]||(a[1]=e=>n.perfil_id=e),required:""},[a[10]||(a[10]=(0,r.Lk)("option",{value:""},"Seleccione un perfil",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.perfilesFiltrados,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.perfil_id,value:e.perfil_id},(0,b.v_)(e.perfil_nombre),9,Qe)))),128))],512),[[o.u1,n.perfil_id]])]),(0,r.Lk)("div",Je,[a[12]||(a[12]=(0,r.Lk)("label",{for:"nombre"},"Nombres:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[2]||(a[2]=e=>n.nombre=e),required:""},null,512),[[o.Jo,n.nombre]])]),(0,r.Lk)("div",He,[a[13]||(a[13]=(0,r.Lk)("label",{for:"apellidos"},"Apellidos:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"apellidos","onUpdate:modelValue":a[3]||(a[3]=e=>n.apellidos=e),required:""},null,512),[[o.Jo,n.apellidos]])]),(0,r.Lk)("div",Ye,[a[14]||(a[14]=(0,r.Lk)("label",{for:"usuario"},"Usuario:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":a[4]||(a[4]=e=>n.usuario=e),required:""},null,512),[[o.Jo,n.usuario]])]),(0,r.Lk)("div",Ge,[a[15]||(a[15]=(0,r.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[5]||(a[5]=e=>n.password=e),required:!n.isEditing},null,8,Ze),[[o.Jo,n.password]])]),n.isEditing?((0,r.uX)(),(0,r.CE)("div",aa,[a[16]||(a[16]=(0,r.Lk)("button",{type:"submit"},"Guardar",-1)),(0,r.Lk)("button",{type:"button",onClick:a[6]||(a[6]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])):((0,r.uX)(),(0,r.CE)("button",ea,"Crear Usuario"))],32),a[19]||(a[19]=(0,r.Lk)("h3",null,"Usuarios Existentes",-1)),(0,r.Lk)("table",null,[a[17]||(a[17]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Cliente"),(0,r.Lk)("th",null,"Perfil"),(0,r.Lk)("th",null,"Nombres"),(0,r.Lk)("th",null,"Apellidos"),(0,r.Lk)("th",null,"Usuario"),(0,r.Lk)("th",null,"Estado"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.usuarios,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.idusuario},[(0,r.Lk)("td",null,(0,b.v_)(n.getClienteNombre(e.idcliente)),1),(0,r.Lk)("td",null,(0,b.v_)(n.getPerfilNombre(e.perfil_id)),1),(0,r.Lk)("td",null,(0,b.v_)(e.nombre||"N/A"),1),(0,r.Lk)("td",null,(0,b.v_)(e.apellidos||"N/A"),1),(0,r.Lk)("td",null,(0,b.v_)(e.usuario),1),(0,r.Lk)("td",null,(0,b.v_)(e.estado?"Activo":"Inactivo"),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>n.editUser(e)},"Editar",8,ta),e.estado?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:a=>n.toggleEstado(e.idusuario,!1)},"Desactivar",8,oa)):((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:a=>n.toggleEstado(e.idusuario,!0)},"Activar",8,ra)),(0,r.Lk)("button",{onClick:a=>n.deleteUser(e.idusuario)},"Eliminar",8,na)])])))),128))])])])}var sa={name:"Users",setup(){const e=(0,d.Pj)(),a=(0,F.KR)([]),t=(0,F.KR)([]),o=(0,F.KR)([]),n=(0,F.KR)(""),l=(0,F.KR)(""),s=(0,F.KR)(""),i=(0,F.KR)(""),u=(0,F.KR)(""),c=(0,F.KR)(""),p=(0,F.KR)(!0),m=(0,F.KR)(""),v=(0,F.KR)(!1),h=(0,F.KR)(null),b=(0,r.EW)((()=>t.value)),k=async()=>{try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");const o=await P.A.get("/clientes",{headers:{Authorization:`Bearer ${t}`}});a.value=o.data}catch(t){m.value=t.response?.data?.error||"Error al obtener clientes",console.error("Error al obtener clientes:",t)}},g=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");const o=await P.A.get("/perfiles",{headers:{Authorization:`Bearer ${a}`}});t.value=o.data,console.log("Perfiles cargados:",t.value)}catch(a){m.value=a.response?.data?.error||"Error al obtener perfiles",console.error("Error al obtener perfiles:",a)}},f=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");const t=await P.A.get("/usuarios",{headers:{Authorization:`Bearer ${a}`}});console.log("Datos crudos de usuarios recibidos del backend:",JSON.stringify(t.data,null,2)),o.value=t.data,console.log("Usuarios asignados a usuarios.value:",o.value)}catch(a){m.value=a.response?.data?.error||"Error al obtener usuarios",console.error("Error al obtener usuarios:",a)}},y=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");await P.A.post("/usuarios",{idcliente:n.value,perfil_id:l.value,nombre:s.value,apellidos:i.value,usuario:u.value,password:c.value},{headers:{Authorization:`Bearer ${a}`}}),V(),f()}catch(a){m.value=a.response?.data?.error||"Error al crear usuario",console.error("Error al crear usuario:",a)}},_=e=>{console.log("Usuario seleccionado para editar (completo):",JSON.stringify(e,null,2)),v.value=!0,h.value=e.idusuario,n.value=e.idcliente||"",l.value=e.perfil_id||e.perfilid||"",s.value=e.nombre||"",i.value=e.apellidos||"",u.value=e.usuario||"",c.value="",p.value=e.estado,console.log("perfil_id asignado:",l.value),console.log("Opciones de perfilesFiltrados:",b.value)},C=async()=>{try{const a=e.state.auth.token;if(!a)throw new Error("No se encontró token de autenticación");const t={idcliente:n.value,perfil_id:l.value,nombre:s.value,apellidos:i.value,usuario:u.value,estado:p.value};c.value&&(t.password=c.value),await P.A.put(`/usuarios/${h.value}`,t,{headers:{Authorization:`Bearer ${a}`}}),V(),v.value=!1,h.value=null,f()}catch(a){m.value=a.response?.data?.error||"Error al actualizar usuario",console.error("Error al actualizar usuario:",a)}},L=async(a,t)=>{try{const o=e.state.auth.token;if(!o)throw new Error("No se encontró token de autenticación");await P.A.patch(`/usuarios/${a}/estado`,{estado:t},{headers:{Authorization:`Bearer ${o}`}}),f()}catch(o){m.value=o.response?.data?.error||"Error al actualizar estado",console.error("Error al actualizar estado del usuario:",o)}},E=async a=>{if(confirm("¿Está seguro de eliminar este usuario?"))try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");await P.A.delete(`/usuarios/${a}`,{headers:{Authorization:`Bearer ${t}`}}),f()}catch(t){m.value=t.response?.data?.error||"Error al eliminar usuario",console.error("Error al eliminar usuario:",t)}},D=e=>{const t=a.value.find((a=>a.idcliente===e));return t?t.nombre:"N/A"},A=e=>{const a=Number(e),o=t.value.find((e=>Number(e.perfil_id)===a));return console.log(`Buscando perfil para perfilid: ${e}, encontrado:`,o),o?o.perfil_nombre:"N/A"},V=()=>{n.value="",l.value="",s.value="",i.value="",u.value="",c.value="",p.value=!0,m.value=""},w=()=>{V(),v.value=!1,h.value=null};return(0,r.sV)((()=>{k(),g(),f()})),{clientes:a,perfiles:t,perfilesFiltrados:b,usuarios:o,idcliente:n,perfil_id:l,nombre:s,apellidos:i,usuario:u,password:c,estado:p,errorMessage:m,isEditing:v,createUser:y,editUser:_,updateUser:C,toggleEstado:L,deleteUser:E,getClienteNombre:D,getPerfilNombre:A,cancelEdit:w}}};const ia=(0,m.A)(sa,[["render",la],["__scopeId","data-v-4646a8ca"]]);var ua=ia;const da={class:"upload-menu"};function ca(e,a,t,o,n,l){const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",da,[a[4]||(a[4]=(0,r.Lk)("h1",null,"Cargue de Información",-1)),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/upload/sales"},{default:(0,r.k6)((()=>a[0]||(a[0]=[(0,r.eW)("Cargar Ventas diarias")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/upload/arqueo"},{default:(0,r.k6)((()=>a[1]||(a[1]=[(0,r.eW)("Cargar Arqueo")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/upload/venta-mensual"},{default:(0,r.k6)((()=>a[2]||(a[2]=[(0,r.eW)("Cargar Venta Mensual historica")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/upload/budget"},{default:(0,r.k6)((()=>a[3]||(a[3]=[(0,r.eW)("Cargar Presupuesto")]))),_:1})])])])}var pa={name:"UploadMenu"};const ma=(0,m.A)(pa,[["render",ca],["__scopeId","data-v-445463d1"]]);var va=ma;const ha={class:"upload-sales"},ba={class:"form-group"},ka={class:"form-group"},ga=["disabled"],fa={key:0,class:"spinner"};function ya(e,a,t,o,n,l){return(0,r.uX)(),(0,r.CE)("div",ha,[a[3]||(a[3]=(0,r.Lk)("h2",null,"Cargar Ventas Diarias",-1)),a[4]||(a[4]=(0,r.Lk)("div",{class:"instructions"},[(0,r.Lk)("p",null,"Suba un archivo Excel (.xlsx) con las ventas diarias. Descargue la plantilla para usar el formato correcto."),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Columnas requeridas:"),(0,r.eW)(" Fecha, Rangos Horarios, Almacén, Cliente, Nombre Vendedor, Descripción, Uds., Importe")])],-1)),(0,r.Lk)("div",ba,[(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>l.downloadTemplate&&l.downloadTemplate(...e))},"Descargar Plantilla")]),(0,r.Lk)("div",ka,[(0,r.Lk)("input",{type:"file",ref:"fileInput",onChange:a[1]||(a[1]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:".xlsx"},null,544),(0,r.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.uploadFile&&l.uploadFile(...e)),disabled:!n.file||n.isUploading},(0,b.v_)(n.isUploading?"Subiendo...":"Subir"),9,ga),n.isUploading?((0,r.uX)(),(0,r.CE)("div",fa,"Cargando...")):(0,r.Q3)("",!0)]),(0,r.Lk)("p",{class:(0,b.C4)(["message",{error:n.messageIsError}])},(0,b.v_)(n.message),3)])}var _a=t(3230),Ca={name:"UploadSales",data(){return{file:null,message:"",messageIsError:!1,isUploading:!1}},computed:{...(0,d.aH)({token:e=>e.auth.token})},methods:{handleFileUpload(e){this.file=e.target.files[0],this.message="",this.messageIsError=!1},async uploadFile(){if(!this.file)return this.message="Por favor, seleccione un archivo",void(this.messageIsError=!0);this.isUploading=!0,this.message="",this.messageIsError=!1;const e=new FormData;e.append("file",this.file);try{const a=await P.A.post("/upload_sales",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.token}`}});console.log("Respuesta del backend:",a),this.message=a.data.message||"Cargado con éxito",this.messageIsError=!1,this.file=null,this.$refs.fileInput.value=""}catch(a){console.error("Error en la solicitud:",a),console.error("Respuesta del error:",a.response),this.message=a.response?.data?.error||"Error al subir el archivo",this.messageIsError=!0,a.response&&401===a.response.status&&(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login"))}finally{this.isUploading=!1}},downloadTemplate(){const e=["Fecha","Rangos Horarios","Almacén","Cliente","Nombre Vendedor","Descripción","Uds.","Importe"],a=["17/03/2025","MAÑANA","Alamedas","CONSUMIDOR FINAL","MAYRA ALEJANDRA PACHECO CORCHO","PLANCHITA COMBINADA","1,00","$ 30.900,00"],t=_a.Wp.aoa_to_sheet([e,a]),o=_a.Wp.book_new();_a.Wp.book_append_sheet(o,t,"Plantilla Ventas"),_a._h(o,"plantilla_ventas_diarias.xlsx")}},mounted(){this.token||(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const La=(0,m.A)(Ca,[["render",ya],["__scopeId","data-v-c3ec089a"]]);var Ea=La;const Da={class:"upload-arqueo"},Aa={class:"form-group"},Pa={class:"form-group"},Fa=["disabled"],Va={key:0,class:"spinner"};function wa(e,a,t,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Da,[a[3]||(a[3]=(0,r.Lk)("h2",null,"Cargar Arqueo de Caja",-1)),a[4]||(a[4]=(0,r.Lk)("div",{class:"instructions"},[(0,r.Lk)("p",null,"Suba un archivo Excel (.xlsx) con los datos de arqueo de caja. Descargue la plantilla para usar el formato correcto."),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Columnas requeridas (en la primera fila):"),(0,r.eW)(" AN 3, Fecha, Z, Total, BONOS, EFECTIVO, RECIBO BANCARIO, TARJETA DEBITO, TRANSFERENCIA BANCARIA, VALE")])],-1)),(0,r.Lk)("div",Aa,[(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>l.downloadTemplate&&l.downloadTemplate(...e))},"Descargar Plantilla")]),(0,r.Lk)("div",Pa,[(0,r.Lk)("input",{type:"file",ref:"fileInput",onChange:a[1]||(a[1]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:".xlsx"},null,544),(0,r.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.uploadFile&&l.uploadFile(...e)),disabled:!n.file||n.isUploading},(0,b.v_)(n.isUploading?"Subiendo...":"Subir"),9,Fa),n.isUploading?((0,r.uX)(),(0,r.CE)("div",Va,"Cargando...")):(0,r.Q3)("",!0)]),(0,r.Lk)("p",{class:(0,b.C4)(["message",{error:n.messageIsError}])},(0,b.v_)(n.message),3)])}var Na={name:"UploadArqueo",data(){return{file:null,message:"",messageIsError:!1,isUploading:!1}},computed:{...(0,d.aH)({token:e=>e.auth.token})},methods:{handleFileUpload(e){this.file=e.target.files[0],this.message="",this.messageIsError=!1},async uploadFile(){if(!this.file)return this.message="Por favor, seleccione un archivo",void(this.messageIsError=!0);this.isUploading=!0,this.message="",this.messageIsError=!1;const e=new FormData;e.append("file",this.file);try{const a=await P.A.post("/upload_arqueo",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.token}`}});console.log("Respuesta del backend:",a),this.message=a.data.message||"Cargado con éxito",this.messageIsError=!1,this.file=null,this.$refs.fileInput.value=""}catch(a){console.error("Error en la solicitud:",a),console.error("Respuesta del error:",a.response);let e=a.response?.data?.error||"Error al subir el archivo";a.response?.data?.details&&(e+=": "+JSON.stringify(a.response.data.details)),this.message=e,this.messageIsError=!0,a.response&&401===a.response.status&&(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login"))}finally{this.isUploading=!1}},downloadTemplate(){const e=["AN 3","Fecha","Z","Total","BONOS","EFECTIVO","RECIBO BANCARIO","TARJETA DEBITO","TRANSFERENCIA BANCARIA","VALE"],a=["ABA - Caja Unico","17/03/2025","3397","$ 2.642.110,00","$ 0,00","$ 971.100,00","$ 191.810,00","$ 1.179.200,00","$ 300.000,00","$ 0,00"],t=_a.Wp.aoa_to_sheet([e,a]),o=_a.Wp.book_new();_a.Wp.book_append_sheet(o,t,"Plantilla Arqueo"),_a._h(o,"plantilla_arqueo_caja.xlsx")}},mounted(){this.token||(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const Ia=(0,m.A)(Na,[["render",wa],["__scopeId","data-v-787d70e2"]]);var Xa=Ia;const Oa={class:"upload-venta-mensual"},Ka={class:"form-group"},Ra={class:"form-group"},Ta=["disabled"],xa={key:0,class:"spinner"};function Sa(e,a,t,o,n,l){return(0,r.uX)(),(0,r.CE)("div",Oa,[a[3]||(a[3]=(0,r.Lk)("h2",null,"Cargar Ventas Mensuales",-1)),a[4]||(a[4]=(0,r.Lk)("div",{class:"instructions"},[(0,r.Lk)("p",null,"Suba un archivo Excel (.xlsx) con las ventas mensuales. Descargue la plantilla para usar el formato correcto."),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Columnas requeridas (en la primera fila):"),(0,r.eW)(" Año, PDV, Mes, Venta")]),(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Notas:"),(0,r.eW)(" Use nombres de meses en español (Enero, Febrero, etc.). La columna Venta puede incluir el símbolo $ y separadores de miles (.).")])],-1)),(0,r.Lk)("div",Ka,[(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>l.downloadTemplate&&l.downloadTemplate(...e))},"Descargar Plantilla")]),(0,r.Lk)("div",Ra,[(0,r.Lk)("input",{type:"file",ref:"fileInput",onChange:a[1]||(a[1]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:".xlsx"},null,544),(0,r.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.uploadFile&&l.uploadFile(...e)),disabled:!n.file||n.isUploading},(0,b.v_)(n.isUploading?"Subiendo...":"Subir"),9,Ta),n.isUploading?((0,r.uX)(),(0,r.CE)("div",xa,"Cargando...")):(0,r.Q3)("",!0)]),(0,r.Lk)("p",{class:(0,b.C4)(["message",{error:n.messageIsError}])},(0,b.v_)(n.message),3)])}var $a={name:"UploadVentaMensual",data(){return{file:null,message:"",messageIsError:!1,isUploading:!1}},computed:{...(0,d.aH)({token:e=>e.auth.token})},methods:{handleFileUpload(e){this.file=e.target.files[0],this.message="",this.messageIsError=!1},async uploadFile(){if(!this.file)return this.message="Por favor, seleccione un archivo",void(this.messageIsError=!0);this.isUploading=!0,this.message="",this.messageIsError=!1;const e=new FormData;e.append("file",this.file);try{const a=await P.A.post("/upload_venta_mensual",e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.token}`}});console.log("Respuesta del backend:",a),this.message=a.data.message||"Cargado con éxito",this.messageIsError=!1,this.file=null,this.$refs.fileInput.value=""}catch(a){console.error("Error en la solicitud:",a),console.error("Respuesta del error:",a.response),this.message=a.response?.data?.error||"Error al subir el archivo",this.messageIsError=!0,a.response&&401===a.response.status&&(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login"))}finally{this.isUploading=!1}},downloadTemplate(){const e=["Año","PDV","Mes","Venta"],a=["2025","AAA - Caja Grand Boulevard","Enero","$39.541.846"],t=_a.Wp.aoa_to_sheet([e,a]),o=_a.Wp.book_new();_a.Wp.book_append_sheet(o,t,"Plantilla Ventas Mensuales"),_a._h(o,"plantilla_ventas_mensuales.xlsx")}},mounted(){this.token||(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const Ua=(0,m.A)($a,[["render",Sa],["__scopeId","data-v-9f10dec8"]]);var Ba=Ua;const Ma={class:"upload-budget"},Wa={class:"filters"},za=["value"],qa={class:"table-container"},ja={class:"budget-table"},Qa=["onUpdate:modelValue","onBlur","onKeydown"],Ja=["onClick"],Ha={class:"total-row"};function Ya(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",Ma,[a[10]||(a[10]=(0,r.Lk)("h1",null,"Gestión de Presupuesto de Ventas",-1)),(0,r.Lk)("div",Wa,[a[6]||(a[6]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.selectedYear=e),onChange:a[1]||(a[1]=(...e)=>s.fetchBudget&&s.fetchBudget(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,za)))),128))],544),[[o.u1,l.selectedYear]]),a[7]||(a[7]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.selectedStatus=e),onChange:a[3]||(a[3]=(...e)=>s.fetchBudget&&s.fetchBudget(...e))},a[5]||(a[5]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,l.selectedStatus]])]),(0,r.Lk)("div",qa,[(0,r.Lk)("table",ja,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[a[8]||(a[8]=(0,r.Lk)("th",null,"PDV",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.months,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e.num},(0,b.v_)(e.name),1)))),128))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.budgetData,((e,a)=>((0,r.uX)(),(0,r.CE)("tr",{key:a},[(0,r.Lk)("td",null,(0,b.v_)(e.pdv),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.months,(t=>((0,r.uX)(),(0,r.CE)("td",{key:t.num},[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":a=>e[t.num]=a,onBlur:e=>s.formatInput(a,t.num),onKeydown:(0,o.jR)((e=>s.saveOnTab(a,t.num,e)),["tab"]),placeholder:"$0"},null,40,Qa),[[o.Jo,e[t.num]]]),e[t.num]&&"$0"!==e[t.num]&&0!==e[t.num]?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"delete-btn",onClick:a=>s.deleteEntry(e.pdv,t.num)},"X",8,Ja)):(0,r.Q3)("",!0)])))),128))])))),128)),(0,r.Lk)("tr",Ha,[a[9]||(a[9]=(0,r.Lk)("td",null,"Total",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.months,(e=>((0,r.uX)(),(0,r.CE)("td",{key:e.num},(0,b.v_)(s.formatCurrency(l.totals[e.num])),1)))),128))])])])]),(0,r.Lk)("button",{onClick:a[4]||(a[4]=(...e)=>s.saveBudget&&s.saveBudget(...e))},"Guardar Presupuesto")])}t(1701),t(8237);var Ga={name:"UploadBudget",computed:{...(0,d.aH)({token:e=>e.auth.token})},data(){return{selectedYear:(new Date).getFullYear(),years:Array.from({length:5},((e,a)=>(new Date).getFullYear()+a-2)),selectedStatus:"Activo",months:[{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}],budgetData:[],totals:{}}},methods:{async fetchBudget(){try{const e=await P.A.get("/budget/sales",{params:{year:this.selectedYear,status:this.selectedStatus}});this.budgetData=e.data.data.map((e=>({...e,...Object.fromEntries(Object.entries(e).map((([e,a])=>"pdv"!==e&&a?[e,this.formatCurrency(a)]:[e,a])))}))),this.totals=e.data.totals,this.updateTotals()}catch(e){console.error("Error fetching budget:",e),e.response&&401===e.response.status&&(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login"))}},formatInput(e,a){let t=this.budgetData[e][a];if(t&&"string"===typeof t){const o=t.replace(/[^0-9]/g,"");if(!isNaN(o)&&""!==o){const t=parseFloat(o);this.budgetData[e][a]=this.formatCurrency(t),this.updateTotals()}}},formatCurrency(e){return e?new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e):"$0"},updateTotals(){this.totals=this.months.reduce(((e,a)=>(e[a.num]=this.budgetData.reduce(((e,t)=>{const o=t[a.num]&&parseFloat(t[a.num].toString().replace(/[^0-9]/g,""))||0;return e+o}),0),e)),{})},async saveBudget(){try{const e=this.budgetData.map((e=>{const a={pdv:e.pdv};return this.months.forEach((t=>{if(e[t.num]&&"$0"!==e[t.num]&&0!==e[t.num]){const o=e[t.num].toString().replace(/[^0-9]/g,"");a[t.num]=parseFloat(o)}})),a}));console.log("Datos enviados:",e),await P.A.post("/budget/sales",{year:this.selectedYear,budget:e}),alert("Presupuesto guardado exitosamente"),this.fetchBudget()}catch(e){console.error("Error saving budget:",e),e.response&&401===e.response.status?(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login")):alert("Error al guardar el presupuesto")}},async saveOnTab(e,a,t){t.preventDefault(),await this.formatInput(e,a),await this.saveBudget()},async deleteEntry(e,a){if(confirm(`¿Eliminar el presupuesto de ${e} para ${this.months[a-1].name} ${this.selectedYear}?`))try{await P.A.delete("/budget/sales/delete",{data:{year:this.selectedYear,pdv:e,month:a}}),this.fetchBudget()}catch(t){console.error("Error deleting budget:",t),t.response&&401===t.response.status?(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login")):alert("Error al eliminar el presupuesto")}}},mounted(){this.token?this.fetchBudget():(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const Za=(0,m.A)(Ga,[["render",Ya],["__scopeId","data-v-245d66e7"]]);var et=Za;const at={class:"dashboard-menu"};function tt(e,a,t,o,n,l){const s=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",at,[a[8]||(a[8]=(0,r.Lk)("h1",null,"Menú de Dashboards",-1)),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/historical-sales"},{default:(0,r.k6)((()=>a[0]||(a[0]=[(0,r.eW)("Ventas Históricas")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/monthly-performance"},{default:(0,r.k6)((()=>a[1]||(a[1]=[(0,r.eW)("Rendimiento Mensual")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/daily-sales"},{default:(0,r.k6)((()=>a[2]||(a[2]=[(0,r.eW)("Venta Diaria por PDV")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/sales-by-time-slot"},{default:(0,r.k6)((()=>a[3]||(a[3]=[(0,r.eW)("Ventas por Franja del Día")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/sales-by-payment-method"},{default:(0,r.k6)((()=>a[4]||(a[4]=[(0,r.eW)("Ventas por Medio de Pago")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/sales-by-product"},{default:(0,r.k6)((()=>a[5]||(a[5]=[(0,r.eW)("Ventas por Producto")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/sales-by-seller"},{default:(0,r.k6)((()=>a[6]||(a[6]=[(0,r.eW)("Ventas por Asesor")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(s,{to:"/dashboard/accumulated-sales-by-pdv"},{default:(0,r.k6)((()=>a[7]||(a[7]=[(0,r.eW)("Venta Acumulada por PDV")]))),_:1})])])])}var ot={name:"DashboardMenu"};const rt=(0,m.A)(ot,[["render",tt],["__scopeId","data-v-8b855264"]]);var nt=rt;const lt={class:"historical-sales"},st={class:"filters"},it=["value"],ut=["value"],dt=["value"];function ct(e,a,t,n,l,s){const i=(0,r.g2)("vue-good-table");return(0,r.uX)(),(0,r.CE)("div",lt,[a[16]||(a[16]=(0,r.Lk)("h1",null,"Ventas Históricas",-1)),(0,r.Lk)("div",st,[a[12]||(a[12]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.selectedYear=e),onChange:a[1]||(a[1]=(...e)=>s.fetchData&&s.fetchData(...e))},[a[8]||(a[8]=(0,r.Lk)("option",{value:null},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,it)))),128))],544),[[o.u1,l.selectedYear]]),a[13]||(a[13]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.selectedMonth=e),onChange:a[3]||(a[3]=(...e)=>s.fetchData&&s.fetchData(...e))},[a[9]||(a[9]=(0,r.Lk)("option",{value:null},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.months,((e,a)=>((0,r.uX)(),(0,r.CE)("option",{key:a,value:a+1},(0,b.v_)(e),9,ut)))),128))],544),[[o.u1,l.selectedMonth]]),a[14]||(a[14]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>l.selectedStatus=e),onChange:a[5]||(a[5]=(...e)=>s.fetchData&&s.fetchData(...e))},a[10]||(a[10]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,l.selectedStatus]]),a[15]||(a[15]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>l.selectedPDV=e),onChange:a[7]||(a[7]=(...e)=>s.fetchData&&s.fetchData(...e))},[a[11]||(a[11]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.pdvList,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,dt)))),128))],544),[[o.u1,l.selectedPDV]])]),a[17]||(a[17]=(0,r.Lk)("div",{class:"chart-container"},[(0,r.Lk)("canvas",{id:"salesChart"})],-1)),(0,r.bF)(i,{columns:l.pivotColumns,rows:l.filteredPivotData},null,8,["columns","rows"])])}t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698);var pt=t(9950),mt=(t(2681),t(6591)),vt={name:"HistoricalSales",components:{VueGoodTable:pt.A},data(){return{selectedYear:null,selectedMonth:null,selectedStatus:"Activo",selectedPDV:"Todos",years:Array.from({length:8},((e,a)=>2018+a)),months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],pdvList:[],pivotColumns:[],pivotData:[],filteredPivotData:[],chart:null,chartColors:["rgba(75, 192, 192, 0.5)","rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)","rgba(0, 128, 0, 0.5)"],borderColors:["rgba(75, 192, 192, 0.5)","rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)","rgba(0, 128, 0, 0.5)"]}},methods:{async fetchData(){console.log("Token en el store:",this.$store.state.auth.token);try{const e={};this.selectedYear&&(e.year=this.selectedYear),this.selectedMonth&&(e.month=this.selectedMonth),e.status=this.selectedStatus,"Todos"!==this.selectedPDV&&(e.pdv=this.selectedPDV);const a=await P.A.get("/dashboard/historical_sales",{params:e}),t=a.data;this.pivotColumns=[{label:"PDV",field:"pdv"},...t.years.map((e=>({label:e.toString(),field:e.toString(),type:"number",formatFn:this.formatCurrency})))],this.pivotData=t.data,this.pdvList=[...new Set(t.data.filter((e=>"Total"!==e.pdv)).map((e=>e.pdv)))].sort(),this.updateFilteredData(),this.updateChart(t)}catch(e){console.error("Error fetching data:",e),this.pivotData=[],this.filteredPivotData=[],this.pdvList=[]}},updateFilteredData(){"Todos"===this.selectedPDV?this.filteredPivotData=this.pivotData:this.filteredPivotData=this.pivotData.filter((e=>e.pdv===this.selectedPDV||"Total"===e.pdv))},formatCurrency(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}).format(e)},updateChart(e){const a=document.getElementById("salesChart").getContext("2d"),t=e.data.filter((e=>"Total"!==e.pdv)).map((e=>e.pdv)),o=e.years,r=o.map(((a,t)=>({label:a.toString(),data:e.data.filter((e=>"Total"!==e.pdv)).map((e=>e[a]||0)),backgroundColor:this.chartColors[t%this.chartColors.length],borderColor:this.borderColors[t%this.borderColors.length],borderWidth:1})));this.chart&&this.chart.destroy(),this.chart=new mt.Ay(a,{type:"bar",data:{labels:t,datasets:r},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{callback:e=>this.formatCurrency(e)}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label:e=>`${e.dataset.label}: ${this.formatCurrency(e.raw)}`}},datalabels:{display:!1}}}})}},mounted(){this.$store.state.auth.token?this.fetchData():(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const ht=(0,m.A)(vt,[["render",ct],["__scopeId","data-v-5069e1bb"]]);var bt=ht;const kt={class:"monthly-performance"},gt={class:"filters"},ft=["value"],yt=["value"],_t=["value"],Ct={key:0,class:"charts-container"},Lt={class:"chart"},Et={class:"chart"},Dt={key:1,class:"additional-charts-container"},At={class:"chart additional-chart"},Pt={class:"chart additional-chart"},Ft={key:2,class:"no-data"},Vt={class:"table-container"},wt={class:"performance-table"},Nt={key:0,class:"total-row"};function It(e,a,t,n,l,s){const i=(0,r.g2)("BarChart"),u=(0,r.g2)("PieChart");return(0,r.uX)(),(0,r.CE)("div",kt,[(0,r.Lk)("h1",null,"Rendimiento Mensual - "+(0,b.v_)(n.months[n.month-1].name)+" "+(0,b.v_)(n.year),1),(0,r.Lk)("div",gt,[a[10]||(a[10]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,ft)))),128))],544),[[o.u1,n.year]]),a[11]||(a[11]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,yt)))),128))],544),[[o.u1,n.month]]),a[12]||(a[12]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.status=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},a[8]||(a[8]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[13]||(a[13]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.selectedPDV=e),onChange:a[7]||(a[7]=(...e)=>n.updateFilteredData&&n.updateFilteredData(...e))},[a[9]||(a[9]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvList,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,_t)))),128))],544),[[o.u1,n.selectedPDV]])]),n.filteredDashboardData.length>0?((0,r.uX)(),(0,r.CE)("div",Ct,[(0,r.Lk)("div",Lt,[a[14]||(a[14]=(0,r.Lk)("h3",null,"Venta Acumulada vs Presupuesto por PDV",-1)),(0,r.bF)(i,{data:n.salesVsBudgetChartData,options:n.chartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Et,[a[15]||(a[15]=(0,r.Lk)("h3",null,"Distribución de Venta Acumulada por PDV",-1)),(0,r.bF)(u,{data:n.salesDistributionChartData,options:n.chartOptions},null,8,["data","options"])])])):(0,r.Q3)("",!0),n.filteredDashboardData.length>0?((0,r.uX)(),(0,r.CE)("div",Dt,[(0,r.Lk)("div",At,[a[16]||(a[16]=(0,r.Lk)("h3",null,"% Cumplimiento Proy vs Ppto y Saldo para Cumplir por PDV",-1)),(0,r.bF)(i,{data:n.cumpVsSaldoChartData,options:n.cumpVsSaldoChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Pt,[a[17]||(a[17]=(0,r.Lk)("h3",null,"Venta Acumulada vs Venta Año Anterior por PDV",-1)),(0,r.bF)(i,{data:n.salesVsPrevYearChartData,options:n.salesVsPrevYearChartOptions},null,8,["data","options"])])])):(0,r.Q3)("",!0),0===n.filteredDashboardData.length?((0,r.uX)(),(0,r.CE)("div",Ft,a[18]||(a[18]=[(0,r.Lk)("p",null,"No hay datos disponibles o cargando...",-1)]))):(0,r.Q3)("",!0),(0,r.Lk)("div",Vt,[(0,r.Lk)("table",wt,[a[20]||(a[20]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"PDV"),(0,r.Lk)("th",null,"Venta Acum"),(0,r.Lk)("th",null,"Venta Proy"),(0,r.Lk)("th",null,"Presupuesto"),(0,r.Lk)("th",null,"Cump a la Fecha"),(0,r.Lk)("th",null,"% Cump Proy vs Ppto"),(0,r.Lk)("th",null,"Saldo para Cumplir"),(0,r.Lk)("th",null,"Venta Año Anterior"),(0,r.Lk)("th",null,"Crecimiento (%)"),(0,r.Lk)("th",null,"Crecimiento ($)")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredDashboardData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.pdv},[(0,r.Lk)("td",null,(0,b.v_)(e.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.venta_acum)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.venta_proy)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.presupuesto)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.cump_fecha)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatPercent(e.cump_percent))+" "+(0,b.v_)(e.cump_icon),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.saldo)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.venta_prev)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatPercent(e.crecimiento_percent)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.crecimiento_valor)),1)])))),128)),n.filteredDashboardData.length>0?((0,r.uX)(),(0,r.CE)("tr",Nt,[a[19]||(a[19]=(0,r.Lk)("td",null,"Total",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.venta_acum)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.venta_proy)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.presupuesto)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.cump_fecha)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatPercent(n.filteredTotals.cump_percent))+" "+(0,b.v_)(n.filteredTotals.cump_icon),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.saldo)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.venta_prev)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatPercent(n.filteredTotals.crecimiento_percent)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.crecimiento_valor)),1)])):(0,r.Q3)("",!0)])])])])}var Xt=t(17),Ot=t(1010),Kt=t(3408);Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Xt.Bs,Xt.No,Xt.FN,Kt.A);var Rt={name:"MonthlyPerformance",components:{BarChart:Ot.yP,PieChart:Ot.Fq},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(2025),o=(0,F.KR)(Array.from({length:5},((e,a)=>(new Date).getFullYear()+a-2))),n=(0,F.KR)(1),l=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),s=(0,F.KR)("Activo"),i=(0,F.KR)("Todos"),u=(0,F.KR)([]),p=(0,F.KR)([]),m=(0,F.KR)([]),v=(0,F.KR)({}),h=(0,F.KR)({responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:e=>{let a=e.dataset.label||"";a&&(a+=": ");const t=e.raw||0;return a+new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}}},datalabels:{display:!1},legend:{position:"top"}}}),b=(0,F.KR)({responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Saldo para Cumplir (COP)"},ticks:{callback:e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}},y1:{position:"right",beginAtZero:!0,max:200,title:{display:!0,text:"% Cumplimiento Proy vs Ppto"},ticks:{callback:e=>`${e}%`},grid:{drawOnChartArea:!1}},x:{title:{display:!0,text:"PDV"}}},plugins:{tooltip:{callbacks:{label:e=>{let a=e.dataset.label||"";a&&(a+=": ");const t=e.raw||0;return"y1"===e.dataset.yAxisID?a+`${t}%`:a+new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}}},datalabels:{display:!1},legend:{position:"top"}}}),k=(0,F.KR)({responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Valor (COP)"},ticks:{callback:e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}},x:{title:{display:!0,text:"PDV"}}},plugins:{tooltip:{callbacks:{label:e=>{let a=e.dataset.label||"";a&&(a+=": ");const t=e.raw||0;return a+new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}}},datalabels:{display:!1},legend:{position:"top"}}}),g=(0,r.EW)((()=>({labels:m.value.map((e=>e.pdv)),datasets:[{label:"Venta Acumulada",backgroundColor:"rgba(75, 192, 192, 0.6)",data:m.value.map((e=>Number(e.venta_acum)||0))},{label:"Presupuesto",backgroundColor:"rgba(54, 162, 235, 0.6)",data:m.value.map((e=>Number(e.presupuesto)||0))}]}))),f=(0,r.EW)((()=>({labels:m.value.map((e=>e.pdv)),datasets:[{label:"Distribución de Venta Acumulada",backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#7BCB7B","#FF6F61"],data:m.value.map((e=>Number(e.venta_acum)||0))}]}))),y=(0,r.EW)((()=>({labels:m.value.map((e=>e.pdv)),datasets:[{label:"Saldo para Cumplir",type:"bar",backgroundColor:"rgba(255, 99, 132, 0.6)",data:m.value.map((e=>Number(e.saldo)||0)),yAxisID:"y"},{label:"% Cump Proy vs Ppto",type:"line",borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)",data:m.value.map((e=>Number(e.cump_percent)||0)),yAxisID:"y1",fill:!1,tension:.1}]}))),_=(0,r.EW)((()=>({labels:m.value.map((e=>e.pdv)),datasets:[{label:"Venta Acumulada",backgroundColor:"rgba(75, 192, 192, 0.6)",data:m.value.map((e=>Number(e.venta_acum)||0))},{label:"Venta Año Anterior",backgroundColor:"rgba(153, 102, 255, 0.6)",data:m.value.map((e=>Number(e.venta_prev)||0))}]}))),C=(0,r.EW)((()=>0===m.value.length?{}:m.value.reduce(((e,a)=>({venta_acum:(e.venta_acum||0)+(Number(a.venta_acum)||0),venta_proy:(e.venta_proy||0)+(Number(a.venta_proy)||0),presupuesto:(e.presupuesto||0)+(Number(a.presupuesto)||0),cump_fecha:(e.cump_fecha||0)+(Number(a.cump_fecha)||0),cump_percent:a.cump_percent,cump_icon:a.cump_icon,saldo:(e.saldo||0)+(Number(a.saldo)||0),venta_prev:(e.venta_prev||0)+(Number(a.venta_prev)||0),crecimiento_percent:a.crecimiento_percent,crecimiento_valor:(e.crecimiento_valor||0)+(Number(a.crecimiento_valor)||0)})),{}))),L=async()=>{console.log("Token en el store:",e.state.auth.token);try{const e=await P.A.get("/dashboard/monthly-performance",{params:{year:t.value,month:n.value,status:s.value}});console.log("Datos recibidos:",e.data),p.value=e.data.data||[],v.value=e.data.totals||{},u.value=[...new Set(p.value.map((e=>e.pdv)))].sort(),E()}catch(o){console.error("Error fetching dashboard data:",o),p.value=[],v.value={},u.value=[],m.value=[],o.response&&401===o.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},E=()=>{"Todos"===i.value?m.value=p.value:m.value=p.value.filter((e=>e.pdv===i.value))},D=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),A=e=>new Intl.NumberFormat("es-CO",{style:"percent",minimumFractionDigits:2}).format(e/100);return(0,r.sV)((()=>{e.state.auth.token?L():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),{year:t,years:o,month:n,months:l,status:s,selectedPDV:i,pdvList:u,dashboardData:p,filteredDashboardData:m,totals:v,filteredTotals:C,chartOptions:h,cumpVsSaldoChartOptions:b,salesVsPrevYearChartOptions:k,salesVsBudgetChartData:g,salesDistributionChartData:f,cumpVsSaldoChartData:y,salesVsPrevYearChartData:_,fetchData:L,updateFilteredData:E,formatCurrency:D,formatPercent:A}}};const Tt=(0,m.A)(Rt,[["render",It],["__scopeId","data-v-631e5566"]]);var xt=Tt;const St={class:"daily-sales"},$t={class:"filters"},Ut=["value"],Bt=["value"],Mt=["value"],Wt=["value"],zt={key:0,class:"no-data-message"},qt={key:1,class:"charts-container"},jt={class:"chart-wrapper"},Qt={class:"chart-wrapper"},Jt={class:"pdv-selector"},Ht=["value"],Yt={key:2,class:"table-container"},Gt={class:"sales-table"},Zt={key:0,class:"total-row"};function eo(e,a,t,n,l,s){const i=(0,r.g2)("Bar"),u=(0,r.g2)("Line");return(0,r.uX)(),(0,r.CE)("div",St,[(0,r.Lk)("h1",null,"Venta Diaria por PDV - "+(0,b.v_)(n.months[n.month-1].name)+" "+(0,b.v_)(n.year),1),(0,r.Lk)("div",$t,[a[14]||(a[14]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Ut)))),128))],544),[[o.u1,n.year]]),a[15]||(a[15]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.updateDaysAndFetch&&n.updateDaysAndFetch(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,Bt)))),128))],544),[[o.u1,n.month]]),a[16]||(a[16]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.status=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},a[11]||(a[11]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[17]||(a[17]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.selectedPDV=e),onChange:a[7]||(a[7]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[12]||(a[12]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Mt)))),128))],544),[[o.u1,n.selectedPDV]]),a[18]||(a[18]=(0,r.Lk)("label",null,"Día:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedDay=e),onChange:a[9]||(a[9]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[13]||(a[13]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.daysInMonth,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Wt)))),128))],544),[[o.u1,n.selectedDay]])]),n.noData?((0,r.uX)(),(0,r.CE)("div",zt," No hay datos disponibles para el mes, año y filtros seleccionados. ")):(0,r.Q3)("",!0),n.noData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",qt,[(0,r.Lk)("div",jt,[a[19]||(a[19]=(0,r.Lk)("h2",null,"Ventas Totales por PDV",-1)),(0,r.bF)(i,{data:n.barChartData,options:n.barChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Qt,[a[22]||(a[22]=(0,r.Lk)("h2",null,"Tendencia de Ventas Diarias",-1)),(0,r.Lk)("div",Jt,[a[21]||(a[21]=(0,r.Lk)("label",null,"Seleccionar PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>n.selectedPdv=e)},[a[20]||(a[20]=(0,r.Lk)("option",{value:"total"},"Total (Todos los PDVs)",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Ht)))),128))],512),[[o.u1,n.selectedPdv]])]),(0,r.bF)(u,{data:n.lineChartData,options:n.lineChartOptions},null,8,["data","options"])])])),n.noData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",Yt,[(0,r.Lk)("table",Gt,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[a[23]||(a[23]=(0,r.Lk)("th",null,"Fecha",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e},(0,b.v_)(e),1)))),128)),a[24]||(a[24]=(0,r.Lk)("th",null,"Total",-1))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredDailySalesData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.date},[(0,r.Lk)("td",null,(0,b.v_)(e.date),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(a=>((0,r.uX)(),(0,r.CE)("td",{key:a},(0,b.v_)(n.formatCurrency(e[a])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.total)),1)])))),128)),n.filteredDailySalesData.length>0?((0,r.uX)(),(0,r.CE)("tr",Zt,[(0,r.Lk)("td",null,(0,b.v_)(n.filteredTotals.date),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("td",{key:e},(0,b.v_)(n.formatCurrency(n.filteredTotals[e])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.total)),1)])):(0,r.Q3)("",!0)])])]))])}t(1148),t(8422);Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.No,Xt.FN,Xt.PP,Xt.kc,Xt.UA,Kt.A);var ao={name:"DailySales",components:{Bar:Ot.yP,Line:Ot.N1},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(null),o=(0,F.KR)([]),n=new Date,l=n.getMonth()+1,s=n.getFullYear(),i=(0,F.KR)(l),u=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),p=(0,F.KR)("Activo"),m=(0,F.KR)("Todos"),v=(0,F.KR)("Todos"),h=(0,F.KR)([]),b=(0,F.KR)([]),k=(0,F.KR)([]),g=(0,F.KR)([]),f=(0,F.KR)([]),y=(0,F.KR)({}),_=(0,F.KR)({}),C=(0,F.KR)("total"),L=(0,r.EW)((()=>{const e=0===k.value.length||k.value.every((e=>0===e.total));return console.log("noData:",e,"filteredDailySalesData:",k.value),e})),E=()=>{if(!t.value||!i.value)return;const e={1:31,2:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31};2!==i.value||t.value%4!==0||t.value%100===0&&t.value%400!==0||(e[2]=29);const a=e[i.value]||30;h.value=Array.from({length:a},((e,a)=>a+1)),v.value="Todos"},D=async()=>{try{const e=await P.A.get("/available-years");o.value=e.data.years||[],o.value.length>0&&(t.value=o.value.includes(s)?s:o.value[0],E(),A())}catch(e){console.error("Error fetching available years:",e),o.value=Array.from({length:5},((e,a)=>s+a-2)),t.value=s,E(),e.response&&401===e.response.status?(console.log("No autorizado en available-years, redirigiendo al login"),a.push("/login")):A()}},A=async()=>{if(t.value)try{const e={year:t.value,month:i.value,status:p.value};"Todos"!==m.value&&(e.pdv=m.value),"Todos"!==v.value&&(e.day=v.value);const a=await P.A.get("/dashboard/daily-sales",{params:e});b.value=a.data.data||[],g.value=a.data.pdvs||[],y.value=a.data.totals||{},V(),console.log("Datos recibidos:",{dailySalesData:b.value,pdvs:g.value,totals:y.value})}catch(e){console.error("Error fetching daily sales data:",e),b.value=[],g.value=[],y.value={},k.value=[],f.value=[],_.value={},e.response&&401===e.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},V=()=>{if("Todos"===m.value?f.value=g.value:f.value=g.value.filter((e=>e===m.value)),"Todos"===v.value)k.value=b.value;else{const e=v.value.toString().padStart(2,"0"),a=i.value.toString().padStart(2,"0"),o=`${e}/${a}/${t.value}`;k.value=b.value.filter((e=>e.date.includes(o)))}_.value={date:"TOTALES"},f.value.forEach((e=>{_.value[e]=k.value.reduce(((a,t)=>a+(t[e]||0)),0)})),_.value.total=k.value.reduce(((e,a)=>e+a.total),0)},w=()=>{E(),A()},N=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),I=(0,r.EW)((()=>{const e={labels:f.value,datasets:[{label:"Ventas Totales (COP)",data:f.value.map((e=>_.value[e]||0)),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]};return console.log("barChartData:",e),e})),X={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},x:{title:{display:!0,text:"Punto de Venta"}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.y),a}}},datalabels:{display:!0,anchor:"center",align:"center",color:"#fff",font:{size:11,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},O=(0,r.EW)((()=>{const e=k.value.map((e=>{const a=e.date.split(", ")[1],[t,o,r]=a.split("/");return`${r}-${o}-${t}`}));let a;a="total"===C.value?k.value.map((e=>e.total)):k.value.map((e=>e[C.value]||0));const t={labels:e,datasets:[{label:"total"===C.value?"Ventas Totales (COP)":`Ventas de ${C.value} (COP)`,data:a,fill:!1,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",tension:.1}]};return console.log("lineChartData:",t),t})),K={responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"dd/MM/yyyy",displayFormats:{day:"dd/MM/yyyy"}},title:{display:!0,text:"Fecha"}},y:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.y),a}}},datalabels:{display:!1}}};return(0,r.sV)((()=>{e.state.auth.token?D():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),(0,r.wB)(C,(()=>{console.log("PDV seleccionado cambiado a:",C.value)})),{year:t,years:o,month:i,months:u,status:p,selectedPDV:m,selectedDay:v,daysInMonth:h,dailySalesData:b,filteredDailySalesData:k,pdvs:g,filteredPdvs:f,totals:y,filteredTotals:_,noData:L,selectedPdv:C,barChartData:I,barChartOptions:X,lineChartData:O,lineChartOptions:K,fetchData:A,updateDaysAndFetch:w,formatCurrency:N}}};const to=(0,m.A)(ao,[["render",eo],["__scopeId","data-v-04f231ec"]]);var oo=to;const ro={class:"sales-by-time-slot"},no={class:"filters"},lo=["value"],so=["value"],io=["value"],uo=["value"],co={key:0,class:"no-data-message"},po={key:1},mo={class:"charts-container"},vo={class:"chart-wrapper bar-chart"},ho={class:"chart-wrapper pie-chart"},bo={class:"table-container"},ko={class:"sales-table"},go={key:0,class:"total-row"};function fo(e,a,t,n,l,s){const i=(0,r.g2)("Bar"),u=(0,r.g2)("Pie");return(0,r.uX)(),(0,r.CE)("div",ro,[(0,r.Lk)("h1",null,"Ventas por Franja del Día - "+(0,b.v_)(n.months[n.month-1].name)+" "+(0,b.v_)(n.year),1),(0,r.Lk)("div",no,[a[13]||(a[13]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,lo)))),128))],544),[[o.u1,n.year]]),a[14]||(a[14]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.updateDaysAndFetch&&n.updateDaysAndFetch(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,so)))),128))],544),[[o.u1,n.month]]),a[15]||(a[15]=(0,r.Lk)("label",null,"Día:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.selectedDay=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[10]||(a[10]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.daysInMonth,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,io)))),128))],544),[[o.u1,n.selectedDay]]),a[16]||(a[16]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.status=e),onChange:a[7]||(a[7]=(...e)=>n.fetchData&&n.fetchData(...e))},a[11]||(a[11]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[17]||(a[17]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedPDV=e),onChange:a[9]||(a[9]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[12]||(a[12]=(0,r.Lk)("option",{value:"Todos"},"Todos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,uo)))),128))],544),[[o.u1,n.selectedPDV]])]),n.noData?((0,r.uX)(),(0,r.CE)("div",co," No hay datos disponibles para el mes, año y filtros seleccionados. ")):(0,r.Q3)("",!0),n.noData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",po,[(0,r.Lk)("div",mo,[(0,r.Lk)("div",vo,[a[18]||(a[18]=(0,r.Lk)("h2",null,"Ventas por Franja del Día por PDV",-1)),(0,r.bF)(i,{data:n.stackedBarChartData,options:n.stackedBarChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",ho,[a[19]||(a[19]=(0,r.Lk)("h2",null,"Distribución de Ventas por Franja",-1)),(0,r.bF)(u,{data:n.pieChartData,options:n.pieChartOptions},null,8,["data","options"])])]),(0,r.Lk)("div",bo,[(0,r.Lk)("table",ko,[a[20]||(a[20]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"PDV"),(0,r.Lk)("th",null,"Mañana"),(0,r.Lk)("th",null,"% Part"),(0,r.Lk)("th",null,"Tarde"),(0,r.Lk)("th",null,"% Part"),(0,r.Lk)("th",null,"Noche"),(0,r.Lk)("th",null,"% Part"),(0,r.Lk)("th",null,"Total")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredSalesData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.pdv},[(0,r.Lk)("td",null,(0,b.v_)(e.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.morning_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(e.morning_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.afternoon_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(e.afternoon_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.night_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(e.night_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.total)),1)])))),128)),n.filteredSalesData.length>0?((0,r.uX)(),(0,r.CE)("tr",go,[(0,r.Lk)("td",null,(0,b.v_)(n.filteredTotals.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.morning_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(n.filteredTotals.morning_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.afternoon_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(n.filteredTotals.afternoon_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.night_sales)),1),(0,r.Lk)("td",null,(0,b.v_)(n.filteredTotals.night_part)+"%",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.total)),1)])):(0,r.Q3)("",!0)])])])]))])}Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Xt.Bs,Kt.A);var yo={name:"SalesByTimeSlot",components:{Bar:Ot.yP,Pie:Ot.Fq},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(null),o=(0,F.KR)([]),n=new Date,l=n.getMonth()+1,s=n.getFullYear(),i=(0,F.KR)(l),u=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),p=(0,F.KR)("Activo"),m=(0,F.KR)("Todos"),v=(0,F.KR)("Todos"),h=(0,F.KR)([]),b=(0,F.KR)([]),k=(0,F.KR)([]),g=(0,F.KR)([]),f=(0,F.KR)([]),y=(0,F.KR)({}),_=(0,F.KR)({}),C=(0,r.EW)((()=>{const e=0===k.value.length||k.value.every((e=>0===e.total));return console.log("noData:",e,"filteredSalesData:",k.value),e})),L=()=>{if(!t.value||!i.value)return;const e={1:31,2:28,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31};2!==i.value||t.value%4!==0||t.value%100===0&&t.value%400!==0||(e[2]=29);const a=e[i.value]||30;h.value=Array.from({length:a},((e,a)=>a+1)),v.value="Todos"},E=async()=>{try{const e=await P.A.get("/available-years");o.value=e.data.years||[],o.value.length>0&&(t.value=o.value.includes(s)?s:o.value[0],L(),D())}catch(e){console.error("Error fetching available years:",e),o.value=Array.from({length:5},((e,a)=>s+a-2)),t.value=s,L(),e.response&&401===e.response.status?(console.log("No autorizado en available-years, redirigiendo al login"),a.push("/login")):D()}},D=async()=>{if(t.value)try{const e={year:t.value,month:i.value,status:p.value};"Todos"!==m.value&&(e.pdv=m.value),"Todos"!==v.value&&(e.day=v.value);const a=await P.A.get("/dashboard/sales-by-time-slot",{params:e});b.value=a.data.data||[],g.value=a.data.pdvs||[],y.value=a.data.totals||{},A(),console.log("Datos recibidos:",{salesData:b.value,pdvs:g.value,totals:y.value})}catch(e){console.error("Error fetching sales by time slot data:",e),b.value=[],g.value=[],y.value={},k.value=[],f.value=[],_.value={},e.response&&401===e.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},A=()=>{"Todos"===m.value?(f.value=g.value,k.value=b.value):(f.value=g.value.filter((e=>e===m.value)),k.value=b.value.filter((e=>e.pdv===m.value))),_.value={pdv:"TOTALES",morning_sales:k.value.reduce(((e,a)=>e+a.morning_sales),0),afternoon_sales:k.value.reduce(((e,a)=>e+a.afternoon_sales),0),night_sales:k.value.reduce(((e,a)=>e+a.night_sales),0),total:k.value.reduce(((e,a)=>e+a.total),0)},_.value.morning_part=_.value.total>0?Math.round(_.value.morning_sales/_.value.total*100):0,_.value.afternoon_part=_.value.total>0?Math.round(_.value.afternoon_sales/_.value.total*100):0,_.value.night_part=_.value.total>0?Math.round(_.value.night_sales/_.value.total*100):0},V=()=>{L(),D()},w=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),N=(0,r.EW)((()=>{const e={labels:f.value,datasets:[{label:"Mañana",data:k.value.map((e=>e.morning_sales)),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,stack:"Stack 0"},{label:"Tarde",data:k.value.map((e=>e.afternoon_sales)),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,stack:"Stack 0"},{label:"Noche",data:k.value.map((e=>e.night_sales)),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,stack:"Stack 0"}]};return console.log("stackedBarChartData:",e),e})),I={responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Punto de Venta"}},y:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}},stacked:!0}},plugins:{legend:{display:!0},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.y),a}}},datalabels:{display:!0,anchor:"center",align:"center",color:"#fff",font:{size:11,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},X=(0,r.EW)((()=>{const e={labels:["Mañana","Tarde","Noche"],datasets:[{label:"Distribución de Ventas",data:[_.value.morning_sales||0,_.value.afternoon_sales||0,_.value.night_sales||0],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]};return console.log("pieChartData:",e),e})),O={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(e){let a=e.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed),a}}},datalabels:{display:!0,anchor:"center",align:"center",color:"#fff",font:{size:14,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}};return(0,r.sV)((()=>{e.state.auth.token?E():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),{year:t,years:o,month:i,months:u,status:p,selectedPDV:m,selectedDay:v,daysInMonth:h,salesData:b,filteredSalesData:k,pdvs:g,filteredPdvs:f,totals:y,filteredTotals:_,noData:C,stackedBarChartData:N,stackedBarChartOptions:I,pieChartData:X,pieChartOptions:O,fetchData:D,updateDaysAndFetch:V,formatCurrency:w}}};const _o=(0,m.A)(yo,[["render",fo],["__scopeId","data-v-a73ae8e8"]]);var Co=_o;const Lo={class:"sales-by-payment-method"},Eo={key:0},Do={class:"filters"},Ao=["value"],Po=["value"],Fo=["value"],Vo=["value"],wo={key:0,class:"no-data-message"},No={key:1},Io={class:"charts-container"},Xo={class:"chart-wrapper bar-chart"},Oo={class:"chart-wrapper pie-chart"},Ko={class:"table-container"},Ro={class:"sales-table"},To={key:0,class:"total-row"};function xo(e,a,t,n,l,s){const i=(0,r.g2)("Bar"),u=(0,r.g2)("Pie");return(0,r.uX)(),(0,r.CE)("div",Lo,[(0,r.Lk)("h1",null,[(0,r.eW)(" Ventas por Medio de Pago - "+(0,b.v_)(n.months[n.month-1].name)+" ",1),n.day?((0,r.uX)(),(0,r.CE)("span",Eo,(0,b.v_)(n.day),1)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,b.v_)(n.year),1)]),(0,r.Lk)("div",Do,[a[13]||(a[13]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Ao)))),128))],544),[[o.u1,n.year]]),a[14]||(a[14]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,Po)))),128))],544),[[o.u1,n.month]]),a[15]||(a[15]=(0,r.Lk)("label",null,"Día:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.day=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[10]||(a[10]=(0,r.Lk)("option",{value:null},"Todo el mes",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.days,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Fo)))),128))],544),[[o.u1,n.day]]),a[16]||(a[16]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.status=e),onChange:a[7]||(a[7]=(...e)=>n.updatePdvsAndFetchData&&n.updatePdvsAndFetchData(...e))},a[11]||(a[11]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[17]||(a[17]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedPdv=e),onChange:a[9]||(a[9]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[12]||(a[12]=(0,r.Lk)("option",{value:null},"Todos los PDVs",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Vo)))),128))],544),[[o.u1,n.selectedPdv]])]),n.noData?((0,r.uX)(),(0,r.CE)("div",wo," No hay datos disponibles para el mes, año, día y PDV seleccionados. ")):(0,r.Q3)("",!0),n.noData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",No,[(0,r.Lk)("div",Io,[(0,r.Lk)("div",Xo,[a[18]||(a[18]=(0,r.Lk)("h2",null,"Ventas por Medio de Pago por PDV",-1)),(0,r.bF)(i,{data:n.stackedBarChartData,options:n.stackedBarChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Oo,[a[19]||(a[19]=(0,r.Lk)("h2",null,"Distribución de Ventas por Medio de Pago",-1)),(0,r.bF)(u,{data:n.pieChartData,options:n.pieChartOptions},null,8,["data","options"])])]),(0,r.Lk)("div",Ko,[(0,r.Lk)("table",Ro,[a[20]||(a[20]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"PDV"),(0,r.Lk)("th",null,"Bonos"),(0,r.Lk)("th",null,"Efectivo"),(0,r.Lk)("th",null,"Recibo Bancario"),(0,r.Lk)("th",null,"Tarjeta Débito"),(0,r.Lk)("th",null,"Transferencia Bancaria"),(0,r.Lk)("th",null,"Vale"),(0,r.Lk)("th",null,"Total")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.salesData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.pdv},[(0,r.Lk)("td",null,(0,b.v_)(e.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.bonos)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.efectivo)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.recibo_bancario)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.tarjeta_debito)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.transferencia_bancaria)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.vale)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.total)),1)])))),128)),n.salesData.length>0?((0,r.uX)(),(0,r.CE)("tr",To,[(0,r.Lk)("td",null,(0,b.v_)(n.totals.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.bonos)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.efectivo)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.recibo_bancario)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.tarjeta_debito)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.transferencia_bancaria)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.vale)),1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.total)),1)])):(0,r.Q3)("",!0)])])])]))])}Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Xt.Bs,Kt.A);var So={name:"SalesByPaymentMethod",components:{Bar:Ot.yP,Pie:Ot.Fq},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(null),o=(0,F.KR)([]),n=new Date,l=n.getMonth()+1,s=n.getFullYear(),i=(0,F.KR)(l),u=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),p=(0,F.KR)(null),m=(0,F.KR)([]),v=(0,F.KR)("Activo"),h=(0,F.KR)(null),b=(0,F.KR)([]),k=(0,F.KR)([]),g=(0,F.KR)({}),f=(0,F.KR)(!1),y=(0,r.EW)((()=>{const e=k.value.length>0&&k.value.every((e=>0===e.total));return console.log("noData:",e,"salesData:",k.value),e})),_=(0,r.EW)((()=>"Todos"===v.value?b.value.map((e=>e.pdv)):b.value.filter((e=>e.estado===v.value)).map((e=>e.pdv)))),C=async()=>{try{const e=await P.A.get("/available-years");o.value=e.data.years||[],o.value.length>0&&(t.value=o.value.includes(s)?s:o.value[0],E(),L(),V())}catch(e){console.error("Error fetching available years:",e),o.value=Array.from({length:5},((e,a)=>s+a-2)),t.value=s,e.response&&401===e.response.status?(console.log("No autorizado en available-years, redirigiendo al login"),a.push("/login")):(E(),L(),V())}},L=async()=>{try{const e=await P.A.get("/pdvs");b.value=e.data.pdvs||[],console.log("PDVs obtenidos:",b.value)}catch(e){console.error("Error fetching PDVs:",e),b.value=[],e.response&&401===e.response.status&&(console.log("No autorizado en pdvs, redirigiendo al login"),a.push("/login"))}},E=()=>{if(!t.value||!i.value)return;const e=new Date(t.value,i.value,0).getDate();m.value=Array.from({length:e},((e,a)=>a+1)),p.value&&p.value>e&&(p.value=null)},D=()=>{E(),V()},A=()=>{h.value&&!_.value.includes(h.value)&&(h.value=null),V()},V=async()=>{if(t.value)try{const e=await P.A.get("/dashboard/sales-by-payment-method",{params:{year:t.value,month:i.value,day:p.value,status:v.value,pdv:h.value}});k.value=e.data.data||[],g.value=e.data.totals||{},console.log("Datos recibidos:",{salesData:k.value,totals:g.value})}catch(e){console.error("Error fetching sales by payment method data:",e),k.value=[],g.value={},e.response&&401===e.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},w=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),N=e=>{if(f.value&&e>=1e6){const a=e/1e6;return`${a.toFixed(1).replace(/\.0$/,"")}M`}return new Intl.NumberFormat("es-CO",{minimumFractionDigits:0}).format(e)},I=(0,r.EW)((()=>{const e={labels:k.value.map((e=>e.pdv)),datasets:[{label:"Bonos",data:k.value.map((e=>e.bonos)),backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,stack:"Stack 0"},{label:"Efectivo",data:k.value.map((e=>e.efectivo)),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,stack:"Stack 0"},{label:"Recibo Bancario",data:k.value.map((e=>e.recibo_bancario)),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,stack:"Stack 0"},{label:"Tarjeta Débito",data:k.value.map((e=>e.tarjeta_debito)),backgroundColor:"rgba(255, 206, 86, 0.6)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1,stack:"Stack 0"},{label:"Transferencia Bancaria",data:k.value.map((e=>e.transferencia_bancaria)),backgroundColor:"rgba(153, 102, 255, 0.6)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1,stack:"Stack 0"},{label:"Vale",data:k.value.map((e=>e.vale)),backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1,stack:"Stack 0"}]};return console.log("stackedBarChartData:",e),e})),X=(0,r.EW)((()=>({responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Punto de Venta"}},y:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return N(e)}},stacked:!0}},plugins:{legend:{display:!0},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=N(e.parsed.y),a}}},datalabels:{display:!1,anchor:"center",align:"center",color:"#000",font:{size:9,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}}))),O=(0,r.EW)((()=>{const e={labels:["Bonos","Efectivo","Recibo Bancario","Tarjeta Débito","Transferencia Bancaria","Vale"],datasets:[{label:"Distribución de Ventas",data:[g.value.bonos||0,g.value.efectivo||0,g.value.recibo_bancario||0,g.value.tarjeta_debito||0,g.value.transferencia_bancaria||0,g.value.vale||0],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return console.log("pieChartData:",e),e})),K=(0,r.EW)((()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(e){let a=e.label||"";return a&&(a+=": "),a+=N(e.parsed),a}}},datalabels:{display:!1}}})));return(0,r.sV)((()=>{e.state.auth.token?C():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),{year:t,years:o,month:i,months:u,day:p,days:m,status:v,selectedPdv:h,filteredPdvs:_,salesData:k,totals:g,noData:y,stackedBarChartData:I,stackedBarChartOptions:X,pieChartData:O,pieChartOptions:K,fetchData:V,updateDaysAndFetchData:D,updatePdvsAndFetchData:A,formatCurrency:w}}};const $o=(0,m.A)(So,[["render",xo],["__scopeId","data-v-7dcc512c"]]);var Uo=$o;const Bo={class:"sales-by-product"},Mo={key:0},Wo={class:"filters"},zo=["value"],qo=["value"],jo=["value"],Qo=["value"],Jo=["value"],Ho={class:"sort-buttons"},Yo={key:0,class:"no-data-message"},Go={key:1},Zo={class:"charts-container"},er={class:"chart-wrapper top-bar-chart"},ar={class:"chart-wrapper bottom-bar-chart"},tr={class:"table-container"},or={class:"sales-table"},rr={key:0,class:"total-row"};function nr(e,a,t,n,l,s){const i=(0,r.g2)("Bar");return(0,r.uX)(),(0,r.CE)("div",Bo,[(0,r.Lk)("h1",null,[(0,r.eW)(" Ventas por Producto - "+(0,b.v_)(n.months[n.month-1].name)+" ",1),n.day?((0,r.uX)(),(0,r.CE)("span",Mo,(0,b.v_)(n.day),1)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,b.v_)(n.year),1)]),(0,r.Lk)("div",Wo,[a[18]||(a[18]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,zo)))),128))],544),[[o.u1,n.year]]),a[19]||(a[19]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,qo)))),128))],544),[[o.u1,n.month]]),a[20]||(a[20]=(0,r.Lk)("label",null,"Día:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.day=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[14]||(a[14]=(0,r.Lk)("option",{value:null},"Todo el mes",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.days,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,jo)))),128))],544),[[o.u1,n.day]]),a[21]||(a[21]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.status=e),onChange:a[7]||(a[7]=(...e)=>n.updatePdvsAndFetchData&&n.updatePdvsAndFetchData(...e))},a[15]||(a[15]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[22]||(a[22]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedPdv=e),onChange:a[9]||(a[9]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[16]||(a[16]=(0,r.Lk)("option",{value:null},"Todos los PDVs",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Qo)))),128))],544),[[o.u1,n.selectedPdv]]),a[23]||(a[23]=(0,r.Lk)("label",null,"Producto:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>n.selectedProduct=e),onChange:a[11]||(a[11]=(...e)=>n.applyProductFilter&&n.applyProductFilter(...e))},[a[17]||(a[17]=(0,r.Lk)("option",{value:""},"Todos los productos",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.products,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Jo)))),128))],544),[[o.u1,n.selectedProduct]])]),(0,r.Lk)("div",Ho,[(0,r.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>n.sortByName&&n.sortByName(...e))},"Ordenar por Nombre"),(0,r.Lk)("button",{onClick:a[13]||(a[13]=(...e)=>n.sortByTotal&&n.sortByTotal(...e))},"Ordenar por Total (Mayor a Menor)")]),n.noData?((0,r.uX)(),(0,r.CE)("div",Yo," No hay datos disponibles para el mes, año, día y PDV seleccionados. ")):((0,r.uX)(),(0,r.CE)("div",Go,[(0,r.Lk)("div",Zo,[(0,r.Lk)("div",er,[a[24]||(a[24]=(0,r.Lk)("h2",null,"Top 10 Productos Más Vendidos",-1)),(0,r.bF)(i,{data:n.horizontalBarChartData,options:n.horizontalBarChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",ar,[a[25]||(a[25]=(0,r.Lk)("h2",null,"Top 20 Productos Menos Vendidos",-1)),(0,r.bF)(i,{data:n.bottomBarChartData,options:n.bottomBarChartOptions},null,8,["data","options"])])]),(0,r.Lk)("div",tr,[(0,r.Lk)("table",or,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[a[26]||(a[26]=(0,r.Lk)("th",null,"Producto",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e},(0,b.v_)(e),1)))),128)),a[27]||(a[27]=(0,r.Lk)("th",null,"Total",-1))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredSalesData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.product},[(0,r.Lk)("td",null,(0,b.v_)(e.product),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(a=>((0,r.uX)(),(0,r.CE)("td",{key:a},(0,b.v_)(n.formatCurrency(e[a])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.total)),1)])))),128)),n.filteredSalesData.length>0?((0,r.uX)(),(0,r.CE)("tr",rr,[(0,r.Lk)("td",null,(0,b.v_)(n.totals.product),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("td",{key:e},(0,b.v_)(n.formatCurrency(n.totals[e])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.totals.total)),1)])):(0,r.Q3)("",!0)])])])]))])}Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Kt.A);var lr={name:"SalesByProduct",components:{Bar:Ot.yP},setup(){const e=(0,F.KR)(null),a=(0,F.KR)([]),t=new Date,o=t.getMonth()+1,n=t.getFullYear(),l=(0,F.KR)(o),s=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),i=(0,F.KR)(null),u=(0,F.KR)([]),d=(0,F.KR)("Activo"),c=(0,F.KR)(null),p=(0,F.KR)([]),m=(0,F.KR)([]),v=(0,F.KR)([]),h=(0,F.KR)([]),b=(0,F.KR)([]),k=(0,F.KR)({}),g=(0,F.KR)(""),f=(0,r.EW)((()=>{const e=v.value.length>0&&v.value.every((e=>0===e.total));return console.log("noData:",e,"filteredSalesData:",v.value),e})),y=(0,r.EW)((()=>p.value)),_=async()=>{try{const t=await P.A.get("/available-years");a.value=t.data.years||[],a.value.length>0&&(e.value=a.value.includes(n)?n:a.value[0],C(),D())}catch(t){console.error("Error fetching available years:",t),a.value=Array.from({length:5},((e,a)=>n+a-2)),e.value=n,C(),D()}},C=()=>{if(!e.value||!l.value)return;const a=new Date(e.value,l.value,0).getDate();u.value=Array.from({length:a},((e,a)=>a+1)),i.value&&i.value>a&&(i.value=null)},L=()=>{C(),D()},E=()=>{c.value&&!y.value.includes(c.value)&&(c.value=null),D()},D=async()=>{if(e.value)try{const a=await P.A.get("/dashboard/sales-by-product",{params:{year:e.value,month:l.value,day:i.value,status:d.value,pdv:c.value}});m.value=a.data.data||[],v.value=[...m.value],h.value=a.data.pdvs||[],p.value=a.data.pdvs||[],b.value=a.data.products||[],k.value=a.data.totals||{},console.log("Datos recibidos:",{salesData:m.value,pdvs:h.value,products:b.value,totals:k.value})}catch(a){console.error("Error fetching sales by product data:",a),m.value=[],v.value=[],h.value=[],p.value=[],b.value=[],k.value={}}},A=()=>{g.value?v.value=m.value.filter((e=>e.product===g.value)):v.value=[...m.value],w()},V=()=>{v.value.sort(((e,a)=>e.product.localeCompare(a.product)))},w=()=>{v.value.sort(((e,a)=>a.total-e.total))},N=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),I=(0,r.EW)((()=>{const e=[...m.value].sort(((e,a)=>a.total-e.total)).slice(0,10),a=e.map((e=>e.product)),t=e.map((e=>e.total)),o={labels:a,datasets:[{label:"Ventas (COP)",data:t,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]};return console.log("horizontalBarChartData:",o),o})),X={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"Producto"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}},datalabels:{anchor:"center",align:"center",color:"#fff",font:{size:10,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},O=(0,r.EW)((()=>{const e=[...m.value].sort(((e,a)=>e.total-a.total)).slice(0,20),a=e.map((e=>e.product)),t=e.map((e=>e.total)),o={labels:a,datasets:[{label:"Ventas (COP)",data:t,backgroundColor:"rgba(255, 99, 132, 0.6)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]};return console.log("bottomBarChartData:",o),o})),K={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"Producto"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}},datalabels:{anchor:"center",align:"center",color:"#fff",font:{size:10,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}};return(0,r.sV)((()=>{_()})),{year:e,years:a,month:l,months:s,day:i,days:u,status:d,selectedPdv:c,filteredPdvs:y,salesData:m,filteredSalesData:v,pdvs:h,allPdvs:p,products:b,totals:k,selectedProduct:g,noData:f,horizontalBarChartData:I,horizontalBarChartOptions:X,bottomBarChartData:O,bottomBarChartOptions:K,fetchData:D,updateDaysAndFetchData:L,updatePdvsAndFetchData:E,applyProductFilter:A,sortByName:V,sortByTotal:w,formatCurrency:N}}};const sr=(0,m.A)(lr,[["render",nr],["__scopeId","data-v-a3475c3c"]]);var ir=sr;const ur={class:"sales-by-seller"},dr={key:0},cr={class:"filters"},pr=["value"],mr=["value"],vr=["value"],hr=["value"],br=["value"],kr={class:"sort-buttons"},gr=["disabled"],fr={key:0,class:"no-data-message"},yr={key:1},_r={class:"charts-container"},Cr={class:"chart-wrapper top-bar-chart"},Lr={key:0,class:"chart-wrapper pdv-breakdown-chart"},Er={class:"table-container"},Dr={class:"sales-table"},Ar={key:0,class:"total-row"};function Pr(e,a,t,n,l,s){const i=(0,r.g2)("Bar");return(0,r.uX)(),(0,r.CE)("div",ur,[(0,r.Lk)("h1",null,[(0,r.eW)(" Ventas por Asesor - "+(0,b.v_)(n.months[n.month-1].name)+" ",1),n.day?((0,r.uX)(),(0,r.CE)("span",dr,(0,b.v_)(n.day),1)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,b.v_)(n.year),1)]),(0,r.Lk)("div",cr,[a[19]||(a[19]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,pr)))),128))],544),[[o.u1,n.year]]),a[20]||(a[20]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=(...e)=>n.updateDaysAndFetchData&&n.updateDaysAndFetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,mr)))),128))],544),[[o.u1,n.month]]),a[21]||(a[21]=(0,r.Lk)("label",null,"Día:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.day=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},[a[15]||(a[15]=(0,r.Lk)("option",{value:null},"Todo el mes",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.days,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,vr)))),128))],544),[[o.u1,n.day]]),a[22]||(a[22]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.status=e),onChange:a[7]||(a[7]=(...e)=>n.fetchData&&n.fetchData(...e))},a[16]||(a[16]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[23]||(a[23]=(0,r.Lk)("label",null,"Punto de Venta:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedPdv=e),onChange:a[9]||(a[9]=(...e)=>n.applyFilters&&n.applyFilters(...e))},[a[17]||(a[17]=(0,r.Lk)("option",{value:""},"Todos los PDVs",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,hr)))),128))],544),[[o.u1,n.selectedPdv]]),a[24]||(a[24]=(0,r.Lk)("label",null,"Asesor:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>n.selectedSeller=e),onChange:a[11]||(a[11]=(...e)=>n.applyFilters&&n.applyFilters(...e))},[a[18]||(a[18]=(0,r.Lk)("option",{value:""},"Todos los asesores",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredSellers,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,br)))),128))],544),[[o.u1,n.selectedSeller]])]),(0,r.Lk)("div",kr,[(0,r.Lk)("button",{onClick:a[12]||(a[12]=(...e)=>n.sortByName&&n.sortByName(...e))},"Ordenar por Nombre"),(0,r.Lk)("button",{onClick:a[13]||(a[13]=(...e)=>n.sortByTotal&&n.sortByTotal(...e))},"Ordenar por Total (Mayor a Menor)"),(0,r.Lk)("button",{onClick:a[14]||(a[14]=(...e)=>n.exportToExcel&&n.exportToExcel(...e)),disabled:n.noData},"Exportar a Excel",8,gr)]),n.noData?((0,r.uX)(),(0,r.CE)("div",fr," No hay datos disponibles para el mes, año y día seleccionados. ")):((0,r.uX)(),(0,r.CE)("div",yr,[(0,r.Lk)("div",_r,[(0,r.Lk)("div",Cr,[a[25]||(a[25]=(0,r.Lk)("h2",null,"Top 10 Asesores con más ventas",-1)),(0,r.bF)(i,{data:n.horizontalBarChartData,options:n.horizontalBarChartOptions},null,8,["data","options"])]),n.selectedSeller?((0,r.uX)(),(0,r.CE)("div",Lr,[(0,r.Lk)("h2",null,"Ventas por PDV - "+(0,b.v_)(n.selectedSeller),1),(0,r.bF)(i,{data:n.pdvBreakdownChartData,options:n.pdvBreakdownChartOptions},null,8,["data","options"])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Er,[(0,r.Lk)("table",Dr,[(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[a[26]||(a[26]=(0,r.Lk)("th",null,"Asesor",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("th",{key:e},(0,b.v_)(e),1)))),128)),a[27]||(a[27]=(0,r.Lk)("th",null,"Total",-1))])]),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredSalesData,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.seller},[(0,r.Lk)("td",null,(0,b.v_)(e.seller),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(a=>((0,r.uX)(),(0,r.CE)("td",{key:a},(0,b.v_)(n.formatCurrency(e[a])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(e.total)),1)])))),128)),n.filteredSalesData.length>0?((0,r.uX)(),(0,r.CE)("tr",Ar,[(0,r.Lk)("td",null,(0,b.v_)(n.totals.seller),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.filteredPdvs,(e=>((0,r.uX)(),(0,r.CE)("td",{key:e},(0,b.v_)(n.formatCurrency(n.filteredTotals[e])),1)))),128)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.filteredTotals.total)),1)])):(0,r.Q3)("",!0)])])])]))])}var Fr=t(788);Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Kt.A);var Vr={name:"SalesBySeller",components:{Bar:Ot.yP},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(null),o=(0,F.KR)([]),n=new Date,l=n.getMonth()+1,s=n.getFullYear(),i=(0,F.KR)(l),u=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),p=(0,F.KR)(null),m=(0,F.KR)([]),v=(0,F.KR)("Activo"),h=(0,F.KR)([]),b=(0,F.KR)([]),k=(0,F.KR)([]),g=(0,F.KR)([]),f=(0,F.KR)({}),y=(0,F.KR)(""),_=(0,F.KR)(""),C=(0,r.EW)((()=>{const e=b.value.length>0&&b.value.every((e=>0===e.total));return console.log("noData:",e,"filteredSalesData:",b.value),e})),L=(0,r.EW)((()=>_.value?k.value.filter((e=>e===_.value)):k.value)),E=(0,r.EW)((()=>_.value?g.value.filter((e=>{const a=h.value.find((a=>a.seller===e));return a&&a[_.value]>0})):g.value)),D=(0,r.EW)((()=>{const e={seller:"TOTALES",total:0};return L.value.forEach((a=>{e[a]=0,b.value.forEach((t=>{e[a]+=t[a]})),e.total+=e[a]})),e})),A=async()=>{try{const e=await P.A.get("/available-years");o.value=e.data.years||[],o.value.length>0&&(t.value=o.value.includes(s)?s:o.value[0],V(),N())}catch(e){console.error("Error fetching available years:",e),o.value=Array.from({length:5},((e,a)=>s+a-2)),t.value=s,V(),e.response&&401===e.response.status?(console.log("No autorizado en available-years, redirigiendo al login"),a.push("/login")):N()}},V=()=>{if(!t.value||!i.value)return;const e=new Date(t.value,i.value,0).getDate();m.value=Array.from({length:e},((e,a)=>a+1)),p.value&&p.value>e&&(p.value=null)},w=()=>{V(),N()},N=async()=>{if(t.value)try{const e=await P.A.get("/dashboard/sales-by-seller",{params:{year:t.value,month:i.value,day:p.value,status:v.value}});h.value=e.data.data||[],k.value=e.data.pdvs||[],g.value=e.data.sellers||[],f.value=e.data.totals||{},I(),console.log("Datos recibidos:",{salesData:h.value,pdvs:k.value,sellers:g.value,totals:f.value})}catch(e){console.error("Error fetching sales by seller data:",e),h.value=[],b.value=[],k.value=[],g.value=[],f.value={},e.response&&401===e.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},I=()=>{let e=[...h.value];_.value&&(e=e.filter((e=>e[_.value]>0))),y.value&&(e=e.filter((e=>e.seller===y.value))),b.value=e,O()},X=()=>{b.value.sort(((e,a)=>e.seller.localeCompare(a.seller)))},O=()=>{b.value.sort(((e,a)=>a.total-e.total))},K=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),R=()=>{const e=b.value.map((e=>{const a={Asesor:e.seller};return L.value.forEach((t=>{a[t]=e[t]})),a["Total"]=e.total,a}));if(b.value.length>0){const a={Asesor:D.value.seller};L.value.forEach((e=>{a[e]=D.value[e]})),a["Total"]=D.value.total,e.push(a)}const a=_a.Wp.json_to_sheet(e),o=_a.Wp.book_new();_a.Wp.book_append_sheet(o,a,"Ventas por Asesor");const r=_a.M9(o,{bookType:"xlsx",type:"array"}),n=new Blob([r],{type:"application/octet-stream"});(0,Fr.saveAs)(n,`Ventas_por_Asesor_${u.value[i.value-1].name}_${t.value}${p.value?`_${p.value}`:""}.xlsx`)},T=(0,r.EW)((()=>{const e=[...b.value].sort(((e,a)=>a.total-e.total)).slice(0,10),a=e.map((e=>e.seller)),t=e.map((e=>e.total)),o={labels:a,datasets:[{label:"Ventas (COP)",data:t,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]};return console.log("horizontalBarChartData:",o),o})),x={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"Asesor"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}},datalabels:{display:!0,anchor:"center",align:"center",color:"#fff",font:{size:10,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},S=(0,r.EW)((()=>{if(!y.value)return{labels:[],datasets:[]};const e=h.value.find((e=>e.seller===y.value));if(!e)return{labels:[],datasets:[]};const a=L.value.filter((a=>e[a]>0)),t=a.map((a=>e[a])),o={labels:a,datasets:[{label:"Ventas (COP)",data:t,backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]};return console.log("pdvBreakdownChartData:",o),o})),$={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"PDV"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}}}};return(0,r.sV)((()=>{e.state.auth.token?A():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),{year:t,years:o,month:i,months:u,day:p,days:m,status:v,salesData:h,filteredSalesData:b,pdvs:k,filteredPdvs:L,sellers:g,filteredSellers:E,totals:f,filteredTotals:D,selectedSeller:y,selectedPdv:_,noData:C,horizontalBarChartData:T,horizontalBarChartOptions:x,pdvBreakdownChartData:S,pdvBreakdownChartOptions:$,fetchData:N,updateDaysAndFetchData:w,applyFilters:I,sortByName:X,sortByTotal:O,formatCurrency:K,exportToExcel:R}}};const wr=(0,m.A)(Vr,[["render",Pr],["__scopeId","data-v-7cebd19b"]]);var Nr=wr;const Ir={class:"accumulated-sales-by-pdv"},Xr={key:0},Or={class:"filters"},Kr=["value"],Rr=["value"],Tr=["value"],xr=["value"],Sr={class:"sort-buttons"},$r=["disabled"],Ur=["disabled"],Br={key:0,class:"no-data-message"},Mr={key:1,class:"table-container"},Wr={class:"sales-table"},zr={key:2,class:"charts-container"},qr={class:"chart-row"},jr={class:"chart-wrapper"},Qr={class:"chart-wrapper"},Jr={class:"chart-row"},Hr={class:"chart-wrapper"},Yr={class:"chart-wrapper"};function Gr(e,a,t,n,l,s){const i=(0,r.g2)("Bar"),u=(0,r.g2)("Doughnut");return(0,r.uX)(),(0,r.CE)("div",Ir,[(0,r.Lk)("h1",null,[(0,r.eW)(" Venta Acumulada por PDV a: "+(0,b.v_)(n.months[n.month-1].name)+" ",1),n.endDate?((0,r.uX)(),(0,r.CE)("span",Xr,(0,b.v_)(n.endDate.split("-")[2]),1)):(0,r.Q3)("",!0),(0,r.eW)(" "+(0,b.v_)(n.year),1)]),(0,r.Lk)("div",Or,[a[13]||(a[13]=(0,r.Lk)("label",null,"Año:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.year=e),onChange:a[1]||(a[1]=e=>{n.updateEndDateOptions,n.fetchData})},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.years,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,Kr)))),128))],544),[[o.u1,n.year]]),a[14]||(a[14]=(0,r.Lk)("label",null,"Mes:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.month=e),onChange:a[3]||(a[3]=e=>{n.updateEndDateOptions,n.fetchData})},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.months,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.num,value:e.num},(0,b.v_)(e.name),9,Rr)))),128))],544),[[o.u1,n.month]]),a[15]||(a[15]=(0,r.Lk)("label",null,"Día Final:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.endDate=e),onChange:a[5]||(a[5]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.availableDays,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e.split("-")[2]),9,Tr)))),128))],544),[[o.u1,n.endDate]]),a[16]||(a[16]=(0,r.Lk)("label",null,"Estatus PDV:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.status=e),onChange:a[7]||(a[7]=(...e)=>n.fetchPDVs&&n.fetchPDVs(...e))},a[12]||(a[12]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,n.status]]),a[17]||(a[17]=(0,r.Lk)("label",null,"Punto de Venta:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.pdv=e),onChange:a[9]||(a[9]=(...e)=>n.fetchData&&n.fetchData(...e))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.pdvs,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e,value:e},(0,b.v_)(e),9,xr)))),128))],544),[[o.u1,n.pdv]])]),(0,r.Lk)("div",Sr,[(0,r.Lk)("button",{onClick:a[10]||(a[10]=(...e)=>n.exportToExcel&&n.exportToExcel(...e)),disabled:n.noData},"Exportar a Excel",8,$r),(0,r.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>n.exportToPDF&&n.exportToPDF(...e)),disabled:n.noData},"Exportar a PDF",8,Ur)]),n.noData?((0,r.uX)(),(0,r.CE)("div",Br," No hay datos disponibles para el mes, año y PDV seleccionados. ")):((0,r.uX)(),(0,r.CE)("div",Mr,[(0,r.Lk)("table",Wr,[a[26]||(a[26]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Métrica"),(0,r.Lk)("th",null,"Valor")])],-1)),(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[a[18]||(a[18]=(0,r.Lk)("td",null,"Venta Acumulada",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.data.venta_acumulada)),1)]),(0,r.Lk)("tr",null,[a[19]||(a[19]=(0,r.Lk)("td",null,"Venta Proyectada",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.data.venta_proyectada)),1)]),(0,r.Lk)("tr",null,[a[20]||(a[20]=(0,r.Lk)("td",null,"Presupuesto",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.data.presupuesto)),1)]),(0,r.Lk)("tr",null,[a[21]||(a[21]=(0,r.Lk)("td",null,"Cumplimiento a la Fecha",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.data.cumplimiento_a_la_fecha)),1)]),(0,r.Lk)("tr",null,[a[22]||(a[22]=(0,r.Lk)("td",null,"% Cumplimiento",-1)),(0,r.Lk)("td",null,(0,b.v_)(n.data.cumplimiento_porcentual)+"% "+(0,b.v_)(n.data.cumplimiento_icono),1)]),(0,r.Lk)("tr",null,[a[23]||(a[23]=(0,r.Lk)("td",null,"Saldo para Cumplir",-1)),(0,r.Lk)("td",{class:(0,b.C4)(n.data.saldo_para_cumplir>=0?"positive":"negative")},(0,b.v_)(n.formatCurrency(n.data.saldo_para_cumplir)),3)]),(0,r.Lk)("tr",null,[(0,r.Lk)("td",null,"Venta mes "+(0,b.v_)(n.months[n.month-1].name)+" del Año Anterior",1),(0,r.Lk)("td",null,(0,b.v_)(n.formatCurrency(n.data.venta_ano_anterior)),1)]),(0,r.Lk)("tr",null,[a[24]||(a[24]=(0,r.Lk)("td",null,"Crecimiento (%)",-1)),(0,r.Lk)("td",{class:(0,b.C4)(n.data.crecimiento_porcentual>=0?"positive":"negative")},(0,b.v_)(n.data.crecimiento_porcentual)+"% ",3)]),(0,r.Lk)("tr",null,[a[25]||(a[25]=(0,r.Lk)("td",null,"Crecimiento ($)",-1)),(0,r.Lk)("td",{class:(0,b.C4)(n.data.crecimiento_valor>=0?"positive":"negative")},(0,b.v_)(n.formatCurrency(n.data.crecimiento_valor)),3)])])])])),n.noData?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",zr,[(0,r.Lk)("div",qr,[(0,r.Lk)("div",jr,[a[27]||(a[27]=(0,r.Lk)("h2",null,"Top 5 Productos Más Vendidos",-1)),(0,r.bF)(i,{data:n.productChartData,options:n.productChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Qr,[a[28]||(a[28]=(0,r.Lk)("h2",null,"Distribución de Ventas (Top 5 Productos)",-1)),(0,r.bF)(u,{data:n.productDoughnutChartData,options:n.doughnutChartOptions},null,8,["data","options"])])]),(0,r.Lk)("div",Jr,[(0,r.Lk)("div",Hr,[a[29]||(a[29]=(0,r.Lk)("h2",null,"Top 5 Asesores con más ventas",-1)),(0,r.bF)(i,{data:n.sellerChartData,options:n.sellerChartOptions},null,8,["data","options"])]),(0,r.Lk)("div",Yr,[a[30]||(a[30]=(0,r.Lk)("h2",null,"Distribución de Ventas (Top 5 Asesores)",-1)),(0,r.bF)(u,{data:n.sellerDoughnutChartData,options:n.doughnutChartOptions},null,8,["data","options"])])])]))])}var Zr=t(2125),en=t.n(Zr),an=t(1749);Xt.t1.register(Xt.hE,Xt.m_,Xt.s$,Xt.E8,Xt.PP,Xt.kc,Xt.Bs,Kt.A);var tn={name:"AccumulatedSalesByPDV",components:{Bar:Ot.yP,Doughnut:Ot.nu},setup(){const e=(0,d.Pj)(),a=(0,c.rd)(),t=(0,F.KR)(null),o=(0,F.KR)([]),n=new Date,l=n.getFullYear(),s=n.getMonth()+1,i=(0,F.KR)(s),u=(0,F.KR)([{num:1,name:"Enero"},{num:2,name:"Febrero"},{num:3,name:"Marzo"},{num:4,name:"Abril"},{num:5,name:"Mayo"},{num:6,name:"Junio"},{num:7,name:"Julio"},{num:8,name:"Agosto"},{num:9,name:"Septiembre"},{num:10,name:"Octubre"},{num:11,name:"Noviembre"},{num:12,name:"Diciembre"}]),p=(0,F.KR)("Activo"),m=(0,F.KR)(""),v=(0,F.KR)([]),h=(0,F.KR)(""),b=(0,F.KR)([]),k=(0,F.KR)(null),g=(0,r.EW)((()=>!k.value||0===k.value.venta_acumulada&&0===k.value.venta_proyectada)),f=(0,r.EW)((()=>{if(!k.value||!k.value.top_products)return{labels:[],datasets:[]};const e=k.value.top_products.map((e=>e.product)),a=k.value.top_products.map((e=>e.sales));return{labels:e,datasets:[{label:"Ventas (COP)",data:a,backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]}})),y={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"Producto"},ticks:{font:{size:10},padding:10,maxRotation:45,minRotation:0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}},datalabels:{anchor:"center",align:"center",color:"#fff",font:{size:10,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},_=(0,r.EW)((()=>{if(!k.value||!k.value.top_products)return{labels:[],datasets:[]};const e=["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)"],a=e.map((e=>e.replace("0.6","1")));return{labels:k.value.top_products.map((e=>e.product)),datasets:[{label:"Distribución de Ventas",data:k.value.top_products.map((e=>e.sales)),backgroundColor:e,borderColor:a,borderWidth:1}]}})),C=(0,r.EW)((()=>{if(!k.value||!k.value.top_sellers)return{labels:[],datasets:[]};const e=k.value.top_sellers.map((e=>e.seller)),a=k.value.top_sellers.map((e=>e.sales));return{labels:e,datasets:[{label:"Ventas (COP)",data:a,backgroundColor:"rgba(255, 159, 64, 0.6)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]}})),L={indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"Ventas (COP)"},ticks:{callback:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}},y:{title:{display:!0,text:"Asesor"},ticks:{font:{size:10},padding:10,maxRotation:45,minRotation:0}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){let a=e.dataset.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed.x),a}}},datalabels:{anchor:"center",align:"center",color:"#fff",font:{size:10,weight:"bold"},formatter:function(e){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e)}}}},E=(0,r.EW)((()=>{if(!k.value||!k.value.top_sellers)return{labels:[],datasets:[]};const e=["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)"],a=e.map((e=>e.replace("0.6","1")));return{labels:k.value.top_sellers.map((e=>e.seller)),datasets:[{label:"Distribución de Ventas",data:k.value.top_sellers.map((e=>e.sales)),backgroundColor:e,borderColor:a,borderWidth:1}]}})),D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right",labels:{boxWidth:20,padding:10,font:{size:10},generateLabels:function(e){const a=e.data;return a.labels.length&&a.datasets.length?a.labels.map(((t,o)=>{const r=15;let n=t;if(t.length>r){const e=t.split(" ");let a="";const o=[];for(const t of e)(a+t).length>r?(o.push(a.trim()),a=t+" "):a+=t+" ";a&&o.push(a.trim()),n=o.join("\n")}return{text:n,fillStyle:a.datasets[0].backgroundColor[o],hidden:isNaN(a.datasets[0].data[o])||e.getDatasetMeta(0).data[o].hidden,index:o}})):[]}}},tooltip:{callbacks:{label:function(e){let a=e.label||"";return a&&(a+=": "),a+=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e.parsed),a}}},datalabels:{display:!1}}},A=async()=>{try{const e=await P.A.get("/available-years");o.value=e.data.years||[],o.value.length>0&&(t.value=o.value.includes(l)?l:o.value[0],w(),V())}catch(e){console.error("Error fetching available years:",e),o.value=Array.from({length:5},((e,a)=>l+a-2)),t.value=l,e.response&&401===e.response.status?(console.log("No autorizado en available-years, redirigiendo al login"),a.push("/login")):(w(),V())}},V=async()=>{try{const e=await P.A.get("/dashboard/historical_sales",{params:{status:p.value}});v.value=e.data.data.filter((e=>"Total"!==e.pdv)).map((e=>e.pdv)),m.value=v.value[0]||"",N()}catch(e){console.error("Error fetching PDVs:",e),v.value=[],m.value="",e.response&&401===e.response.status&&(console.log("No autorizado en historical_sales, redirigiendo al login"),a.push("/login"))}},w=()=>{if(!t.value||!i.value)return;const e=new Date(t.value,i.value,0).getDate();b.value=Array.from({length:e},((e,a)=>{const o=a+1;return`${t.value}-${String(i.value).padStart(2,"0")}-${String(o).padStart(2,"0")}`}));const a=new Date;if(t.value===a.getFullYear()&&i.value===a.getMonth()+1){const e=`${t.value}-${String(i.value).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;h.value=b.value.includes(e)?e:b.value[b.value.length-1]}else h.value=b.value[b.value.length-1];N()},N=async()=>{if(!t.value||!i.value||!m.value||!h.value)return;const[e,o]=h.value.split("-").map(Number);if(e!==t.value||o!==i.value)return console.warn("endDate does not match selected year and month, updating endDate..."),void w();try{const e=await P.A.get("/dashboard/accumulated-sales-by-pdv",{params:{year:t.value,month:i.value,pdv:m.value,end_date:h.value,status:p.value}});k.value=e.data}catch(r){console.error("Error fetching accumulated sales data:",r),k.value=null,r.response&&401===r.response.status&&(console.log("No autorizado, redirigiendo al login"),a.push("/login"))}},I=e=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(e),X=()=>{if(!k.value)return;const e=[{Filtro:"Año",Valor:t.value},{Filtro:"Mes",Valor:u.value[i.value-1].name},{Filtro:"Punto de Venta (PDV)",Valor:m.value},{Filtro:"Fecha Final",Valor:h.value},{Filtro:"Estatus PDV",Valor:p.value}],a=[{"Métrica":"Venta Acumulada",Valor:k.value.venta_acumulada},{"Métrica":"Venta Proyectada",Valor:k.value.venta_proyectada},{"Métrica":"Presupuesto",Valor:k.value.presupuesto},{"Métrica":"Cumplimiento a la Fecha",Valor:k.value.cumplimiento_a_la_fecha},{"Métrica":"% Cumplimiento",Valor:`${k.value.cumplimiento_porcentual}%`},{"Métrica":"Saldo para Cumplir",Valor:k.value.saldo_para_cumplir},{"Métrica":`Venta mes ${u.value[i.value-1].name} del Año Anterior`,Valor:k.value.venta_ano_anterior},{"Métrica":"Crecimiento (%)",Valor:`${k.value.crecimiento_porcentual}%`},{"Métrica":"Crecimiento ($)",Valor:k.value.crecimiento_valor}];a.push({},{"Métrica":"Top 5 Productos Más Vendidos",Valor:""}),k.value.top_products.forEach(((e,t)=>{a.push({"Métrica":`Producto ${t+1}`,Valor:`${e.product}: ${I(e.sales)}`})})),a.push({},{"Métrica":"Top 5 Asesores Más Vendidos",Valor:""}),k.value.top_sellers.forEach(((e,t)=>{a.push({"Métrica":`Asesor ${t+1}`,Valor:`${e.seller}: ${I(e.sales)}`})}));const o=_a.Wp.json_to_sheet([]);_a.Wp.sheet_add_json(o,e,{origin:"A1",skipHeader:!1});const r=e.length,n=r+2;_a.Wp.sheet_add_json(o,a,{origin:`A${n}`,skipHeader:!1});const l=_a.Wp.book_new();_a.Wp.book_append_sheet(l,o,"Venta Acumulada por PDV");const s=_a.M9(l,{bookType:"xlsx",type:"array"}),d=new Blob([s],{type:"application/octet-stream"});(0,Fr.saveAs)(d,`Venta_Acumulada_${m.value}_${u.value[i.value-1].name}_${t.value}.xlsx`)},O=async()=>{if(!k.value)return;const e=new an.Ay("p","mm","letter"),a=e.internal.pageSize.getWidth(),o=e.internal.pageSize.getHeight(),r=10;let n=r;e.setFontSize(16),e.text(`Venta Acumulada por PDV - ${m.value}`,r,n),n+=10,e.setFontSize(10),e.text(`Año: ${t.value}`,r,n),n+=5,e.text(`Mes: ${u.value[i.value-1].name}`,r,n),n+=5,e.text(`Día Final: ${h.value.split("-")[2]}`,r,n),n+=5,e.text(`Estatus PDV: ${p.value}`,r,n),n+=5,e.text(`Punto de Venta: ${m.value}`,r,n),n+=10;const l=document.querySelector(".table-container"),s=await en()(l,{scale:2}),d=s.toDataURL("image/png"),c=e.getImageProperties(d),v=370,b=c.height*v/c.width,g=(a-v)/2;e.addImage(d,"PNG",g,n,v,b),n+=b+10,n+100>o&&(e.addPage(),n=r);const f=document.querySelectorAll(".chart-row");for(let t=0;t<f.length;t++){const a=f[t],l=a.querySelectorAll(".chart-wrapper"),s=[];for(let t=0;t<l.length;t++){await new Promise((e=>setTimeout(e,500)));const a=await en()(l[t],{scale:2}),o=a.toDataURL("image/png");s.push({data:o,props:e.getImageProperties(o)})}const i=97,u=s[0].props.height*i/s[0].props.width*1.2,d=[r,r+i+5];for(let t=0;t<s.length;t++)e.addImage(s[t].data,"PNG",d[t],n,i,u);n+=u+12,n+100>o&&t<f.length-1&&(e.addPage(),n=r)}e.save(`Venta_Acumulada_${m.value}_${u.value[i.value-1].name}_${t.value}.pdf`)};return(0,r.sV)((()=>{e.state.auth.token?A():(console.log("No hay token, redirigiendo al login"),a.push("/login"))})),{year:t,years:o,month:i,months:u,status:p,pdv:m,pdvs:v,endDate:h,availableDays:b,data:k,noData:g,productChartData:f,productChartOptions:y,productDoughnutChartData:_,sellerChartData:C,sellerChartOptions:L,sellerDoughnutChartData:E,doughnutChartOptions:D,fetchAvailableYears:A,fetchPDVs:V,updateEndDateOptions:w,fetchData:N,formatCurrency:I,exportToExcel:X,exportToPDF:O}}};const on=(0,m.A)(tn,[["render",Gr],["__scopeId","data-v-ef260e72"]]);var rn=on;const nn={class:"points-of-sale"},ln={class:"filters"},sn={class:"table-container"},un={class:"points-table"},dn=["onClick"],cn=["onClick"],pn={key:0,class:"modal-overlay"},mn={class:"modal"},vn={class:"form-group"},hn={class:"form-group"},bn={class:"form-group"},kn={class:"form-group"},gn={class:"modal-actions"},fn={type:"submit",class:"save-btn"};function yn(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",nn,[a[17]||(a[17]=(0,r.Lk)("h1",null,"Gestión de Puntos de Venta",-1)),(0,r.Lk)("div",ln,[a[10]||(a[10]=(0,r.Lk)("label",null,"Estatus:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.selectedStatus=e),onChange:a[1]||(a[1]=(...e)=>s.fetchPointsOfSale&&s.fetchPointsOfSale(...e))},a[9]||(a[9]=[(0,r.Lk)("option",{value:"Todos"},"Todos",-1),(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),544),[[o.u1,l.selectedStatus]]),(0,r.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>s.openCreateModal&&s.openCreateModal(...e)),class:"create-btn"},"Agregar Punto de Venta")]),(0,r.Lk)("div",sn,[(0,r.Lk)("table",un,[a[11]||(a[11]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Código (data1)"),(0,r.Lk)("th",null,"Nombre (data2)"),(0,r.Lk)("th",null,"PDV"),(0,r.Lk)("th",null,"Estado"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.pointsOfSale,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,b.v_)(e.data1),1),(0,r.Lk)("td",null,(0,b.v_)(e.data2),1),(0,r.Lk)("td",null,(0,b.v_)(e.pdv),1),(0,r.Lk)("td",null,(0,b.v_)(e.estado),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>s.openEditModal(e),class:"edit-btn"},"Editar",8,dn),(0,r.Lk)("button",{onClick:a=>s.deletePointOfSale(e.id),class:"delete-btn"},"Eliminar",8,cn)])])))),128))])])]),l.showModal?((0,r.uX)(),(0,r.CE)("div",pn,[(0,r.Lk)("div",mn,[(0,r.Lk)("h2",null,(0,b.v_)(l.isEditing?"Editar Punto de Venta":"Agregar Punto de Venta"),1),(0,r.Lk)("form",{onSubmit:a[8]||(a[8]=(0,o.D$)(((...e)=>s.savePointOfSale&&s.savePointOfSale(...e)),["prevent"]))},[(0,r.Lk)("div",vn,[a[12]||(a[12]=(0,r.Lk)("label",null,"Código (data1):",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>l.form.data1=e),type:"text",maxlength:"50",required:""},null,512),[[o.Jo,l.form.data1]])]),(0,r.Lk)("div",hn,[a[13]||(a[13]=(0,r.Lk)("label",null,"Nombre (data2):",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>l.form.data2=e),type:"text",maxlength:"50",required:""},null,512),[[o.Jo,l.form.data2]])]),(0,r.Lk)("div",bn,[a[14]||(a[14]=(0,r.Lk)("label",null,"PDV:",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>l.form.pdv=e),type:"text",maxlength:"200",required:""},null,512),[[o.Jo,l.form.pdv]])]),(0,r.Lk)("div",kn,[a[16]||(a[16]=(0,r.Lk)("label",null,"Estado:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>l.form.estado=e),required:""},a[15]||(a[15]=[(0,r.Lk)("option",{value:"Activo"},"Activo",-1),(0,r.Lk)("option",{value:"Inactivo"},"Inactivo",-1)]),512),[[o.u1,l.form.estado]])]),(0,r.Lk)("div",gn,[(0,r.Lk)("button",fn,(0,b.v_)(l.isEditing?"Guardar Cambios":"Crear"),1),(0,r.Lk)("button",{type:"button",onClick:a[7]||(a[7]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"cancel-btn"},"Cancelar")])],32)])])):(0,r.Q3)("",!0)])}var _n={name:"PointsOfSale",computed:{...(0,d.aH)({token:e=>e.auth.token})},data(){return{selectedStatus:"Activo",pointsOfSale:[],showModal:!1,isEditing:!1,form:{id:null,data1:"",data2:"",pdv:"",estado:"Activo"}}},methods:{async fetchPointsOfSale(){try{const e=await P.A.get("/points-of-sale",{params:{status:this.selectedStatus}});this.pointsOfSale=e.data}catch(e){console.error("Error fetching points of sale:",e),e.response&&401===e.response.status?(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login")):alert("Error al cargar los puntos de venta")}},openCreateModal(){this.isEditing=!1,this.form={id:null,data1:"",data2:"",pdv:"",estado:"Activo"},this.showModal=!0},openEditModal(e){this.isEditing=!0,this.form={...e},this.showModal=!0},closeModal(){this.showModal=!1},async savePointOfSale(){try{const e={idcliente:this.token?this.$store.state.auth.user.id:1,data1:this.form.data1,data2:this.form.data2,pdv:this.form.pdv,estado:this.form.estado};this.isEditing?(await P.A.put(`/points-of-sale/${this.form.id}`,e),alert("Punto de venta actualizado exitosamente")):(await P.A.post("/points-of-sale",e),alert("Punto de venta creado exitosamente")),this.closeModal(),this.fetchPointsOfSale()}catch(e){console.error("Error saving point of sale:",e),e.response&&401===e.response.status?(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login")):e.response&&409===e.response.status?alert("Error: El nombre del PDV ya existe. Por favor, usa un nombre único."):alert("Error al guardar el punto de venta")}},async deletePointOfSale(e){if(confirm("¿Estás seguro de que deseas eliminar este punto de venta?"))try{await P.A.delete(`/points-of-sale/${e}`),alert("Punto de venta eliminado exitosamente"),this.fetchPointsOfSale()}catch(a){console.error("Error deleting point of sale:",a),a.response&&401===a.response.status?(console.log("No autorizado, redirigiendo al login"),this.$router.push("/login")):a.response&&409===a.response.status?alert("Error: No se puede eliminar este punto de venta porque está siendo usado en otras tablas."):alert("Error al eliminar el punto de venta")}}},mounted(){this.token?this.fetchPointsOfSale():(console.log("No hay token, redirigiendo al login"),this.$router.push("/login"))}};const Cn=(0,m.A)(_n,[["render",yn],["__scopeId","data-v-b417fae0"]]);var Ln=Cn;const En={class:"profiles-clientes"},Dn={key:0,class:"error-message"},An={class:"form-group"},Pn={class:"form-group"},Fn={class:"permisos-container"},Vn={class:"secciones-grid"},wn=["value","onUpdate:modelValue"],Nn={key:0,class:"subsecciones"},In=["value","onUpdate:modelValue"],Xn={key:0,type:"submit"},On={key:1,class:"edit-buttons"},Kn=["onClick"],Rn=["onClick"];function Tn(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",En,[a[7]||(a[7]=(0,r.Lk)("h3",null,"Gestión de Perfiles",-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",Dn,(0,b.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[2]||(a[2]=(0,o.D$)((e=>n.isEditing?n.updateProfile():n.createProfile()),["prevent"]))},[(0,r.Lk)("div",An,[a[3]||(a[3]=(0,r.Lk)("label",{for:"perfil_nombre"},"Nombre del Perfil:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"perfil_nombre","onUpdate:modelValue":a[0]||(a[0]=e=>n.perfil_nombre=e),required:""},null,512),[[o.Jo,n.perfil_nombre]])]),(0,r.Lk)("div",Pn,[a[4]||(a[4]=(0,r.Lk)("label",null,"Permisos:",-1)),(0,r.Lk)("div",Fn,[(0,r.Lk)("div",Vn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.secciones,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.name,class:"permiso-group"},[(0,r.Lk)("h4",null,(0,b.v_)(e.displayName),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.permisos,(a=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:"checkbox-item"},[(0,r.Lk)("label",null,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:a,"onUpdate:modelValue":a=>n.permisos[e.name]=a},null,8,wn),[[o.lH,n.permisos[e.name]]]),(0,r.eW)(" "+(0,b.v_)(a),1)])])))),128)),e.subsecciones?((0,r.uX)(),(0,r.CE)("div",Nn,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.subsecciones,(a=>((0,r.uX)(),(0,r.CE)("div",{key:a.name,class:"subseccion"},[(0,r.Lk)("h5",null,(0,b.v_)(a.displayName),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.permisos,(t=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"checkbox-item"},[(0,r.Lk)("label",null,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox",value:t,"onUpdate:modelValue":t=>n.permisos[`${e.name}_${a.name}`]=t},null,8,In),[[o.lH,n.permisos[`${e.name}_${a.name}`]]]),(0,r.eW)(" "+(0,b.v_)(t),1)])])))),128))])))),128))])):(0,r.Q3)("",!0)])))),128))])])]),n.isEditing?((0,r.uX)(),(0,r.CE)("div",On,[a[5]||(a[5]=(0,r.Lk)("button",{type:"submit"},"Guardar",-1)),(0,r.Lk)("button",{type:"button",onClick:a[1]||(a[1]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])):((0,r.uX)(),(0,r.CE)("button",Xn,"Crear Perfil"))],32),a[8]||(a[8]=(0,r.Lk)("h3",null,"Perfiles Existentes",-1)),(0,r.Lk)("table",null,[a[6]||(a[6]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.perfiles,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.perfil_id},[(0,r.Lk)("td",null,(0,b.v_)(e.perfil_nombre),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>n.editProfile(e)},"Editar",8,Kn),(0,r.Lk)("button",{onClick:a=>n.deleteProfile(e.perfil_id)},"Eliminar",8,Rn)])])))),128))])])])}var xn={name:"ProfilesClientes",setup(){const e=(0,d.Pj)(),a=(0,F.KR)([]),t=(0,F.KR)(""),o=(0,F.KR)({dashboard:[],cargue:[],inventario:[],production:[],parametrizacion:[],dashboard_venta_acumulada_pdv:[],dashboard_ventas_historicas:[],dashboard_rendimiento_mensual:[],dashboard_venta_diaria_pdv:[],dashboard_ventas_franja_dia:[],dashboard_ventas_medio_pago:[],dashboard_ventas_producto:[],dashboard_ventas_asesor:[],cargue_ventas_diarias:[],cargue_arqueo:[],cargue_venta_mensual_historica:[],cargue_presupuesto_venta:[],cargue_puntos_de_venta:[],inventario_consulta_inventario:[],inventario_consulta:[],inventario_kardex:[],inventario_gestion_productos:[],inventario_bodegas:[],inventario_compras:[],inventario_ventas:[],inventario_notas_credito:[],inventario_ajustes:[],inventario_traslados:[],production_admin:[],production_reportes:[],parametrizacion_puntos_de_venta:[],parametrizacion_perfiles:[],parametrizacion_usuarios:[]}),n=(0,F.KR)(""),l=(0,F.KR)(!1),s=(0,F.KR)(null),i=[{name:"dashboard",displayName:"Dashboard",permisos:["ver"],subsecciones:[{name:"venta_acumulada_pdv",displayName:"Venta Acumulada por PDV",permisos:["ver"]},{name:"ventas_historicas",displayName:"Ventas Históricas",permisos:["ver"]},{name:"rendimiento_mensual",displayName:"Rendimiento Mensual",permisos:["ver"]},{name:"venta_diaria_pdv",displayName:"Venta Diaria por PDV",permisos:["ver"]},{name:"ventas_franja_dia",displayName:"Ventas por Franja del Día",permisos:["ver"]},{name:"ventas_medio_pago",displayName:"Ventas por Medio de Pago",permisos:["ver"]},{name:"ventas_producto",displayName:"Ventas por Producto",permisos:["ver"]},{name:"ventas_asesor",displayName:"Ventas por Asesor",permisos:["ver"]}]},{name:"cargue",displayName:"Cargue de Información",permisos:["editar"],subsecciones:[{name:"ventas_diarias",displayName:"Ventas Diarias",permisos:["editar"]},{name:"arqueo",displayName:"Arqueo",permisos:["editar"]},{name:"venta_mensual_historica",displayName:"Venta Mensual Histórica",permisos:["editar"]},{name:"presupuesto_venta",displayName:"Presupuesto de Venta",permisos:["editar"]},{name:"puntos_de_venta",displayName:"Puntos de Venta",permisos:["editar"]}]},{name:"inventario",displayName:"Inventario",permisos:["ver"],subsecciones:[{name:"consulta_inventario",displayName:"Consulta Inventario",permisos:["ver"]},{name:"consulta",displayName:"Consulta Lite",permisos:["ver"]},{name:"kardex",displayName:"Kardex",permisos:["ver","editar"]},{name:"gestion_productos",displayName:"Gestión de Productos",permisos:["editar"]},{name:"bodegas",displayName:"Bodegas",permisos:["ver","editar"]},{name:"compras",displayName:"Cargar Compras",permisos:["ver","editar"]},{name:"ventas",displayName:"Cargar Ventas",permisos:["ver","editar"]},{name:"notas_credito",displayName:"Notas de Crédito",permisos:["ver","editar"]},{name:"ajustes",displayName:"Ajuste Manual de Inventario",permisos:["ver","editar"]},{name:"traslados",displayName:"Trasladar Cantidades",permisos:["ver","editar"]}]},{name:"production",displayName:"Producción",permisos:["ver"],subsecciones:[{name:"admin",displayName:"Administración",permisos:["ver","editar"]},{name:"reportes",displayName:"Reportes",permisos:["ver"]}]},{name:"parametrizacion",displayName:"Parametrización",permisos:["editar"],subsecciones:[{name:"perfiles",displayName:"Creación de Perfiles",permisos:["editar"]},{name:"usuarios",displayName:"Creación de Usuarios",permisos:["editar"]}]}],u=async()=>{try{const t=e.state.auth.token,o=e.state.auth.idcliente;if(!t||!o)throw new Error("Autenticación inválida");const r=await P.A.get("/perfiles",{headers:{Authorization:`Bearer ${t}`}});a.value=r.data}catch(t){n.value=t.response?.data?.error||"Error al obtener perfiles",console.error("Error al obtener perfiles:",t)}},c=async a=>{try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");const r=await P.A.get(`/perfiles/${a}/permisos`,{headers:{Authorization:`Bearer ${t}`}}),n=r.data;g(),n.forEach((e=>{const a=e.subseccion?`${e.seccion}_${e.subseccion}`:e.seccion;void 0!==o.value[a]?o.value[a].push(e.permiso):console.warn(`Permiso no soportado en frontend: ${a} - ${e.permiso}`)})),console.log("Permisos cargados:",o.value)}catch(t){n.value=t.response?.data?.error||"Error al obtener permisos",console.error("Error al obtener permisos:",t)}},p=async()=>{try{const a=e.state.auth.token,o=e.state.auth.idcliente;if(!a||!o)throw new Error("Autenticación inválida");const r=await P.A.post("/perfiles",{idcliente:o,perfil_nombre:t.value},{headers:{Authorization:`Bearer ${a}`}}),n=r.data.perfil_id;await b(n),k(),u()}catch(a){n.value=a.response?.data?.error||"Error al crear perfil",console.error("Error al crear perfil:",a)}},m=async e=>{l.value=!0,s.value=e.perfil_id,t.value=e.perfil_nombre,await c(e.perfil_id)},v=async()=>{try{const a=e.state.auth.token,o=e.state.auth.idcliente;if(!a||!o)throw new Error("Autenticación inválida");await P.A.put(`/perfiles/${s.value}`,{idcliente:o,perfil_nombre:t.value},{headers:{Authorization:`Bearer ${a}`}}),await b(s.value),k(),l.value=!1,s.value=null,u()}catch(a){n.value=a.response?.data?.error||"Error al actualizar perfil",console.error("Error al actualizar perfil:",a)}},h=async a=>{if(confirm("¿Está seguro de eliminar este perfil?"))try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");await P.A.delete(`/perfiles/${a}`,{headers:{Authorization:`Bearer ${t}`}}),u()}catch(t){n.value=t.response?.data?.error||"Error al eliminar perfil",console.error("Error al eliminar perfil:",t)}},b=async a=>{const t=e.state.auth.token,r=[];i.forEach((e=>{o.value[e.name]?.length>0&&o.value[e.name].forEach((a=>{r.push({seccion:e.name,subseccion:null,permiso:a})})),e.subsecciones&&e.subsecciones.forEach((a=>{const t=`${e.name}_${a.name}`;o.value[t]?.length>0&&o.value[t].forEach((t=>{r.push({seccion:e.name,subseccion:a.name,permiso:t})}))}))})),r.length>0&&await P.A.put(`/perfiles/${a}/permisos`,r,{headers:{Authorization:`Bearer ${t}`}})},k=()=>{t.value="",g(),n.value=""},g=()=>{o.value={dashboard:[],cargue:[],inventario:[],production:[],parametrizacion:[],dashboard_venta_acumulada_pdv:[],dashboard_ventas_historicas:[],dashboard_rendimiento_mensual:[],dashboard_venta_diaria_pdv:[],dashboard_ventas_franja_dia:[],dashboard_ventas_medio_pago:[],dashboard_ventas_producto:[],dashboard_ventas_asesor:[],cargue_ventas_diarias:[],cargue_arqueo:[],cargue_venta_mensual_historica:[],cargue_presupuesto_venta:[],cargue_puntos_de_venta:[],inventario_consulta_inventario:[],inventario_consulta:[],inventario_kardex:[],inventario_gestion_productos:[],inventario_bodegas:[],inventario_compras:[],inventario_ventas:[],inventario_notas_credito:[],inventario_ajustes:[],inventario_traslados:[],production_admin:[],production_reportes:[],parametrizacion_puntos_de_venta:[],parametrizacion_perfiles:[],parametrizacion_usuarios:[]}},f=()=>{k(),l.value=!1,s.value=null};return(0,r.sV)((()=>{u()})),{perfiles:a,perfil_nombre:t,permisos:o,secciones:i,errorMessage:n,isEditing:l,createProfile:p,editProfile:m,updateProfile:v,deleteProfile:h,cancelEdit:f}}};const Sn=(0,m.A)(xn,[["render",Tn],["__scopeId","data-v-594a4ea6"]]);var $n=Sn;const Un={class:"users-clientes"},Bn={key:0,class:"error-message"},Mn={class:"form-group"},Wn={class:"form-group"},zn={class:"form-group"},qn={class:"form-group"},jn=["required"],Qn={class:"form-group"},Jn=["value"],Hn={class:"form-group"},Yn={class:"button-group"},Gn={key:0,type:"submit"},Zn={key:1},el=["onClick"],al=["onClick"];function tl(e,a,t,n,l,s){return(0,r.uX)(),(0,r.CE)("div",Un,[a[18]||(a[18]=(0,r.Lk)("h3",null,"Gestión de Usuarios",-1)),n.errorMessage?((0,r.uX)(),(0,r.CE)("div",Bn,(0,b.v_)(n.errorMessage),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:a[7]||(a[7]=(0,o.D$)((e=>n.isEditing?n.updateUser():n.createUser()),["prevent"])),class:"form-grid"},[(0,r.Lk)("div",Mn,[a[8]||(a[8]=(0,r.Lk)("label",{for:"nombre"},"Nombre:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"nombre","onUpdate:modelValue":a[0]||(a[0]=e=>n.nombre=e),required:""},null,512),[[o.Jo,n.nombre]])]),(0,r.Lk)("div",Wn,[a[9]||(a[9]=(0,r.Lk)("label",{for:"apellidos"},"Apellidos:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"apellidos","onUpdate:modelValue":a[1]||(a[1]=e=>n.apellidos=e)},null,512),[[o.Jo,n.apellidos]])]),(0,r.Lk)("div",zn,[a[10]||(a[10]=(0,r.Lk)("label",{for:"usuario"},"Usuario:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"usuario","onUpdate:modelValue":a[2]||(a[2]=e=>n.usuario=e),required:""},null,512),[[o.Jo,n.usuario]])]),(0,r.Lk)("div",qn,[a[11]||(a[11]=(0,r.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[3]||(a[3]=e=>n.password=e),required:!n.isEditing},null,8,jn),[[o.Jo,n.password]])]),(0,r.Lk)("div",Qn,[a[13]||(a[13]=(0,r.Lk)("label",{for:"perfil_id"},"Perfil:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"perfil_id","onUpdate:modelValue":a[4]||(a[4]=e=>n.perfil_id=e),required:""},[a[12]||(a[12]=(0,r.Lk)("option",{value:""},"Seleccione un perfil",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.perfiles,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.perfil_id,value:e.perfil_id},(0,b.v_)(e.perfil_nombre),9,Jn)))),128))],512),[[o.u1,n.perfil_id]])]),(0,r.Lk)("div",Hn,[a[15]||(a[15]=(0,r.Lk)("label",{for:"estado"},"Estado:",-1)),(0,r.bo)((0,r.Lk)("select",{id:"estado","onUpdate:modelValue":a[5]||(a[5]=e=>n.estado=e)},a[14]||(a[14]=[(0,r.Lk)("option",{value:!0},"Activo",-1),(0,r.Lk)("option",{value:!1},"Inactivo",-1)]),512),[[o.u1,n.estado]])]),(0,r.Lk)("div",Yn,[n.isEditing?((0,r.uX)(),(0,r.CE)("div",Zn,[a[16]||(a[16]=(0,r.Lk)("button",{type:"submit"},"Guardar",-1)),(0,r.Lk)("button",{type:"button",onClick:a[6]||(a[6]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))},"Cancelar")])):((0,r.uX)(),(0,r.CE)("button",Gn,"Crear Usuario"))])],32),a[19]||(a[19]=(0,r.Lk)("h3",null,"Usuarios Existentes",-1)),(0,r.Lk)("table",null,[a[17]||(a[17]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Nombre"),(0,r.Lk)("th",null,"Apellidos"),(0,r.Lk)("th",null,"Usuario"),(0,r.Lk)("th",null,"Perfil"),(0,r.Lk)("th",null,"Estado"),(0,r.Lk)("th",null,"Acciones")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.usuarios,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.idusuario},[(0,r.Lk)("td",null,(0,b.v_)(e.nombre),1),(0,r.Lk)("td",null,(0,b.v_)(e.apellidos),1),(0,r.Lk)("td",null,(0,b.v_)(e.usuario),1),(0,r.Lk)("td",null,(0,b.v_)(n.getPerfilNombre(e.perfil_id)),1),(0,r.Lk)("td",null,(0,b.v_)(e.estado?"Activo":"Inactivo"),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:a=>n.editUser(e)},"Editar",8,el),(0,r.Lk)("button",{onClick:a=>n.deleteUser(e.idusuario)},"Eliminar",8,al)])])))),128))])])])}var ol={name:"UsersClientes",setup(){const e=(0,d.Pj)(),a=(0,F.KR)([]),t=(0,F.KR)([]),o=(0,F.KR)(""),n=(0,F.KR)(""),l=(0,F.KR)(""),s=(0,F.KR)(""),i=(0,F.KR)(""),u=(0,F.KR)(!0),c=(0,F.KR)(""),p=(0,F.KR)(!1),m=(0,F.KR)(null),v=async()=>{try{const t=e.state.auth.token,o=e.state.auth.idcliente;if(!t||!o)throw new Error("Autenticación inválida");const r=await P.A.get("/usuarios",{headers:{Authorization:`Bearer ${t}`}});a.value=r.data.filter((e=>e.idcliente===o))}catch(t){c.value=t.response?.data?.error||"Error al obtener usuarios",console.error("Error al obtener usuarios:",t)}},h=async()=>{try{const a=e.state.auth.token,o=e.state.auth.idcliente;if(!a||!o)throw new Error("Autenticación inválida");const r=await P.A.get("/perfiles",{headers:{Authorization:`Bearer ${a}`}});t.value=r.data.filter((e=>e.idcliente===o))}catch(a){c.value=a.response?.data?.error||"Error al obtener perfiles",console.error("Error al obtener perfiles:",a)}},b=async()=>{try{const a=e.state.auth.token,t=e.state.auth.idcliente;if(!a||!t)throw new Error("Autenticación inválida");await P.A.post("/usuarios",{idcliente:t,nombre:o.value,apellidos:n.value,usuario:l.value,password:s.value,perfil_id:i.value,estado:u.value},{headers:{Authorization:`Bearer ${a}`}}),_(),v()}catch(a){a.response?.data?.error.includes("nombre de usuario ya está en uso")?c.value=a.response.data.error:c.value=a.response?.data?.error||"Error al crear usuario",console.error("Error al crear usuario:",a)}},k=e=>{p.value=!0,m.value=e.idusuario,o.value=e.nombre,n.value=e.apellidos,l.value=e.usuario,s.value="",i.value=e.perfil_id,u.value=e.estado},g=async()=>{try{const a=e.state.auth.token,t=e.state.auth.idcliente;if(!a||!t)throw new Error("Autenticación inválida");const r={idcliente:t,nombre:o.value,apellidos:n.value,usuario:l.value,perfil_id:i.value,estado:u.value};s.value&&(r.password=s.value),await P.A.put(`/usuarios/${m.value}`,r,{headers:{Authorization:`Bearer ${a}`}}),_(),p.value=!1,m.value=null,v()}catch(a){c.value=a.response?.data?.error||"Error al actualizar usuario",console.error("Error al actualizar usuario:",a)}},f=async a=>{if(confirm("¿Está seguro de eliminar este usuario?"))try{const t=e.state.auth.token;if(!t)throw new Error("No se encontró token de autenticación");await P.A.delete(`/usuarios/${a}`,{headers:{Authorization:`Bearer ${t}`}}),v()}catch(t){c.value=t.response?.data?.error||"Error al eliminar usuario",console.error("Error al eliminar usuario:",t)}},y=e=>{const a=t.value.find((a=>a.perfil_id===e));return a?a.perfil_nombre:"N/A"},_=()=>{o.value="",n.value="",l.value="",s.value="",i.value="",u.value=!0,c.value=""},C=()=>{_(),p.value=!1,m.value=null};return(0,r.sV)((()=>{v(),h()})),{usuarios:a,perfiles:t,nombre:o,apellidos:n,usuario:l,password:s,perfil_id:i,estado:u,errorMessage:c,isEditing:p,createUser:b,editUser:k,updateUser:g,deleteUser:f,cancelEdit:C,getPerfilNombre:y}}};const rl=(0,m.A)(ol,[["render",tl],["__scopeId","data-v-124e4075"]]);var nl=rl;const ll=[{path:"/",name:"main-menu",component:S,meta:{requiresAuth:!0}},{path:"/analysis",name:"analysis",component:G,meta:{requiresAuth:!0}},{path:"/inventory",name:"inventory",component:()=>t.e(709).then(t.bind(t,7709)),meta:{requiresAuth:!0}},{path:"/inventory/consulta-inventario",name:"ConsultaInventario",component:()=>t.e(14).then(t.bind(t,14)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"consulta_inventario",permiso:"ver"}},{path:"/inventory/consulta-lite",name:"ConsultaInventarioLite",component:()=>t.e(605).then(t.bind(t,6605)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"consulta",permiso:"ver"}},{path:"/inventory/kardex",name:"Kardex",component:()=>t.e(663).then(t.bind(t,2663)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"kardex",permiso:"ver"}},{path:"/inventory/gestion-productos-materiales",name:"GestionProductosMateriales",component:()=>t.e(625).then(t.bind(t,9625)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"gestion_productos",permiso:"editar"}},{path:"/inventory/bodegas",name:"BodegasForm",component:()=>t.e(610).then(t.bind(t,8610)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"bodegas",permiso:"ver"}},{path:"/inventory/trasladar-cantidades",name:"TrasladarCantidades",component:()=>t.e(877).then(t.bind(t,7877)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"traslados",permiso:"ver"}},{path:"/inventory/cargar-compras",name:"CargarComprasProducto",component:()=>t.e(627).then(t.bind(t,4627)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"compras",permiso:"ver"}},{path:"/inventory/ventas",name:"CargarVentasManual",component:()=>t.e(155).then(t.bind(t,6155)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"ventas",permiso:"ver"}},{path:"/inventory/notas-credito",name:"CargarNotasCredito",component:()=>t.e(607).then(t.bind(t,1607)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"notas_credito",permiso:"ver"}},{path:"/inventory/ajuste-inventario",name:"AjusteInventario",component:()=>t.e(757).then(t.bind(t,1757)),meta:{requiresAuth:!0,seccion:"inventario",subseccion:"ajustes",permiso:"ver"}},{path:"/production",name:"production",component:()=>t.e(719).then(t.bind(t,4719)),meta:{requiresAuth:!0}},{path:"/production/admin",name:"ProduccionAdmin",component:()=>t.e(897).then(t.bind(t,4897)),meta:{requiresAuth:!0,seccion:"production",subseccion:"admin",permiso:"ver"}},{path:"/production/reportes",name:"ReportesProduccion",component:()=>t.e(85).then(t.bind(t,5085)),meta:{requiresAuth:!0,seccion:"production",subseccion:"reportes",permiso:"ver"}},{path:"/settings",name:"settings",component:()=>t.e(618).then(t.bind(t,618)),meta:{requiresAuth:!0,seccion:"parametrizacion",permiso:"editar"}},{path:"/login",name:"Login",component:I},{path:"/upload",name:"UploadMenu",component:va,meta:{requiresAuth:!0,seccion:"cargue",permiso:"editar"}},{path:"/upload/sales",name:"UploadSales",component:Ea,meta:{requiresAuth:!0,seccion:"cargue",subseccion:"ventas_diarias",permiso:"editar"}},{path:"/upload/arqueo",name:"UploadArqueo",component:Xa,meta:{requiresAuth:!0,seccion:"cargue",subseccion:"arqueo",permiso:"editar"}},{path:"/upload/venta-mensual",name:"UploadVentaMensual",component:Ba,meta:{requiresAuth:!0,seccion:"cargue",subseccion:"venta_mensual_historica",permiso:"editar"}},{path:"/upload/budget",name:"UploadBudget",component:et,meta:{requiresAuth:!0,seccion:"cargue",subseccion:"presupuesto_venta",permiso:"editar"}},{path:"/dashboard",name:"Dashboard",component:nt,meta:{requiresAuth:!0,seccion:"dashboard",permiso:"ver"}},{path:"/dashboard/historical-sales",name:"HistoricalSales",component:bt,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"ventas_historicas",permiso:"ver"}},{path:"/dashboard/monthly-performance",name:"MonthlyPerformance",component:xt,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"rendimiento_mensual",permiso:"ver"}},{path:"/dashboard/daily-sales",name:"DailySales",component:oo,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"venta_diaria_pdv",permiso:"ver"}},{path:"/dashboard/sales-by-time-slot",name:"SalesByTimeSlot",component:Co,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"ventas_franja_dia",permiso:"ver"}},{path:"/dashboard/sales-by-payment-method",name:"SalesByPaymentMethod",component:Uo,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"ventas_medio_pago",permiso:"ver"}},{path:"/dashboard/sales-by-product",name:"SalesByProduct",component:ir,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"ventas_producto",permiso:"ver"}},{path:"/dashboard/sales-by-seller",name:"SalesBySeller",component:Nr,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"ventas_asesor",permiso:"ver"}},{path:"/dashboard/accumulated-sales-by-pdv",name:"AccumulatedSalesByPDV",component:rn,meta:{requiresAuth:!0,seccion:"dashboard",subseccion:"venta_acumulada_pdv",permiso:"ver"}},{path:"/points-of-sale",name:"PointsOfSale",component:Ln,meta:{requiresAuth:!0,seccion:"cargue",subseccion:"puntos_de_venta",permiso:"editar"}},{path:"/profiles-clientes",name:"ProfilesClientes",component:$n,meta:{requiresAuth:!0,seccion:"parametrizacion",subseccion:"perfiles",permiso:"editar"}},{path:"/users-clientes",name:"UsersClientes",component:nl,meta:{requiresAuth:!0,seccion:"parametrizacion",subseccion:"usuarios",permiso:"editar"}},{path:"/admin",name:"Admin",component:oe,meta:{requiresAuth:!0,requiresSuperAdmin:!0},children:[{path:"clientes",name:"Clientes",component:Le,meta:{seccion:"administracion",subseccion:"crear_clientes",permiso:"crear"}},{path:"perfiles",name:"Profiles",component:Be,meta:{seccion:"administracion",subseccion:"crear_perfiles",permiso:"crear"}},{path:"usuarios",name:"Users",component:ua,meta:{seccion:"administracion",subseccion:"crear_usuarios",permiso:"crear"}}]}],sl=(0,c.aE)({history:(0,c.Bt)(),routes:ll});sl.beforeEach(((e,a,t)=>{const o=(0,d.Pj)();if(e.matched.some((e=>e.meta.requiresAuth))){if(!o.getters.isAuthenticated)return void t("/login");if(e.matched.some((e=>e.meta.requiresSuperAdmin)))return o.getters.isSuperAdmin?void t():void t("/");if(o.state.auth.idcliente&&!1===o.state.cliente.estado)return o.commit("logout"),void t("/login");const a=e.matched.filter((e=>e.meta.seccion));if(a.length>0)for(const e of a){const{seccion:a,subseccion:r,permiso:n}=e.meta;if(!o.getters.hasPermission(a,r,n))return console.log(`Permiso denegado para ${a}/${r}/${n}`),void t("/")}o.state.auth.idcliente&&!o.state.cliente.nombre?o.dispatch("fetchCliente").then((()=>{t()})).catch((()=>{t("/")})):t()}else{if("/login"===e.path&&o.getters.isAuthenticated)return void(o.getters.isSuperAdmin?t("/admin"):t("/"));t()}}));var il=sl,ul=t(5129),dl=t(8950),cl=t(2353),pl=t(4084);dl.Yv.add(cl.X7I);const ml=(0,o.Ef)(h);ml.component("font-awesome-icon",V.gc),ml.use(il),ml.use(ul.A),ml.use(pl.Ay,{autoClose:3e3,position:"top-right",transition:"slide"}),ml.mount("#app")},5129:function(e,a,t){t(8111),t(3579);var o=t(782),r=t(7682);a.A=(0,o.y$)({state:{auth:{token:null,idcliente:null,perfilid:null,permisos:[]},cliente:{nombre:"",logo:"",estado:!0}},mutations:{setAuth(e,{token:a,idcliente:t,perfilid:o,permisos:r}){e.auth.token=a,e.auth.idcliente=t,e.auth.perfilid=o,e.auth.permisos=r},setCliente(e,{nombre:a,logo:t,estado:o}){e.cliente.nombre=a,e.cliente.logo=t,e.cliente.estado=void 0===o||o},logout(e){e.auth.token=null,e.auth.idcliente=null,e.auth.perfilid=null,e.auth.permisos=[],e.cliente.nombre="",e.cliente.logo="",e.cliente.estado=!0}},actions:{async fetchCliente({commit:e,state:a}){if(a.auth.idcliente)try{const t=await r.A.get(`/cliente/${a.auth.idcliente}`,{headers:{Authorization:`Bearer ${a.auth.token}`}});e("setCliente",{nombre:t.data.nombre,logo:t.data.logo,estado:t.data.estado})}catch(t){console.error("Error al obtener información del cliente:",t)}}},getters:{isAuthenticated:e=>!!e.auth.token,isSuperAdmin:e=>1===e.auth.perfilid,hasPermission:e=>(a,t,o)=>e.auth.permisos.some((e=>e.seccion===a&&(e.subseccion===t||!t&&!e.subseccion)&&e.permiso===o))}})},7682:function(e,a,t){var o=t(4373),r=t(5129);const n="https://web-production-9f9be.up.railway.app/",l=o.A.create({baseURL:n,timeout:3e4});l.interceptors.request.use((e=>{const a=r.A.state.auth.token;return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e),(e=>(console.error("Error en la solicitud:",e),401===e.response?.status&&(r.A.commit("logout"),window.location.href="/login"),Promise.reject(e)))),a.A=l}},a={};function t(o){var r=a[o];if(void 0!==r)return r.exports;var n=a[o]={exports:{}};return e[o].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,o,r,n){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],n=e[d][2];for(var s=!0,i=0;i<o.length;i++)(!1&n||l>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(s=!1,n<l&&(l=n));if(s){e.splice(d--,1);var u=r();void 0!==u&&(a=u)}}return a}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,r,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){var e,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};t.t=function(o,r){if(1&r&&(o=this(o)),8&r)return o;if("object"===typeof o&&o){if(4&r&&o.__esModule)return o;if(16&r&&"function"===typeof o.then)return o}var n=Object.create(null);t.r(n);var l={};e=e||[null,a({}),a([]),a(a)];for(var s=2&r&&o;"object"==typeof s&&!~e.indexOf(s);s=a(s))Object.getOwnPropertyNames(s).forEach((function(e){l[e]=function(){return o[e]}}));return l["default"]=function(){return o},t.d(n,l),n}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,o){return t.f[o](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{14:"88787082",85:"82181df3",155:"0ad85251",234:"4df0e1e0",353:"b435f84d",605:"9d929b47",607:"9d84969f",610:"2043ca45",618:"eb19b33e",625:"e0e6af40",627:"7e080e40",663:"a83aeccb",709:"565d849b",719:"773706a8",757:"0c563503",877:"4a2accf5",897:"8ff9647d"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{14:"61ff2a22",85:"af539dbd",155:"9085ec6d",605:"6de7c3c8",607:"d205d71b",610:"63dd9d7d",618:"d5c90fd3",625:"b60f516e",627:"57b1e026",663:"9d241463",709:"7d97269d",719:"e49b5d4d",757:"4667c418",877:"bfcc4a63",897:"b6765172"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="frontend:";t.l=function(o,r,n,l){if(e[o])e[o].push(r);else{var s,i;if(void 0!==n)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==o||c.getAttribute("data-webpack")==a+n){s=c;break}}s||(i=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",a+n),s.src=o),e[o]=[r];var p=function(a,t){s.onerror=s.onload=null,clearTimeout(m);var r=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(t)})),a)return a(t)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),i&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,o,r,n){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",t.nc&&(l.nonce=t.nc);var s=function(t){if(l.onerror=l.onload=null,"load"===t.type)r();else{var o=t&&t.type,s=t&&t.target&&t.target.href||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+s+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=o,i.request=s,l.parentNode&&l.parentNode.removeChild(l),n(i)}};return l.onerror=l.onload=s,l.href=a,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},a=function(e,a){for(var t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var r=t[o],n=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===a))return r}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){r=l[o],n=r.getAttribute("data-href");if(n===e||n===a)return r}},o=function(o){return new Promise((function(r,n){var l=t.miniCssF(o),s=t.p+l;if(a(l,s))return r();e(o,s,null,r,n)}))},r={524:0};t.f.miniCss=function(e,a){var t={14:1,85:1,155:1,605:1,607:1,610:1,618:1,625:1,627:1,663:1,709:1,719:1,757:1,877:1,897:1};r[e]?a.push(r[e]):0!==r[e]&&t[e]&&a.push(r[e]=o(e).then((function(){r[e]=0}),(function(a){throw delete r[e],a})))}}}(),function(){var e={524:0};t.f.j=function(a,o){var r=t.o(e,a)?e[a]:void 0;if(0!==r)if(r)o.push(r[2]);else{var n=new Promise((function(t,o){r=e[a]=[t,o]}));o.push(r[2]=n);var l=t.p+t.u(a),s=new Error,i=function(o){if(t.o(e,a)&&(r=e[a],0!==r&&(e[a]=void 0),r)){var n=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;s.message="Loading chunk "+a+" failed.\n("+n+": "+l+")",s.name="ChunkLoadError",s.type=n,s.request=l,r[1](s)}};t.l(l,i,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,o){var r,n,l=o[0],s=o[1],i=o[2],u=0;if(l.some((function(a){return 0!==e[a]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(i)var d=i(t)}for(a&&a(o);u<l.length;u++)n=l[u],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(1538)}));o=t.O(o)})();
//# sourceMappingURL=app.1040024b.js.map